import{c as ps,r as l,j as e,u as X,F as gs,L as T,a as ys,b as K,d as re,e as ee,f as Os,g as Ds,h as Se,i as ge,k as J,l as W,m as ss,n as qs,o as Oe,p as fs,q as js,s as Bs,t as Ms,v as zs,w as Us,x as Hs,y as Gs,z as ts,A as Te,B as bs,C as Ve,D as Ns,E as he,G as Ce,H as U,I as Vs,J as ne,K as as,M as Z,N as ye,O as V,P as vs,Q as Pe,R as Y,S as Ws,T as Qs,U as ws,V as Ks,W as Ys,X as Js,Y as We,Z as R,_ as le,$ as Qe,a0 as Zs,a1 as fe,a2 as Xs,a3 as ae,a4 as Ee,a5 as Ke,a6 as Ye,a7 as De,a8 as et,a9 as st,aa as tt,ab as rs,ac as at,ad as rt,ae as qe,af as nt,ag as He,ah as ve,ai as Fe,aj as ie,ak as ks,al as we,am as ue,an as os,ao as Ae,ap as lt,aq as it,ar as Je,as as ce,at as je,au as be,av as Ze,aw as ns,ax as se,ay as Le,az as ot,aA as ct,aB as dt,aC as mt,aD as xt,aE as me,aF as ht,aG as Ne,aH as ut,aI as Be,aJ as pt,aK as xe,aL as te,aM as cs,aN as gt,aO as yt,aP as Ie,aQ as ls,aR as ft,aS as jt,aT as _s,aU as Xe,aV as ds,aW as bt,aX as Nt,aY as vt,aZ as wt,a_ as q,a$ as kt}from"./vendor-react-BRiYoWfo.js";import{p as Ss,b as _t}from"./vendor-state-Bz4OTYME.js";import{a as Cs,f as es}from"./vendor-DOsZv3Dg.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const p of n)if(p.type==="childList")for(const u of p.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(n){const p={};return n.integrity&&(p.integrity=n.integrity),n.referrerPolicy&&(p.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?p.credentials="include":n.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function r(n){if(n.ep)return;n.ep=!0;const p=t(n);fetch(n.href,p)}})();const Ps="/api",D=Cs.create({baseURL:Ps,headers:{"Content-Type":"application/json"}});D.interceptors.request.use(s=>{const i=localStorage.getItem("accessToken");return i&&(s.headers.Authorization=`Bearer ${i}`),s},s=>Promise.reject(s));D.interceptors.response.use(s=>s,async s=>{const i=s.config;if(s.response?.status===401&&!i._retry){i._retry=!0;try{const t=localStorage.getItem("refreshToken");if(t){const r=await Cs.post(`${Ps}/token/refresh/`,{refresh:t}),{access:n}=r.data;return localStorage.setItem("accessToken",n),i.headers.Authorization=`Bearer ${n}`,D(i)}}catch(t){return localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),window.location.href="/login",Promise.reject(t)}}return Promise.reject(s)});const de={login:async s=>(await D.post("/auth/login/",s)).data,register:async s=>(await D.post("/auth/register/",s)).data,registerShopOwner:async s=>(await D.post("/auth/register/shop-owner/",s)).data,oauthLogin:async(s,i,t="customer")=>(await D.post("/auth/oauth/",{provider:s,access_token:i,user_type:t})).data,refreshToken:async s=>(await D.post("/auth/token/refresh/",{refresh:s})).data,logout:async s=>{},getProfile:async()=>(await D.get("/auth/profile/")).data},z=ps()(Ss((s,i)=>({user:null,userProfile:null,shop:null,accessToken:null,refreshToken:null,isAuthenticated:!1,isLoading:!1,userType:null,login:async(t,r)=>{try{s({isLoading:!0});const n=await de.login({email:t,password:r}),{access:p,refresh:u,user:f,profile:c,shop:v}=n;localStorage.setItem("accessToken",p),localStorage.setItem("refreshToken",u);const o=c?.is_shopowner?"shop_owner":"customer";s({user:f,userProfile:c,shop:v||null,accessToken:p,refreshToken:u,isAuthenticated:!0,isLoading:!1,userType:o})}catch(n){throw s({isLoading:!1}),n}},loginWithOAuth:async(t,r,n="customer")=>{try{s({isLoading:!0});const p=await de.oauthLogin(t,r,n),{access:u,refresh:f,user:c,profile:v,shop:o,is_new_user:a,needs_shop_setup:g}=p;localStorage.setItem("accessToken",u),localStorage.setItem("refreshToken",f);const j=v?.is_shopowner?"shop_owner":"customer";return s({user:c,userProfile:v,shop:o||null,accessToken:u,refreshToken:f,isAuthenticated:!0,isLoading:!1,userType:j}),{is_new_user:a,needs_shop_setup:g}}catch(p){throw s({isLoading:!1}),p}},register:async t=>{try{s({isLoading:!0});const r=await de.register(t),{access:n,refresh:p,user:u,profile:f}=r;localStorage.setItem("accessToken",n),localStorage.setItem("refreshToken",p),s({user:u,userProfile:f,shop:null,accessToken:n,refreshToken:p,isAuthenticated:!0,isLoading:!1,userType:"customer"})}catch(r){throw s({isLoading:!1}),r}},registerShopOwner:async t=>{try{s({isLoading:!0});const r=await de.registerShopOwner(t),{access:n,refresh:p,user:u,profile:f,shop:c}=r;localStorage.setItem("accessToken",n),localStorage.setItem("refreshToken",p),s({user:u,userProfile:f,shop:c,accessToken:n,refreshToken:p,isAuthenticated:!0,isLoading:!1,userType:"shop_owner"})}catch(r){throw s({isLoading:!1}),r}},logout:async()=>{try{const t=localStorage.getItem("refreshToken");t&&await de.logout(t)}catch(t){console.error("Logout error:",t)}localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),s({user:null,userProfile:null,shop:null,accessToken:null,refreshToken:null,isAuthenticated:!1,userType:null})},checkAuth:async()=>{try{const t=localStorage.getItem("accessToken"),r=localStorage.getItem("refreshToken");if(!t||!r){s({isAuthenticated:!1,userType:null});return}const n=await de.getProfile(),{user:p,profile:u,shop:f}=n,c=u?.is_shopowner?"shop_owner":"customer";s({user:p,userProfile:u,shop:f||null,accessToken:t,refreshToken:r,isAuthenticated:!0,userType:c})}catch(t){console.warn("Auth check failed, clearing tokens:",t),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),s({user:null,userProfile:null,shop:null,accessToken:null,refreshToken:null,isAuthenticated:!1,userType:null})}},setUser:(t,r,n)=>{const p=r?.is_shopowner?"shop_owner":"customer";s({user:t,userProfile:r,shop:n||null,userType:p})},setTokens:(t,r)=>{localStorage.setItem("accessToken",t),localStorage.setItem("refreshToken",r),s({accessToken:t,refreshToken:r,isAuthenticated:!0})},updateUserType:t=>{s({userType:t})}}),{name:"auth-storage",partialize:s=>({user:s.user,userProfile:s.userProfile,shop:s.shop,accessToken:s.accessToken,refreshToken:s.refreshToken,isAuthenticated:s.isAuthenticated,userType:s.userType})})),Fs=l.createContext(void 0),St=()=>{const s=l.useContext(Fs);if(!s)throw new Error("useTheme must be used within a ThemeProvider");return s},Ct=({children:s})=>{const[i,t]=l.useState(()=>{const u=localStorage.getItem("theme");return u||(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")});l.useEffect(()=>{i==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("theme",i)},[i]);const p={theme:i,toggleTheme:()=>{t(u=>u==="light"?"dark":"light")},setTheme:u=>{t(u)}};return e.jsx(Fs.Provider,{value:p,children:s})},$e=ps()(Ss((s,i)=>({items:[],isOpen:!1,addItem:(t,r,n=1)=>{const p=`${t.productId}-${r?.id||"default"}`;s(u=>u.items.find(c=>c.id===p)?{items:u.items.map(c=>c.id===p?{...c,quantity:c.quantity+n}:c)}:{items:[...u.items,{id:p,product:t,variant:r,quantity:n,addedAt:new Date().toISOString()}]})},removeItem:t=>{s(r=>({items:r.items.filter(n=>n.id!==t)}))},updateQuantity:(t,r)=>{if(r<=0){i().removeItem(t);return}s(n=>({items:n.items.map(p=>p.id===t?{...p,quantity:r}:p)}))},clearCart:()=>{s({items:[]})},toggleCart:()=>{s(t=>({isOpen:!t.isOpen}))},getTotalItems:()=>i().items.reduce((t,r)=>t+r.quantity,0),getTotalPrice:()=>i().items.reduce((t,r)=>{let n=r.product.promotional_price?parseFloat(r.product.promotional_price):parseFloat(r.product.price);return r.variant?.price_adjustment&&(n+=parseFloat(r.variant.price_adjustment)),t+n*r.quantity},0)}),{name:"cart-storage",partialize:s=>({items:s.items})})),Pt=({onMobileMenuToggle:s})=>{const{isAuthenticated:i,user:t,logout:r}=z(),{getTotalItems:n}=$e(),{theme:p,toggleTheme:u}=St(),f=X(),[c,v]=l.useState(!1),[o,a]=l.useState(""),g=()=>{r(),f("/"),v(!1)},j=k=>{k.preventDefault(),o.trim()&&(f(`/search?q=${encodeURIComponent(o.trim())}`),a(""))},P=n(),m=t?.profile?.is_shopowner;return e.jsxs("header",{className:"bg-white dark:bg-neutral-900 border-b border-neutral-200 dark:border-neutral-800 sticky top-0 z-40 backdrop-blur-sm bg-white/95 dark:bg-neutral-900/95",children:[e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:s,className:"md:hidden menu-toggle p-2 rounded-lg text-neutral-600 dark:text-neutral-400 hover:bg-neutral-100 dark:hover:bg-neutral-800 transition-colors","aria-label":"Toggle mobile menu",children:e.jsx(gs,{className:"h-6 w-6"})}),e.jsx(T,{to:"/",className:"flex items-center ml-2 md:ml-0",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-primary-600 to-primary-700 rounded-lg flex items-center justify-center shadow-enterprise",children:e.jsx(ys,{className:"h-5 w-5 text-white"})}),e.jsx("span",{className:"ml-3 text-xl font-bold text-neutral-900 dark:text-white tracking-tight",children:"OneSoko"}),e.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs font-medium bg-primary-100 dark:bg-primary-900/50 text-primary-700 dark:text-primary-300 rounded-full",children:"Enterprise"})]})})]}),e.jsx("div",{className:"hidden md:flex flex-1 max-w-2xl mx-8",children:e.jsx("form",{onSubmit:j,className:"w-full",children:e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx(K,{className:"h-5 w-5 text-neutral-400 group-focus-within:text-primary-500 transition-colors"})}),e.jsx("input",{type:"text",value:o,onChange:k=>a(k.target.value),placeholder:"Search products, brands, categories...",className:"block w-full pl-12 pr-12 py-3 border border-neutral-300 dark:border-neutral-600 rounded-xl bg-neutral-50 dark:bg-neutral-800 text-neutral-900 dark:text-white placeholder-neutral-500 dark:placeholder-neutral-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent focus:bg-white dark:focus:bg-neutral-700 transition-all shadow-sm hover:shadow-md focus:shadow-elevated"}),o&&e.jsx("button",{type:"button",onClick:()=>a(""),className:"absolute right-4 top-1/2 transform -translate-y-1/2 p-1 text-neutral-400 hover:text-neutral-600 rounded-full hover:bg-neutral-200 dark:hover:bg-neutral-600 transition-colors",children:e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[i&&m&&e.jsxs("div",{className:"hidden lg:flex items-center space-x-2 mr-4 pl-4 border-l border-neutral-200 dark:border-neutral-700",children:[e.jsxs(T,{to:"/shop/dashboard",className:"flex items-center px-3 py-2 text-sm font-medium text-neutral-600 dark:text-neutral-400 hover:text-primary-600 dark:hover:text-primary-400 rounded-lg hover:bg-neutral-100 dark:hover:bg-neutral-800 transition-all",children:[e.jsx(re,{className:"h-4 w-4 mr-2"}),"Dashboard"]}),e.jsxs(T,{to:"/shop/products/add",className:"flex items-center px-3 py-2 text-sm font-medium text-white bg-gradient-to-r from-primary-600 to-primary-700 hover:from-primary-700 hover:to-primary-800 rounded-lg transition-all shadow-enterprise",children:[e.jsx(ee,{className:"h-4 w-4 mr-2"}),"Add Product"]})]}),e.jsx("button",{onClick:u,className:"p-2 rounded-lg text-neutral-600 dark:text-neutral-400 hover:bg-neutral-100 dark:hover:bg-neutral-800 transition-colors","aria-label":"Toggle theme",children:p==="dark"?e.jsx(Os,{className:"h-5 w-5"}):e.jsx(Ds,{className:"h-5 w-5"})}),i&&e.jsxs(T,{to:"/notifications",className:"relative p-2 rounded-lg text-neutral-600 dark:text-neutral-400 hover:bg-neutral-100 dark:hover:bg-neutral-800 transition-colors",children:[e.jsx(Se,{className:"h-5 w-5"}),e.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-error-500 text-white text-xs rounded-full flex items-center justify-center font-medium",children:"3"})]}),e.jsxs(T,{to:"/cart",className:"relative p-2 rounded-lg text-neutral-600 dark:text-neutral-400 hover:bg-neutral-100 dark:hover:bg-neutral-800 transition-colors",children:[e.jsx(ge,{className:"h-5 w-5"}),P>0&&e.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-primary-600 text-white text-xs rounded-full flex items-center justify-center font-medium",children:P>99?"99+":P})]}),i?e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>v(!c),className:"flex items-center p-1 rounded-lg hover:bg-neutral-100 dark:hover:bg-neutral-800 transition-colors",children:e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-primary-500 to-primary-600 rounded-lg flex items-center justify-center shadow-enterprise",children:e.jsx("span",{className:"text-white text-sm font-medium",children:t?.first_name?.[0]||t?.username?.[0]||"U"})})}),c&&e.jsxs("div",{className:"absolute right-0 mt-2 w-72 bg-white dark:bg-neutral-800 rounded-xl shadow-elevated border border-neutral-200 dark:border-neutral-700 py-2 z-50",children:[e.jsx("div",{className:"px-4 py-3 border-b border-neutral-200 dark:border-neutral-700",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-primary-500 to-primary-600 rounded-lg flex items-center justify-center shadow-enterprise",children:e.jsx("span",{className:"text-white font-semibold text-lg",children:t?.first_name?.[0]||t?.username?.[0]||"U"})}),e.jsxs("div",{className:"ml-3 flex-1",children:[e.jsx("p",{className:"text-sm font-semibold text-neutral-900 dark:text-white",children:t?.first_name&&t?.last_name?`${t.first_name} ${t.last_name}`:t?.username||"User"}),e.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400 truncate",children:t?.email}),m&&e.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-primary-100 dark:bg-primary-900/50 text-primary-700 dark:text-primary-300 mt-1",children:[e.jsx(J,{className:"w-3 h-3 mr-1"}),"Shop Owner"]})]})]})}),e.jsxs("div",{className:"py-1",children:[e.jsxs(T,{to:"/profile",className:"flex items-center px-4 py-2.5 text-sm text-neutral-700 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-neutral-700 transition-colors",onClick:()=>v(!1),children:[e.jsx(W,{className:"h-4 w-4 mr-3 text-neutral-500"}),"Profile Settings"]}),m&&e.jsxs(e.Fragment,{children:[e.jsxs(T,{to:"/shop/dashboard",className:"flex items-center px-4 py-2.5 text-sm text-neutral-700 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-neutral-700 transition-colors",onClick:()=>v(!1),children:[e.jsx(re,{className:"h-4 w-4 mr-3 text-neutral-500"}),"Business Dashboard"]}),e.jsxs(T,{to:"/shop/settings",className:"flex items-center px-4 py-2.5 text-sm text-neutral-700 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-neutral-700 transition-colors",onClick:()=>v(!1),children:[e.jsx(ss,{className:"h-4 w-4 mr-3 text-neutral-500"}),"Business Settings"]})]}),e.jsx("div",{className:"border-t border-neutral-200 dark:border-neutral-700 my-1"}),e.jsxs("button",{onClick:g,className:"flex items-center w-full px-4 py-2.5 text-sm text-error-600 dark:text-error-400 hover:bg-error-50 dark:hover:bg-error-900/20 transition-colors",children:[e.jsx(qs,{className:"h-4 w-4 mr-3"}),"Sign Out"]})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(T,{to:"/login",className:"px-4 py-2 text-sm font-medium text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-white transition-colors",children:"Sign In"}),e.jsx(T,{to:"/register",className:"px-4 py-2 text-sm font-semibold text-white bg-gradient-to-r from-primary-600 to-primary-700 hover:from-primary-700 hover:to-primary-800 rounded-lg transition-all shadow-enterprise",children:"Get Started"})]})]})]}),e.jsx("div",{className:"md:hidden pb-3",children:e.jsx("form",{onSubmit:j,children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(K,{className:"h-5 w-5 text-neutral-400"})}),e.jsx("input",{type:"text",value:o,onChange:k=>a(k.target.value),placeholder:"Search products, categories, shops...",className:"block w-full pl-10 pr-4 py-2.5 border border-neutral-300 dark:border-neutral-600 rounded-xl bg-neutral-50 dark:bg-neutral-800 text-neutral-900 dark:text-white placeholder-neutral-500 dark:placeholder-neutral-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent shadow-sm"})]})})})]}),c&&e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>v(!1)})]})},Ft=({onClose:s})=>{const i=Oe(),{isAuthenticated:t,user:r}=z(),n=r?.profile?.is_shopowner,p=[{name:"Home",href:"/",icon:js,iconSolid:fs,description:"Dashboard & Overview"},{name:"Feed",href:"/feed",icon:Ms,iconSolid:Bs,description:"Latest Updates",requiresAuth:!0},{name:"Discover",href:"/discover",icon:Us,iconSolid:zs,description:"Find New Products"},{name:"Explore",href:"/explore",icon:K,iconSolid:Hs,description:"Browse & Search"},{name:"Categories",href:"/categories",icon:ts,iconSolid:Gs,description:"Product Categories"},{name:"Shops",href:"/shops",icon:J,iconSolid:Te,description:"Browse All Shops"}],u=[{name:"Dashboard",href:"/shop/dashboard",icon:re,description:"Business Analytics"},{name:"Products",href:"/shop/products",icon:bs,description:"Manage Inventory"},{name:"Orders",href:"/shop/orders",icon:Ve,description:"Order Management"},{name:"Settings",href:"/shop/settings",icon:ss,description:"Business Settings"}],f=[{name:"Help Center",href:"/help",icon:Ns,description:"Get Support"},{name:"What's New",href:"/whats-new",icon:he,description:"Latest Features"}],c=o=>o==="/"?i.pathname==="/":i.pathname.startsWith(o),v=({item:o})=>{const a=c(o.href),g=a&&o.iconSolid?o.iconSolid:o.icon;return o.requiresAuth&&!t?null:e.jsxs(T,{to:o.href,onClick:()=>{s(),setTimeout(()=>{},100)},className:`group nav-item flex items-center px-3 py-2.5 text-sm font-medium rounded-xl transition-all duration-200 ${a?"bg-primary-50 dark:bg-primary-900/20 text-primary-700 dark:text-primary-300 shadow-sm":"text-neutral-600 dark:text-neutral-400 hover:bg-neutral-100 dark:hover:bg-neutral-800 hover:text-neutral-900 dark:hover:text-white"}`,children:[e.jsx(g,{className:`h-5 w-5 mr-3 transition-colors ${a?"text-primary-600 dark:text-primary-400":"text-neutral-500 dark:text-neutral-400 group-hover:text-neutral-700 dark:group-hover:text-neutral-300"}`}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:o.name}),e.jsx("div",{className:`text-xs mt-0.5 ${a?"text-primary-600/70 dark:text-primary-400/70":"text-neutral-500 dark:text-neutral-500 group-hover:text-neutral-600 dark:group-hover:text-neutral-400"}`,children:o.description})]}),a&&e.jsx("div",{className:"w-2 h-2 bg-primary-600 dark:bg-primary-400 rounded-full"})]})};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"h-screen w-full bg-white dark:bg-neutral-900 border-r border-neutral-200 dark:border-neutral-800",children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx("div",{className:"px-4 py-6 border-b border-neutral-200 dark:border-neutral-800",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-primary-600 to-primary-700 rounded-lg flex items-center justify-center shadow-enterprise",children:e.jsx(ys,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h1",{className:"text-lg font-bold text-neutral-900 dark:text-white",children:"Navigation"}),e.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"Enterprise Platform"})]})]}),e.jsx("button",{onClick:s,className:"md:hidden p-2 rounded-lg hover:bg-neutral-100 dark:hover:bg-neutral-800 transition-colors",children:e.jsx("svg",{className:"w-5 h-5 text-neutral-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto px-4 py-6 sidebar-scrollbar",children:e.jsxs("nav",{className:"space-y-8 pb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-semibold text-neutral-500 dark:text-neutral-400 uppercase tracking-wider mb-4",children:"Main Menu"}),e.jsx("div",{className:"space-y-1",children:p.map(o=>e.jsx(v,{item:o},o.name))})]}),t&&n&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-semibold text-neutral-500 dark:text-neutral-400 uppercase tracking-wider mb-4",children:"Business Tools"}),e.jsx("div",{className:"space-y-1",children:u.map(o=>e.jsx(v,{item:o},o.name))})]}),t&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-semibold text-neutral-500 dark:text-neutral-400 uppercase tracking-wider mb-4",children:"Quick Access"}),e.jsx("div",{className:"space-y-1",children:e.jsxs(T,{to:"/notifications",onClick:s,className:"group flex items-center px-3 py-2.5 text-sm font-medium rounded-xl text-neutral-600 dark:text-neutral-400 hover:bg-neutral-100 dark:hover:bg-neutral-800 hover:text-neutral-900 dark:hover:text-white transition-all",children:[e.jsx(Se,{className:"h-5 w-5 mr-3 text-neutral-500 dark:text-neutral-400 group-hover:text-neutral-700 dark:group-hover:text-neutral-300"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:"Notifications"}),e.jsx("div",{className:"text-xs text-neutral-500 dark:text-neutral-500 group-hover:text-neutral-600 dark:group-hover:text-neutral-400 mt-0.5",children:"Stay Updated"})]}),e.jsx("span",{className:"w-2 h-2 bg-error-500 rounded-full"})]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-semibold text-neutral-500 dark:text-neutral-400 uppercase tracking-wider mb-4",children:"Support"}),e.jsx("div",{className:"space-y-1",children:f.map(o=>e.jsx(v,{item:o},o.name))})]})]})}),e.jsx("div",{className:"px-4 py-4 border-t border-neutral-200 dark:border-neutral-800 mt-auto",children:t?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-primary-500 to-primary-600 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-medium",children:r?.first_name?.[0]||r?.username?.[0]||"U"})}),e.jsxs("div",{className:"ml-3 flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-neutral-900 dark:text-white truncate",children:r?.first_name||r?.username||"User"}),e.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400 truncate",children:n?"Business Account":"Customer Account"})]})]}):e.jsx("div",{className:"text-center",children:e.jsx(T,{to:"/login",className:"block w-full px-4 py-2 text-sm font-medium text-white bg-gradient-to-r from-primary-600 to-primary-700 hover:from-primary-700 hover:to-primary-800 rounded-lg transition-all shadow-enterprise",onClick:s,children:"Sign In"})})})]})})})},Re=({variant:s="default",showTitle:i=!0,placeholder:t="Enter your email",buttonText:r="Subscribe",className:n=""})=>{const[p,u]=l.useState(""),[f,c]=l.useState(!1),[v,o]=l.useState("idle"),[a,g]=l.useState(""),j=async w=>{if(w.preventDefault(),!p.trim()){o("error"),g("Please enter a valid email address");return}c(!0);try{const d=await fetch("http://127.0.0.1:8000/api/email-subscription/subscribe/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:p.trim(),subscription_types:["newsletter","promotions","updates"]})}),x=await d.json();d.ok?(o("success"),g("Thank you! Please check your email to confirm your subscription."),u("")):(o("error"),g(x.email?.[0]||x.message||"Failed to subscribe. Please try again."))}catch{o("error"),g("Network error. Please try again.")}finally{c(!1)}},P=()=>{o("idle"),g("")},k=(()=>{switch(s){case"minimal":return{container:"space-y-2",form:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2",input:"flex-1 min-w-0 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 text-sm",button:"flex-shrink-0 px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 transition-colors text-sm font-medium text-center"};case"banner":return{container:"bg-primary-50 p-6 rounded-lg space-y-4",form:"flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-3",input:"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",button:"px-6 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors font-medium"};default:return{container:"space-y-3",form:"flex space-x-2",input:"flex-1 px-3 py-2 bg-secondary-800 text-white placeholder-secondary-400 border border-secondary-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 text-sm",button:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors text-sm font-medium"}}})();return e.jsxs("div",{className:`${k.container} ${n}`,children:[i&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ce,{className:"h-5 w-5 text-primary-500"}),e.jsx("h3",{className:`font-semibold ${s==="banner"?"text-lg":"text-sm"}`,children:"Stay Updated"})]}),s==="banner"&&e.jsx("p",{className:"text-gray-600",children:"Get the latest product updates, exclusive deals, and news from our marketplace."}),e.jsxs("form",{onSubmit:j,className:k.form,children:[e.jsx("input",{type:"email",placeholder:t,value:p,onChange:w=>{u(w.target.value),v!=="idle"&&P()},disabled:f,className:`${k.input} disabled:opacity-50`}),e.jsx("button",{type:"submit",disabled:f,className:`${k.button} disabled:opacity-50 disabled:cursor-not-allowed`,children:f?"Subscribing...":r})]}),v!=="idle"&&e.jsxs("div",{className:`flex items-center space-x-2 text-sm ${v==="success"?"text-green-600":"text-red-600"}`,children:[v==="success"?e.jsx(U,{className:"h-4 w-4 text-green-500"}):e.jsx(Vs,{className:"h-4 w-4 text-red-500"}),e.jsx("span",{children:a})]})]})},$t=()=>{const s=new Date().getFullYear();return e.jsxs("footer",{className:"bg-secondary-900 text-white w-full",children:[e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-primary-600 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-lg",children:"O"})}),e.jsx("span",{className:"text-xl font-bold",children:"OneSoko"})]}),e.jsx("p",{className:"text-secondary-300 text-sm leading-relaxed",children:"Your one-stop marketplace connecting customers with local businesses. Discover amazing products from verified shops across Kenya."}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"#",className:"text-secondary-400 hover:text-primary-400 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"})})}),e.jsx("a",{href:"#",className:"text-secondary-400 hover:text-primary-400 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z"})})}),e.jsx("a",{href:"#",className:"text-secondary-400 hover:text-primary-400 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12.017 0C5.396 0 .029 5.367.029 11.987c0 5.079 3.158 9.417 7.618 11.174-.105-.949-.199-2.403.041-3.439.219-.937 1.406-5.957 1.406-5.957s-.359-.72-.359-1.781c0-1.663.967-2.911 2.168-2.911 1.024 0 1.518.769 1.518 1.688 0 1.029-.653 2.567-.992 3.992-.285 1.193.6 2.165 1.775 2.165 2.128 0 3.768-2.245 3.768-5.487 0-2.861-2.063-4.869-5.008-4.869-3.41 0-5.409 2.562-5.409 5.199 0 1.033.394 2.143.889 2.741.099.12.112.225.085.345-.09.375-.293 1.199-.334 1.363-.053.225-.172.271-.402.165-1.495-.69-2.433-2.878-2.433-4.646 0-3.776 2.748-7.252 7.92-7.252 4.158 0 7.392 2.967 7.392 6.923 0 4.135-2.607 7.462-6.233 7.462-1.214 0-2.357-.629-2.75-1.378l-.748 2.853c-.271 1.043-1.002 2.35-1.492 3.146C9.57 23.812 10.763 24.009 12.017 24.009c6.624 0 11.99-5.367 11.99-11.988C24.007 5.367 18.641.001.012.001z"})})}),e.jsx("a",{href:"#",className:"text-secondary-400 hover:text-primary-400 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"})})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Quick Links"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:e.jsx(T,{to:"/",className:"text-secondary-300 hover:text-primary-400 transition-colors",children:"Home"})}),e.jsx("li",{children:e.jsx(T,{to:"/categories",className:"text-secondary-300 hover:text-primary-400 transition-colors",children:"Categories"})}),e.jsx("li",{children:e.jsx(T,{to:"/shops",className:"text-secondary-300 hover:text-primary-400 transition-colors",children:"Shops"})}),e.jsx("li",{children:e.jsx(T,{to:"/about",className:"text-secondary-300 hover:text-primary-400 transition-colors",children:"About Us"})}),e.jsx("li",{children:e.jsx(T,{to:"/contact",className:"text-secondary-300 hover:text-primary-400 transition-colors",children:"Contact"})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Customer Service"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:e.jsx(T,{to:"/help",className:"text-secondary-300 hover:text-primary-400 transition-colors",children:"Help Center"})}),e.jsx("li",{children:e.jsx(T,{to:"/returns",className:"text-secondary-300 hover:text-primary-400 transition-colors",children:"Returns & Refunds"})}),e.jsx("li",{children:e.jsx(T,{to:"/shipping",className:"text-secondary-300 hover:text-primary-400 transition-colors",children:"Shipping Info"})}),e.jsx("li",{children:e.jsx(T,{to:"/faq",className:"text-secondary-300 hover:text-primary-400 transition-colors",children:"FAQ"})}),e.jsx("li",{children:e.jsx(T,{to:"/track-order",className:"text-secondary-300 hover:text-primary-400 transition-colors",children:"Track Your Order"})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Contact Us"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(ne,{className:"h-5 w-5 text-primary-400 mt-0.5 flex-shrink-0"}),e.jsxs("span",{className:"text-secondary-300",children:["123 Business District",e.jsx("br",{}),"Nairobi, Kenya"]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(as,{className:"h-5 w-5 text-primary-400 flex-shrink-0"}),e.jsx("span",{className:"text-secondary-300",children:"+254 700 123 456"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ce,{className:"h-5 w-5 text-primary-400 flex-shrink-0"}),e.jsx("span",{className:"text-secondary-300",children:"support@onesoko.co.ke"})]})]}),e.jsx(Re,{variant:"minimal",showTitle:!0})]})]})}),e.jsx("div",{className:"border-t border-secondary-800",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0",children:[e.jsxs("div",{className:"text-sm text-secondary-300",children:["© ",s," OneSoko. All rights reserved."]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-secondary-300",children:[e.jsx(T,{to:"/privacy",className:"hover:text-primary-400 transition-colors",children:"Privacy Policy"}),e.jsx("span",{children:"•"}),e.jsx(T,{to:"/terms",className:"hover:text-primary-400 transition-colors",children:"Terms of Service"}),e.jsx("span",{children:"•"}),e.jsx(T,{to:"/cookies",className:"hover:text-primary-400 transition-colors",children:"Cookie Policy"})]}),e.jsxs("div",{className:"flex items-center space-x-1 text-sm text-secondary-300",children:[e.jsx("span",{children:"Made with"}),e.jsx(Z,{className:"h-4 w-4 text-red-400"}),e.jsx("span",{children:"in Kenya"})]})]})})})]})},Tt=()=>{const{items:s,isOpen:i,toggleCart:t,removeItem:r,updateQuantity:n,clearCart:p,getTotalItems:u,getTotalPrice:f}=$e(),c=a=>new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES",minimumFractionDigits:0}).format(a),v=a=>{let g=a.product.promotional_price?parseFloat(a.product.promotional_price):parseFloat(a.product.price);return a.variant?.price_adjustment&&(g+=parseFloat(a.variant.price_adjustment)),g},o=a=>v(a)*a.quantity;return i?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black/5 z-50",onClick:t}),e.jsx("div",{className:"fixed right-0 top-0 h-full w-full max-w-md bg-white shadow-xl z-50 transform transition-transform duration-300 ease-in-out",children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Shopping Cart (",u(),")"]}),e.jsx("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-600",children:e.jsx(ye,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:s.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[e.jsx(V,{className:"w-16 h-16 text-gray-300 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Your cart is empty"}),e.jsx("p",{className:"text-gray-500",children:"Add some products to get started!"})]}):e.jsx("div",{className:"space-y-4",children:s.map(a=>e.jsxs("div",{className:"flex items-start space-x-4 p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-lg overflow-hidden",children:a.product.image?e.jsx("img",{src:a.product.image,alt:a.product.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(V,{className:"w-8 h-8 text-gray-400"})})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 truncate",children:a.product.name}),a.variant&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[a.variant.name,": ",a.variant.value]}),e.jsxs("div",{className:"flex items-center mt-2 space-x-2",children:[a.product.promotional_price&&e.jsx("span",{className:"text-sm line-through text-gray-400",children:c(parseFloat(a.product.price))}),e.jsx("span",{className:"text-sm font-medium text-primary-600",children:c(v(a))}),a.product.discount&&parseFloat(a.product.discount)>0&&e.jsxs("span",{className:"text-xs bg-red-100 text-red-800 px-2 py-1 rounded",children:["-",a.product.discount,"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>n(a.id,a.quantity-1),className:"p-1 text-gray-400 hover:text-gray-600",disabled:a.quantity<=1,children:e.jsx(vs,{className:"w-4 h-4"})}),e.jsx("span",{className:"text-sm font-medium px-2 py-1 min-w-[2rem] text-center",children:a.quantity}),e.jsx("button",{onClick:()=>n(a.id,a.quantity+1),className:"p-1 text-gray-400 hover:text-gray-600",disabled:a.quantity>=a.product.quantity,children:e.jsx(ee,{className:"w-4 h-4"})})]}),e.jsx("button",{onClick:()=>r(a.id),className:"p-1 text-red-400 hover:text-red-600",children:e.jsx(Pe,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"mt-2 text-right",children:e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:c(o(a))})})]})]},a.id))})}),s.length>0&&e.jsxs("div",{className:"border-t p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-lg font-semibold",children:[e.jsx("span",{children:"Total:"}),e.jsx("span",{className:"text-primary-600",children:c(f())})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{className:"w-full btn-primary py-3 text-base font-semibold",children:"Proceed to Checkout"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(T,{to:"/cart",onClick:t,className:"flex-1 btn-secondary py-2 text-sm text-center flex items-center justify-center space-x-1",children:[e.jsx(Y,{className:"w-4 h-4"}),e.jsx("span",{children:"View Full Cart"})]}),e.jsx("button",{onClick:p,className:"flex-1 btn-outline py-2 text-sm border-red-300 text-red-600 hover:bg-red-50",children:"Clear Cart"})]})]})]})]})})]}):null},At=()=>{const[s,i]=l.useState(!1);l.useEffect(()=>{const r=()=>{window.pageYOffset>300?i(!0):i(!1)};return window.addEventListener("scroll",r),()=>window.removeEventListener("scroll",r)},[]);const t=()=>{window.scrollTo({top:0,behavior:"smooth"})};return e.jsx("button",{className:`fixed bottom-6 right-6 z-50 p-3 bg-primary-600 hover:bg-primary-700 text-white rounded-full shadow-elevated hover:shadow-2xl transition-all duration-300 ${s?"opacity-100 translate-y-0":"opacity-0 translate-y-16 pointer-events-none"}`,onClick:t,"aria-label":"Scroll to top",children:e.jsx(Qs,{className:"w-6 h-6"})})},Rt=[{type:"phone",label:"Call Us",value:"+254 700 123 456",icon:as,color:"bg-green-500 hover:bg-green-600"},{type:"email",label:"Email Us",value:"support@onesoko.com",icon:Ce,color:"bg-blue-500 hover:bg-blue-600"},{type:"chat",label:"Live Chat",value:"Start Chat",icon:ws,color:"bg-purple-500 hover:bg-purple-600"}],Et=()=>{const[s,i]=l.useState(!1),t=r=>{switch(r.type){case"phone":window.location.href=`tel:${r.value}`;break;case"email":window.location.href=`mailto:${r.value}`;break;case"chat":console.log("Opening chat...");break}i(!1)};return e.jsxs("div",{className:"fixed bottom-6 left-6 z-50 md:hidden",children:[e.jsx("div",{className:`mb-4 space-y-2 transition-all duration-300 ${s?"opacity-100 translate-y-0":"opacity-0 translate-y-4 pointer-events-none"}`,children:Rt.map(r=>e.jsxs("button",{onClick:()=>t(r),className:`flex items-center space-x-2 px-4 py-2 ${r.color} text-white rounded-full shadow-elevated text-sm font-medium whitespace-nowrap animate-slide-up`,children:[e.jsx(r.icon,{className:"w-4 h-4"}),e.jsx("span",{children:r.label})]},r.type))}),e.jsx("button",{onClick:()=>i(!s),className:`w-12 h-12 bg-primary-600 hover:bg-primary-700 text-white rounded-full shadow-elevated hover:shadow-2xl transition-all duration-300 flex items-center justify-center ${s?"rotate-45":"rotate-0"}`,children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})})]})},Lt=Ws.createContext(null),It=({children:s})=>{const[i,t]=l.useState([]),r=p=>{const u=Math.random().toString(36).substr(2,9),f={...p,id:u};t(c=>[...c,f]),setTimeout(()=>{n(u)},p.duration||5e3)},n=p=>{t(u=>u.filter(f=>f.id!==p))};return e.jsxs(Lt.Provider,{value:{addToast:r,removeToast:n},children:[s,e.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2 max-w-sm",children:i.map(p=>e.jsx(Ot,{toast:p,onRemove:n},p.id))})]})},Ot=({toast:s,onRemove:i})=>{const t=()=>{switch(s.type){case"success":return"bg-success-500 border-success-600";case"error":return"bg-error-500 border-error-600";case"warning":return"bg-warning-500 border-warning-600";default:return"bg-primary-500 border-primary-600"}},r=()=>{switch(s.type){case"success":return"✓";case"error":return"✕";case"warning":return"⚠";default:return"ℹ"}};return e.jsx("div",{className:`${t()} text-white p-4 rounded-lg shadow-elevated animate-slide-down border-l-4`,children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("span",{className:"text-lg font-bold",children:r()})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-sm",children:s.title}),s.message&&e.jsx("p",{className:"text-xs text-white/90 mt-1",children:s.message})]}),e.jsx("button",{onClick:()=>i(s.id),className:"flex-shrink-0 text-white/80 hover:text-white",children:e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})})},Dt=()=>e.jsxs("div",{className:"max-w-4xl mx-auto p-6 space-y-8",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(he,{className:"h-8 w-8 text-primary-600"}),e.jsx("h1",{className:"text-3xl font-bold text-neutral-900 dark:text-white",children:"Enhanced Side-by-Side Navigation"})]}),e.jsx("p",{className:"text-lg text-neutral-600 dark:text-neutral-400",children:"Your main menu components now appear concurrently side by side for a better user experience!"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-neutral-800 rounded-xl shadow-card border border-neutral-200 dark:border-neutral-700 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx(Ks,{className:"h-6 w-6 text-primary-600"}),e.jsx("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:"Desktop Experience"})]}),e.jsxs("ul",{className:"space-y-3 text-sm text-neutral-600 dark:text-neutral-400",children:[e.jsxs("li",{className:"flex items-center space-x-2",children:[e.jsx(U,{className:"h-4 w-4 text-success-600 flex-shrink-0"}),e.jsx("span",{children:"Sidebar always visible alongside content"})]}),e.jsxs("li",{className:"flex items-center space-x-2",children:[e.jsx(U,{className:"h-4 w-4 text-success-600 flex-shrink-0"}),e.jsx("span",{children:"True side-by-side layout with flex containers"})]}),e.jsxs("li",{className:"flex items-center space-x-2",children:[e.jsx(U,{className:"h-4 w-4 text-success-600 flex-shrink-0"}),e.jsx("span",{children:"Smooth transitions and hover animations"})]}),e.jsxs("li",{className:"flex items-center space-x-2",children:[e.jsx(U,{className:"h-4 w-4 text-success-600 flex-shrink-0"}),e.jsx("span",{children:"Custom scrollbar styling for better aesthetics"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-neutral-800 rounded-xl shadow-card border border-neutral-200 dark:border-neutral-700 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx(Ys,{className:"h-6 w-6 text-primary-600"}),e.jsx("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:"Mobile Experience"})]}),e.jsxs("ul",{className:"space-y-3 text-sm text-neutral-600 dark:text-neutral-400",children:[e.jsxs("li",{className:"flex items-center space-x-2",children:[e.jsx(U,{className:"h-4 w-4 text-success-600 flex-shrink-0"}),e.jsx("span",{children:"Overlay navigation with smooth slide animations"})]}),e.jsxs("li",{className:"flex items-center space-x-2",children:[e.jsx(U,{className:"h-4 w-4 text-success-600 flex-shrink-0"}),e.jsx("span",{children:"Enhanced touch targets and gestures"})]}),e.jsxs("li",{className:"flex items-center space-x-2",children:[e.jsx(U,{className:"h-4 w-4 text-success-600 flex-shrink-0"}),e.jsx("span",{children:"Improved overlay with backdrop blur"})]}),e.jsxs("li",{className:"flex items-center space-x-2",children:[e.jsx(U,{className:"h-4 w-4 text-success-600 flex-shrink-0"}),e.jsx("span",{children:"Better close button positioning"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-neutral-800 rounded-xl shadow-card border border-neutral-200 dark:border-neutral-700 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx(Js,{className:"h-6 w-6 text-primary-600"}),e.jsx("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:"Layout Architecture"})]}),e.jsxs("ul",{className:"space-y-3 text-sm text-neutral-600 dark:text-neutral-400",children:[e.jsxs("li",{className:"flex items-center space-x-2",children:[e.jsx(U,{className:"h-4 w-4 text-success-600 flex-shrink-0"}),e.jsx("span",{children:"Flexbox-based responsive layout system"})]}),e.jsxs("li",{className:"flex items-center space-x-2",children:[e.jsx(U,{className:"h-4 w-4 text-success-600 flex-shrink-0"}),e.jsx("span",{children:"CSS Grid integration for complex layouts"})]}),e.jsxs("li",{className:"flex items-center space-x-2",children:[e.jsx(U,{className:"h-4 w-4 text-success-600 flex-shrink-0"}),e.jsx("span",{children:"Optimized z-index management"})]}),e.jsxs("li",{className:"flex items-center space-x-2",children:[e.jsx(U,{className:"h-4 w-4 text-success-600 flex-shrink-0"}),e.jsx("span",{children:"Accessibility-focused design patterns"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-neutral-800 rounded-xl shadow-card border border-neutral-200 dark:border-neutral-700 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx(he,{className:"h-6 w-6 text-primary-600"}),e.jsx("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:"Enhanced UX"})]}),e.jsxs("ul",{className:"space-y-3 text-sm text-neutral-600 dark:text-neutral-400",children:[e.jsxs("li",{className:"flex items-center space-x-2",children:[e.jsx(U,{className:"h-4 w-4 text-success-600 flex-shrink-0"}),e.jsx("span",{children:"Concurrent component visibility"})]}),e.jsxs("li",{className:"flex items-center space-x-2",children:[e.jsx(U,{className:"h-4 w-4 text-success-600 flex-shrink-0"}),e.jsx("span",{children:"Reduced cognitive load with persistent navigation"})]}),e.jsxs("li",{className:"flex items-center space-x-2",children:[e.jsx(U,{className:"h-4 w-4 text-success-600 flex-shrink-0"}),e.jsx("span",{children:"Smooth micro-interactions and animations"})]}),e.jsxs("li",{className:"flex items-center space-x-2",children:[e.jsx(U,{className:"h-4 w-4 text-success-600 flex-shrink-0"}),e.jsx("span",{children:"Improved visual hierarchy and spacing"})]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-primary-50 to-secondary-50 dark:from-primary-900/20 dark:to-secondary-900/20 rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-white mb-4 text-center",children:"Layout Comparison"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-neutral-700 dark:text-neutral-300",children:"❌ Before (Stacked)"}),e.jsx("div",{className:"bg-white dark:bg-neutral-800 rounded-lg p-4 border border-neutral-200 dark:border-neutral-700",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-8 bg-neutral-200 dark:bg-neutral-600 rounded"}),e.jsx("div",{className:"h-20 bg-neutral-100 dark:bg-neutral-700 rounded"}),e.jsx("div",{className:"text-xs text-neutral-500",children:"Menu appears at bottom"})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-neutral-700 dark:text-neutral-300",children:"✅ After (Side-by-Side)"}),e.jsxs("div",{className:"bg-white dark:bg-neutral-800 rounded-lg p-4 border border-neutral-200 dark:border-neutral-700",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("div",{className:"w-1/3 h-20 bg-primary-100 dark:bg-primary-900/30 rounded"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-8 bg-neutral-200 dark:bg-neutral-600 rounded"}),e.jsx("div",{className:"h-10 bg-neutral-100 dark:bg-neutral-700 rounded"})]})]}),e.jsx("div",{className:"text-xs text-neutral-500 mt-2",children:"Components appear side by side"})]})]})]})]}),e.jsxs("div",{className:"bg-success-50 dark:bg-success-900/20 border border-success-200 dark:border-success-700 rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-success-900 dark:text-success-100 mb-3",children:"🎉 How to Experience the Improvements"}),e.jsxs("div",{className:"space-y-2 text-success-800 dark:text-success-200",children:[e.jsxs("p",{children:["1. ",e.jsx("strong",{children:"Desktop:"})," Navigate using the sidebar - notice how it stays visible alongside the content"]}),e.jsxs("p",{children:["2. ",e.jsx("strong",{children:"Mobile:"})," Tap the menu button (☰) in the header to see the smooth slide-in navigation"]}),e.jsxs("p",{children:["3. ",e.jsx("strong",{children:"Transitions:"})," Watch for the enhanced animations when switching between pages"]}),e.jsxs("p",{children:["4. ",e.jsx("strong",{children:"Accessibility:"})," Try keyboard navigation (Tab/Enter) for improved focus management"]})]})]})]}),oe=({product:s,variant:i,quantity:t=1,size:r="md",className:n="",showQuantitySelector:p=!1})=>{const[u,f]=l.useState(t),[c,v]=l.useState(!1),{addItem:o,toggleCart:a}=$e(),g=()=>{if(!s.is_active){R.error("This product is currently unavailable");return}if(u>s.quantity){R.error(`Only ${s.quantity} items available in stock`);return}o(s,i,u),v(!0),R.success(`${s.name} added to cart!`,{icon:"🛒"}),setTimeout(()=>v(!1),2e3)},j=()=>{g(),setTimeout(()=>{a()},500)},P=()=>{switch(r){case"sm":return"px-2 py-1.5 text-xs min-h-[32px]";case"lg":return"px-5 py-3 text-base min-h-[48px]";default:return"px-3 py-2 text-sm min-h-[40px]"}},m=s.quantity===0,k=s.quantity>0&&s.quantity<=5;return m?e.jsx("div",{className:"w-full",children:e.jsx("button",{disabled:!0,className:`
            w-full ${P()} 
            bg-gray-200 text-gray-500 rounded-md cursor-not-allowed font-medium 
            border border-gray-300 
            flex items-center justify-center
            ${n}
          `,children:"Out of Stock"})}):e.jsxs("div",{className:"w-full space-y-2",children:[k&&e.jsxs("p",{className:"text-xs text-orange-600 dark:text-orange-400 font-medium",children:["Only ",s.quantity," left in stock!"]}),p&&e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("label",{className:"text-xs font-medium text-gray-700 dark:text-gray-300 whitespace-nowrap",children:"Qty:"}),e.jsx("select",{value:u,onChange:w=>f(parseInt(w.target.value)),className:"border border-gray-300 dark:border-gray-600 rounded-md px-2 py-1 text-xs focus:outline-none focus:ring-1 focus:ring-primary-500 focus:border-transparent flex-1 min-w-[50px] bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",children:Array.from({length:Math.min(s.quantity,10)},(w,d)=>d+1).map(w=>e.jsx("option",{value:w,children:w},w))})]}),e.jsxs("div",{className:"w-full space-y-1",children:[e.jsx("button",{onClick:g,disabled:c,className:`
            w-full ${P()} 
            ${c?"bg-green-600 text-white border-green-600":"btn-primary hover:bg-primary-700 active:bg-primary-800"} 
            rounded-md font-medium transition-all duration-200 
            flex items-center justify-center space-x-1.5
            disabled:cursor-not-allowed
            border
            focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-1
            ${n}
          `,children:c?e.jsxs(e.Fragment,{children:[e.jsx(We,{className:"w-3.5 h-3.5 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Added!"})]}):e.jsxs(e.Fragment,{children:[e.jsx(ge,{className:"w-3.5 h-3.5 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Add to Cart"})]})}),r!=="sm"&&e.jsxs("button",{onClick:j,className:`
              w-full ${P()} 
              btn-secondary hover:bg-secondary-600
              rounded-md font-medium transition-all duration-200 
              flex items-center justify-center space-x-1.5
              border border-secondary-300
              focus:outline-none focus:ring-2 focus:ring-secondary-500 focus:ring-offset-1
            `,children:[e.jsx(ee,{className:"w-3.5 h-3.5 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Buy Now"})]})]})]})},$s=({variant:s="horizontal",showTitle:i=!0,maxItems:t=8,className:r=""})=>{const{isAuthenticated:n,user:p}=z(),{getTotalItems:u}=$e(),f=[{id:"cart",title:"Shopping Cart",icon:ge,href:"/cart",badge:u(),color:"text-primary-600 bg-primary-100 dark:bg-primary-900/20 dark:text-primary-400",show:!0,category:"shopping"},{id:"wishlist",title:"Wishlist",icon:Z,href:"/wishlist",color:"text-error-600 bg-error-100 dark:bg-error-900/20 dark:text-error-400",show:n,category:"shopping"},{id:"orders",title:"My Orders",icon:le,href:"/orders",color:"text-success-600 bg-success-100 dark:bg-success-900/20 dark:text-success-400",show:n,category:"account"},{id:"profile",title:"Profile",icon:W,href:"/profile",color:"text-neutral-600 bg-neutral-100 dark:bg-neutral-800 dark:text-neutral-400",show:n,category:"account"}],c=[{id:"dashboard",title:"Dashboard",icon:re,href:"/shop/dashboard",color:"text-primary-600 bg-primary-100 dark:bg-primary-900/20 dark:text-primary-400",show:!0,category:"business"},{id:"add-product",title:"Add Product",icon:ee,href:"/shop/products/add",color:"text-success-600 bg-success-100 dark:bg-success-900/20 dark:text-success-400",show:!0,category:"business"},{id:"products",title:"Products",icon:bs,href:"/shop/products",color:"text-warning-600 bg-warning-100 dark:bg-warning-900/20 dark:text-warning-400",show:!0,category:"business"},{id:"shop-orders",title:"Orders",icon:Zs,href:"/shop/orders",color:"text-neutral-600 bg-neutral-100 dark:bg-neutral-800 dark:text-neutral-400",show:!0,category:"business"}],v=[{id:"notifications",title:"Notifications",icon:Se,href:"/notifications",badge:3,color:"text-warning-600 bg-warning-100 dark:bg-warning-900/20 dark:text-warning-400",show:n,category:"general"},{id:"settings",title:"Settings",icon:Qe,href:"/settings",color:"text-neutral-600 bg-neutral-100 dark:bg-neutral-800 dark:text-neutral-400",show:n,category:"general"},{id:"help",title:"Help Center",icon:Ns,href:"/help",color:"text-primary-600 bg-primary-100 dark:bg-primary-900/20 dark:text-primary-400",show:!0,category:"general"}],o=p?.profile?.is_shopowner;let a=[...f,...v];n&&o&&(a=[...c,...f,...v]);const g=a.filter(m=>m.show).slice(0,t),j=()=>{switch(s){case"vertical":return"flex flex-col space-y-3";case"grid":return"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4";default:return"flex space-x-4 overflow-x-auto pb-2"}},P=()=>{switch(s){case"vertical":return"flex items-center p-4 rounded-xl border border-neutral-200 dark:border-neutral-700 hover:border-primary-300 dark:hover:border-primary-600 hover:shadow-card transition-all duration-200 group";case"grid":return"flex flex-col items-center p-4 rounded-xl border border-neutral-200 dark:border-neutral-700 hover:border-primary-300 dark:hover:border-primary-600 hover:shadow-card transition-all duration-200 group";default:return"flex flex-col items-center p-4 rounded-xl border border-neutral-200 dark:border-neutral-700 hover:border-primary-300 dark:hover:border-primary-600 hover:shadow-card transition-all duration-200 min-w-0 flex-shrink-0 group"}};return e.jsxs("div",{className:`bg-white dark:bg-neutral-900 rounded-xl shadow-card border border-neutral-200 dark:border-neutral-800 p-6 ${r}`,children:[i&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:"Quick Access"}),e.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400 mt-1",children:n&&o?"Business tools and customer features at your fingertips":"Access your favorite features quickly"})]}),e.jsx("div",{className:j(),children:g.map(m=>{const k=m.icon;return e.jsxs(T,{to:m.href,className:P(),children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:`flex items-center justify-center w-12 h-12 rounded-xl ${m.color} group-hover:scale-105 transition-transform duration-200`,children:e.jsx(k,{className:"h-6 w-6"})}),m.badge!==void 0&&m.badge>0&&e.jsx("span",{className:"absolute -top-2 -right-2 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white bg-error-500 rounded-full shadow-enterprise",children:m.badge>99?"99+":m.badge})]}),e.jsx("span",{className:`text-sm font-medium text-neutral-700 dark:text-neutral-300 group-hover:text-primary-600 dark:group-hover:text-primary-400 transition-colors ${s==="horizontal"?"mt-3 text-center max-w-20":s==="grid"?"mt-3 text-center":"ml-4 flex-1"}`,children:m.title})]},m.id)})}),a.filter(m=>m.show).length>t&&e.jsx("div",{className:"mt-6 pt-4 border-t border-neutral-200 dark:border-neutral-700",children:e.jsxs(T,{to:"/quick-links",className:"inline-flex items-center text-sm text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 font-medium transition-colors",children:["View all quick links",e.jsx("svg",{className:"ml-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})]})},qt=[{id:1,name:"Electronics",image:"https://images.unsplash.com/photo-1498049794561-7780e7231661?w=400&h=300&fit=crop",productCount:1250,color:"bg-blue-500"},{id:2,name:"Fashion",image:"https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=400&h=300&fit=crop",productCount:890,color:"bg-pink-500"},{id:3,name:"Home & Garden",image:"https://images.unsplash.com/photo-1586023492125-27b2c045efd7?w=400&h=300&fit=crop",productCount:670,color:"bg-green-500"},{id:4,name:"Sports",image:"https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=400&h=300&fit=crop",productCount:540,color:"bg-orange-500"},{id:5,name:"Books",image:"https://images.unsplash.com/photo-1481627834876-b7833e8f5570?w=400&h=300&fit=crop",productCount:320,color:"bg-purple-500"},{id:6,name:"Beauty",image:"https://images.unsplash.com/photo-1596462502278-27bfdc403348?w=400&h=300&fit=crop",productCount:450,color:"bg-red-500"}],Bt=[{productId:"demo-1",name:"Wireless Bluetooth Headphones",price:"89.99",promotional_price:"89.99",image:"https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=400&h=400&fit=crop",description:"High-quality wireless headphones with noise cancellation",quantity:25,is_active:!0,category:void 0,tags:[],variants:[],reviews:[],discount:"30.00",deleted_at:void 0,originalPrice:129.99,rating:4.5,badge:"Best Seller",shop:"TechWorld Store"},{productId:"demo-2",name:"Smart Fitness Watch",price:"199.99",promotional_price:"199.99",image:"https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=400&h=400&fit=crop",description:"Advanced fitness tracker with heart rate monitoring",quantity:15,is_active:!0,category:void 0,tags:[],variants:[],reviews:[],discount:"33.00",deleted_at:void 0,originalPrice:299.99,rating:4.8,badge:"Limited Offer",shop:"HealthTech Hub"},{productId:"demo-3",name:"Organic Cotton T-Shirt",price:"24.99",promotional_price:"24.99",image:"https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?w=400&h=400&fit=crop",description:"Comfortable organic cotton t-shirt, eco-friendly",quantity:50,is_active:!0,category:void 0,tags:[],variants:[],reviews:[],discount:"37.00",deleted_at:void 0,originalPrice:39.99,rating:4.3,badge:"Eco-Friendly",shop:"Green Fashion Co"},{productId:"demo-4",name:"Professional Camera Lens",price:"449.99",promotional_price:"449.99",image:"https://images.unsplash.com/photo-1606983340126-99ab4feaa64a?w=400&h=400&fit=crop",description:"Professional 50mm lens for DSLR cameras",quantity:8,is_active:!0,category:void 0,tags:[],variants:[],reviews:[],discount:"25.00",deleted_at:void 0,originalPrice:599.99,rating:4.9,badge:"Professional",shop:"PhotoPro Gear"},{productId:"demo-5",name:"Minimalist Desk Lamp",price:"79.99",promotional_price:"79.99",image:"https://images.unsplash.com/photo-1507473885765-e6ed057f782c?w=400&h=400&fit=crop",description:"Modern minimalist desk lamp with adjustable brightness",quantity:30,is_active:!0,category:void 0,tags:[],variants:[],reviews:[],discount:"33.00",deleted_at:void 0,originalPrice:119.99,rating:4.6,badge:"Design Award",shop:"Modern Living"},{productId:"demo-6",name:"Yoga Mat Premium",price:"34.99",promotional_price:"34.99",image:"https://images.unsplash.com/photo-1544367567-0f2fcb009e0b?w=400&h=400&fit=crop",description:"Premium yoga mat with excellent grip and comfort",quantity:40,is_active:!0,category:void 0,tags:[],variants:[],reviews:[],discount:"36.00",deleted_at:void 0,originalPrice:54.99,rating:4.4,badge:"Popular",shop:"Wellness Store"}],Mt=[{icon:le,title:"Free Shipping",description:"Free delivery on orders over $50"},{icon:Xs,title:"Secure Payment",description:"100% secure and encrypted payments"},{icon:Z,title:"Quality Products",description:"Handpicked products from trusted sellers"},{icon:he,title:"Best Prices",description:"Competitive prices and amazing deals"}],zt=({product:s})=>{const i=s.originalPrice||parseFloat(s.price),t=parseFloat(s.promotional_price||s.price),r=Math.round((i-t)/i*100);return e.jsxs("div",{className:"card group cursor-pointer shadow-hover overflow-hidden",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:s.image,alt:s.name,className:"w-full h-48 object-cover group-hover:scale-105 transition-transform duration-300"}),e.jsx("div",{className:"absolute top-2 left-2",children:e.jsx("span",{className:`badge px-2 py-1 text-xs font-semibold rounded-full ${s.badge==="Best Seller"?"bg-orange-100 text-orange-800":s.badge==="Limited Offer"?"bg-red-100 text-red-800":s.badge==="Eco-Friendly"?"bg-green-100 text-green-800":s.badge==="Professional"?"bg-blue-100 text-blue-800":s.badge==="Design Award"?"bg-purple-100 text-purple-800":"bg-primary-100 text-primary-800"}`,children:s.badge})}),e.jsx("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx("button",{className:"p-2 bg-white rounded-full shadow-md hover:bg-gray-50 transition-colors",children:e.jsx(Z,{className:"w-4 h-4 text-gray-600"})}),e.jsx("button",{className:"p-2 bg-white rounded-full shadow-md hover:bg-gray-50 transition-colors",children:e.jsx(Y,{className:"w-4 h-4 text-gray-600"})})]})}),r>0&&e.jsx("div",{className:"absolute bottom-2 left-2",children:e.jsxs("span",{className:"bg-danger-500 text-white px-2 py-1 rounded-full text-xs font-bold",children:["-",r,"%"]})})]}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("p",{className:"text-xs text-secondary-600 mb-1",children:s.shop}),e.jsx("h3",{className:"font-semibold text-secondary-900 group-hover:text-primary-600 transition-colors line-clamp-2",children:s.name})]}),e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:"flex items-center",children:[...Array(5)].map((n,p)=>e.jsx(ae,{className:`w-4 h-4 ${p<Math.floor(s.rating||0)?"text-yellow-400":"text-gray-200"}`},p))}),e.jsxs("span",{className:"text-sm text-secondary-600 ml-2",children:["(",s.reviews?.length||0,")"]})]}),e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-lg font-bold text-secondary-900",children:["$",t]}),i>t&&e.jsxs("span",{className:"text-sm text-secondary-500 line-through",children:["$",i]})]})}),e.jsx("div",{className:"mt-2",children:e.jsx(oe,{product:s,size:"sm",showQuantitySelector:!1})})]})]})},Ut=({category:s})=>e.jsx(T,{to:`/categories/${s.id}`,className:"group",children:e.jsx("div",{className:"card overflow-hidden shadow-hover",children:e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:s.image,alt:s.name,className:"w-full h-32 object-cover group-hover:scale-105 transition-transform duration-300"}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-40 group-hover:bg-opacity-30 transition-all duration-300",children:e.jsxs("div",{className:"absolute bottom-4 left-4 right-4 text-white",children:[e.jsx("h3",{className:"font-semibold text-lg mb-1",children:s.name}),e.jsxs("p",{className:"text-sm opacity-90",children:[s.productCount," products"]})]})})]})})}),ms=()=>{const s=X(),i=()=>{s("/cart")};return e.jsxs("div",{className:"bg-neutral-50 dark:bg-neutral-900",children:[e.jsxs("section",{className:"relative bg-gradient-to-br from-primary-600 via-primary-700 to-primary-800 text-white overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-black/20"}),e.jsxs("div",{className:"absolute inset-0 opacity-10",children:[e.jsx("div",{className:"absolute top-0 left-0 w-96 h-96 bg-white rounded-full -translate-x-1/2 -translate-y-1/2 animate-pulse"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-96 h-96 bg-white rounded-full translate-x-1/2 translate-y-1/2 animate-pulse delay-1000"})]}),e.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20 lg:py-28",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"inline-flex items-center px-4 py-2 bg-white/10 backdrop-blur-sm rounded-full text-white/90 text-sm font-medium mb-6",children:[e.jsx(he,{className:"w-4 h-4 mr-2"}),"Enterprise E-commerce Platform"]}),e.jsxs("h1",{className:"text-4xl md:text-6xl lg:text-7xl font-bold mb-6 tracking-tight",children:[e.jsx("span",{className:"block",children:"Scale Your Business"}),e.jsx("span",{className:"block bg-gradient-to-r from-white to-blue-100 bg-clip-text text-transparent",children:"With OneSoko"})]}),e.jsx("p",{className:"text-xl md:text-2xl mb-10 max-w-4xl mx-auto text-white/90 leading-relaxed",children:"Connect with thousands of businesses and customers. Powerful tools for growth, analytics for insights, and enterprise-grade security for peace of mind."}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-4 mb-12",children:[e.jsxs("button",{onClick:i,className:"inline-flex items-center px-8 py-4 text-lg font-semibold text-primary-700 bg-white hover:bg-neutral-50 rounded-xl transition-all shadow-elevated hover:shadow-xl",children:["Start Exploring",e.jsx(fe,{className:"w-5 h-5 ml-2"})]}),e.jsx(T,{to:"/register/shop-owner",className:"inline-flex items-center px-8 py-4 text-lg font-semibold text-white border-2 border-white/30 hover:border-white/50 hover:bg-white/10 rounded-xl transition-all backdrop-blur-sm",children:"Become a Partner"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8 pt-8 border-t border-white/20",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:"10k+"}),e.jsx("div",{className:"text-sm text-white/70",children:"Active Businesses"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:"50k+"}),e.jsx("div",{className:"text-sm text-white/70",children:"Products Listed"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:"99.9%"}),e.jsx("div",{className:"text-sm text-white/70",children:"Uptime"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:"24/7"}),e.jsx("div",{className:"text-sm text-white/70",children:"Support"})]})]})]})})]}),e.jsx("section",{className:"py-12 bg-white dark:bg-neutral-900 border-b border-neutral-200 dark:border-neutral-800",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-neutral-900 dark:text-white mb-3",children:"Quick Access Dashboard"}),e.jsx("p",{className:"text-neutral-600 dark:text-neutral-400 max-w-2xl mx-auto",children:"Access your most important tools and features instantly. Designed for efficiency and productivity."})]}),e.jsx($s,{variant:"grid",showTitle:!1,maxItems:8,className:"max-w-5xl mx-auto"})]})}),e.jsx("section",{className:"py-20 bg-neutral-50 dark:bg-neutral-900",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h2",{className:"text-3xl font-bold text-neutral-900 dark:text-white mb-4",children:"Enterprise-Grade Features"}),e.jsx("p",{className:"text-lg text-neutral-600 dark:text-neutral-400 max-w-3xl mx-auto",children:"Built for scale, designed for efficiency. Our platform provides everything you need to grow your business and serve your customers better."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:Mt.map((t,r)=>e.jsxs("div",{className:"text-center group",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-primary-500 to-primary-600 rounded-xl mb-6 shadow-enterprise group-hover:shadow-elevated transition-all duration-200",children:e.jsx(t.icon,{className:"w-8 h-8 text-white"})}),e.jsx("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-white mb-3",children:t.title}),e.jsx("p",{className:"text-neutral-600 dark:text-neutral-400 leading-relaxed",children:t.description})]},r))})]})}),e.jsx("section",{className:"py-20 bg-white dark:bg-neutral-900 border-t border-neutral-200 dark:border-neutral-800",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h2",{className:"text-3xl font-bold text-neutral-900 dark:text-white mb-4",children:"Business Categories"}),e.jsx("p",{className:"text-lg text-neutral-600 dark:text-neutral-400 max-w-2xl mx-auto",children:"Connect with businesses across diverse industries and find the products and services you need"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:qt.map(t=>e.jsx(Ut,{category:t},t.id))}),e.jsx("div",{className:"text-center",children:e.jsxs(T,{to:"/categories",className:"btn-outline-primary",children:["View All Categories",e.jsx(fe,{className:"w-4 h-4 ml-2"})]})})]})}),e.jsx("section",{className:"py-16 bg-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-12",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-secondary-900 mb-4",children:"Featured Products"}),e.jsx("p",{className:"text-lg text-secondary-600",children:"Handpicked products just for you"})]}),e.jsxs(T,{to:"/products",className:"btn-outline-primary hidden md:flex",children:["View All Products",e.jsx(fe,{className:"w-4 h-4 ml-2"})]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:Bt.map(t=>e.jsx(zt,{product:t},t.productId))}),e.jsx("div",{className:"text-center mt-8 md:hidden",children:e.jsxs(T,{to:"/products",className:"btn-outline-primary",children:["View All Products",e.jsx(fe,{className:"w-4 h-4 ml-2"})]})})]})}),e.jsx("section",{className:"py-16 bg-secondary-900 text-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[e.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Ready to Start Your Business?"}),e.jsx("p",{className:"text-xl mb-8 max-w-2xl mx-auto opacity-90",children:"Join thousands of successful sellers on OneSoko and grow your business today"}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-center space-y-4 sm:space-y-0 sm:space-x-4",children:[e.jsx(T,{to:"/register/shop-owner",className:"btn-primary btn-lg",children:"Become a Seller"}),e.jsx(T,{to:"/shops",className:"btn-outline-secondary btn-lg border-white text-white hover:bg-white hover:text-secondary-900",children:"Browse Shops"})]})]})})]})},Ht=({product:s,variant:i="feed",showShopInfo:t=!0})=>{const[r,n]=l.useState(s.isLiked||!1),[p,u]=l.useState(s.isBookmarked||!1),f=j=>{j.preventDefault(),j.stopPropagation(),n(!r)},c=j=>{j.preventDefault(),j.stopPropagation(),u(!p)},v=j=>{j.preventDefault(),j.stopPropagation(),navigator.share&&navigator.share({title:s.name,text:`Check out this ${s.name} on OneSoko`,url:window.location.href})},o=j=>{j.preventDefault(),j.stopPropagation(),console.log("Added to cart:",s.name)},a=j=>new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES"}).format(j),g=j=>[...Array(5)].map((P,m)=>e.jsx(ae,{className:`w-4 h-4 ${m<Math.floor(j)?"text-yellow-400":"text-gray-600"}`},m));return i==="feed"?e.jsxs("div",{className:"border-b border-gray-800 p-4 hover:bg-gray-900/50 transition-colors",children:[t&&e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx("img",{src:"/api/placeholder/24/24",alt:s.shop.name,className:"w-6 h-6 rounded-full"}),e.jsx("span",{className:"font-medium text-white text-sm",children:s.shop.name}),s.shop.verified&&e.jsx("svg",{className:"w-4 h-4 text-blue-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsxs("span",{className:"text-gray-500 text-sm",children:["@",s.shop.username]}),e.jsx("span",{className:"text-gray-500 text-sm",children:"·"}),e.jsx("span",{className:"text-gray-500 text-sm",children:"2h"})]}),e.jsx(T,{to:`/products/${s.id}`,className:"block",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-medium text-lg mb-1",children:s.name}),s.description&&e.jsx("p",{className:"text-gray-400 text-sm",children:s.description}),e.jsxs("span",{className:"inline-block bg-gray-800 text-gray-300 text-xs px-2 py-1 rounded mt-2",children:["#",s.category]})]}),e.jsxs("div",{className:"relative rounded-lg overflow-hidden",children:[e.jsx("img",{src:s.image,alt:s.name,className:"w-full h-64 object-cover"}),s.discount&&e.jsx("div",{className:"absolute top-3 left-3",children:e.jsxs("span",{className:"bg-red-500 text-white text-xs font-bold px-2 py-1 rounded",children:["-",s.discount,"%"]})})]}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-xl font-bold text-white",children:a(s.price)}),s.originalPrice&&e.jsx("span",{className:"text-sm text-gray-500 line-through",children:a(s.originalPrice)})]}),e.jsxs("div",{className:"flex items-center space-x-1 mt-1",children:[e.jsx("div",{className:"flex",children:g(s.rating)}),e.jsxs("span",{className:"text-gray-400 text-sm",children:["(",s.reviewCount,")"]})]})]})})]})}),e.jsxs("div",{className:"flex items-center justify-between mt-4 max-w-md",children:[e.jsxs("button",{onClick:f,className:"flex items-center space-x-2 text-gray-500 hover:text-red-500 transition-colors",children:[r?e.jsx(Ee,{className:"w-5 h-5 text-red-500"}):e.jsx(Z,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm",children:"Like"})]}),e.jsxs("button",{onClick:o,className:"flex items-center space-x-2 text-gray-500 hover:text-blue-500 transition-colors",children:[e.jsx(ge,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm",children:"Add to Cart"})]}),e.jsxs("button",{onClick:c,className:"flex items-center space-x-2 text-gray-500 hover:text-green-500 transition-colors",children:[p?e.jsx(Ke,{className:"w-5 h-5 text-green-500"}):e.jsx(Ye,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm",children:"Save"})]}),e.jsxs("button",{onClick:v,className:"flex items-center space-x-2 text-gray-500 hover:text-blue-500 transition-colors",children:[e.jsx(De,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm",children:"Share"})]})]})]}):i==="grid"?e.jsxs(T,{to:`/products/${s.id}`,className:"block bg-gray-900 rounded-lg overflow-hidden hover:bg-gray-800 transition-colors border border-gray-800 hover:border-gray-700",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:s.image,alt:s.name,className:"w-full h-48 object-cover"}),s.discount&&e.jsx("div",{className:"absolute top-2 left-2",children:e.jsxs("span",{className:"bg-red-500 text-white text-xs font-bold px-2 py-1 rounded",children:["-",s.discount,"%"]})}),e.jsxs("div",{className:"absolute top-2 right-2 flex space-x-1",children:[e.jsx("button",{onClick:f,className:"p-1.5 bg-black bg-opacity-50 rounded-full hover:bg-opacity-70 transition-colors",children:r?e.jsx(Ee,{className:"w-4 h-4 text-red-500"}):e.jsx(Z,{className:"w-4 h-4 text-white"})}),e.jsx("button",{onClick:c,className:"p-1.5 bg-black bg-opacity-50 rounded-full hover:bg-opacity-70 transition-colors",children:p?e.jsx(Ke,{className:"w-4 h-4 text-green-500"}):e.jsx(Ye,{className:"w-4 h-4 text-white"})})]})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center space-x-1 mb-2",children:[e.jsx("div",{className:"flex",children:g(s.rating)}),e.jsxs("span",{className:"text-gray-400 text-xs",children:["(",s.reviewCount,")"]})]}),e.jsx("h3",{className:"text-white font-medium mb-2 line-clamp-2",children:s.name}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-lg font-bold text-white",children:a(s.price)}),s.originalPrice&&e.jsx("span",{className:"text-sm text-gray-500 line-through",children:a(s.originalPrice)})]}),t&&e.jsx("p",{className:"text-gray-400 text-xs mt-1",children:s.shop.name})]})})]})]}):e.jsxs(T,{to:`/products/${s.id}`,className:"flex items-center space-x-4 p-4 hover:bg-gray-900 transition-colors border-b border-gray-800",children:[e.jsx("img",{src:s.image,alt:s.name,className:"w-16 h-16 object-cover rounded-lg"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-white font-medium truncate",children:s.name}),e.jsxs("div",{className:"flex items-center space-x-1 mt-1",children:[e.jsx("div",{className:"flex",children:g(s.rating)}),e.jsxs("span",{className:"text-gray-400 text-xs",children:["(",s.reviewCount,")"]})]}),t&&e.jsx("p",{className:"text-gray-400 text-xs mt-1",children:s.shop.name})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("span",{className:"text-lg font-bold text-white",children:a(s.price)})}),s.originalPrice&&e.jsx("span",{className:"text-sm text-gray-500 line-through",children:a(s.originalPrice)})]})]})},Gt=()=>{const[s,i]=l.useState(!1),[t,r]=l.useState("home"),n=[{name:"Home",href:"/",icon:js,iconSolid:fs,active:t==="home"},{name:"Explore",href:"/explore",icon:K,iconSolid:K},{name:"Notifications",href:"/notifications",icon:Se,iconSolid:et,count:3},{name:"Messages",href:"/messages",icon:Ce,iconSolid:st,count:1},{name:"Bookmarks",href:"/bookmarks",icon:Ye,iconSolid:Ke},{name:"Profile",href:"/profile",icon:W,iconSolid:tt},{name:"Settings",href:"/settings",icon:Qe,iconSolid:Qe}],p=[{category:"Shopping",topic:"Black Friday Deals",posts:"127K"},{category:"Technology",topic:"iPhone 15",posts:"89K"},{category:"Business",topic:"OneSoko Marketplace",posts:"45K"},{category:"Fashion",topic:"Summer Collection",posts:"32K"},{category:"Electronics",topic:"Gaming Laptops",posts:"28K"}],u=[{id:"1",user:{name:"OneSoko Official",username:"onesoko",avatar:"/api/placeholder/40/40",verified:!0},content:"Exciting news! We just launched our new AI-powered product recommendation engine. Experience shopping like never before! 🚀 #Innovation #Shopping",timestamp:"2h",likes:1234,retweets:567,replies:89,type:"promotion"},{id:"2",user:{name:"TechStore Kenya",username:"techstore_ke",avatar:"/api/placeholder/40/40"},content:"Just restocked! Latest MacBook Pro models now available. Free delivery within Nairobi. Limited time offer - 10% off for first 50 customers! 💻✨",timestamp:"4h",likes:892,retweets:234,replies:45,image:"/api/placeholder/500/300",type:"product"},{id:"3",user:{name:"Fashion Hub",username:"fashionhub",avatar:"/api/placeholder/40/40"},content:"Summer collection drop! 🌞 From casual wear to formal attire, we have everything for the modern Kenyan. Shop now and get free styling consultation!",timestamp:"6h",likes:567,retweets:123,replies:67,type:"shop"},{id:"4",user:{name:"John Doe",username:"johndoe",avatar:"/api/placeholder/40/40"},content:"Just had the best shopping experience on @onesoko! Found exactly what I was looking for at an amazing price. The delivery was super fast too! 👏",timestamp:"8h",likes:234,retweets:45,replies:23},{id:"5",user:{name:"Electronics World",username:"electronicsworld",avatar:"/api/placeholder/40/40"},content:"Gaming setup of the week! 🎮 Complete setup available in our store. RTX 4080, 32GB RAM, 4K monitor. DM for pricing and availability.",timestamp:"12h",likes:789,retweets:156,replies:34,image:"/api/placeholder/500/300",type:"product"}],f=[{name:"Apple Store Kenya",username:"apple_ke",followers:"2.4M"},{name:"Safaricom",username:"safaricom",followers:"1.8M"},{name:"Jumia Kenya",username:"jumia_ke",followers:"890K"}],c=[{id:"1",name:"iPhone 15 Pro Max - 256GB",price:18e4,originalPrice:2e5,image:"/api/placeholder/400/300",shop:{name:"Apple Store Kenya",username:"apple_ke",verified:!0},rating:4.8,reviewCount:1240,category:"Electronics",description:"Latest iPhone with A17 Pro chip and titanium design. Perfect for photography and gaming.",discount:10},{id:"2",name:"Nike Air Max 270 - Black/White",price:15e3,originalPrice:18e3,image:"/api/placeholder/400/300",shop:{name:"Nike Store",username:"nike_ke",verified:!0},rating:4.6,reviewCount:890,category:"Fashion",description:"Comfortable running shoes with Air Max technology. Perfect for daily wear and exercise.",discount:17},{id:"3",name:"MacBook Air M2 - 13 inch",price:145e3,image:"/api/placeholder/400/300",shop:{name:"TechWorld Kenya",username:"techworld_ke",verified:!1},rating:4.9,reviewCount:567,category:"Electronics",description:"Ultra-thin laptop with M2 chip. Perfect for work, study, and creative projects."},{id:"4",name:"Samsung Galaxy S24 Ultra",price:165e3,originalPrice:175e3,image:"/api/placeholder/400/300",shop:{name:"Samsung Store",username:"samsung_ke",verified:!0},rating:4.7,reviewCount:2100,category:"Electronics",description:"Flagship Android phone with S Pen and incredible camera system.",discount:6}],v=({item:a})=>{const g=a.active?a.iconSolid:a.icon;return e.jsxs(T,{to:a.href,className:`x-nav-item ${a.active?"active":""}`,onClick:()=>r(a.name.toLowerCase()),children:[e.jsx(g,{className:"x-nav-icon"}),e.jsx("span",{className:"text-xl",children:a.name}),a.count&&e.jsx("span",{className:"ml-auto bg-red-500 text-white text-xs px-2 py-1 rounded-full min-w-[20px] text-center",children:a.count})]})},o=({post:a})=>e.jsx("div",{className:"x-feed-item",children:e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{src:a.user.avatar,alt:a.user.name,className:"x-avatar"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-1 mb-1",children:[e.jsx("span",{className:"font-bold text-white",children:a.user.name}),a.user.verified&&e.jsx("svg",{className:"w-5 h-5 text-blue-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsxs("span",{className:"x-text-secondary",children:["@",a.user.username]}),e.jsx("span",{className:"x-text-secondary",children:"·"}),e.jsx("span",{className:"x-text-secondary",children:a.timestamp})]}),e.jsx("div",{className:"mb-3",children:e.jsx("p",{className:"text-white whitespace-pre-wrap",children:a.content})}),a.image&&e.jsx("div",{className:"mb-3",children:e.jsx("img",{src:a.image,alt:"Post content",className:"rounded-lg max-w-full h-auto border border-gray-700"})}),e.jsxs("div",{className:"flex items-center justify-between max-w-md",children:[e.jsxs("button",{className:"flex items-center space-x-2 text-gray-500 hover:text-blue-500 transition-colors",children:[e.jsx(ws,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm",children:a.replies})]}),e.jsxs("button",{className:"flex items-center space-x-2 text-gray-500 hover:text-green-500 transition-colors",children:[e.jsx(rt,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm",children:a.retweets})]}),e.jsxs("button",{className:"flex items-center space-x-2 text-gray-500 hover:text-red-500 transition-colors",children:[e.jsx(Z,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm",children:a.likes})]}),e.jsx("button",{className:"flex items-center space-x-2 text-gray-500 hover:text-blue-500 transition-colors",children:e.jsx(De,{className:"w-5 h-5"})})]})]})]})});return e.jsxs("div",{className:"x-theme min-h-screen",children:[s&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 lg:hidden",onClick:()=>i(!1)}),e.jsxs("div",{className:`x-sidebar x-scrollbar ${s?"mobile-open":""}`,children:[e.jsx("div",{className:"mb-8",children:e.jsxs(T,{to:"/",className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center",children:e.jsx(V,{className:"w-5 h-5 text-white"})}),e.jsx("span",{className:"text-2xl font-bold text-white",children:"OneSoko"})]})}),e.jsx("nav",{className:"space-y-2 mb-8",children:n.map(a=>e.jsx(v,{item:a},a.name))}),e.jsxs("button",{className:"x-btn x-btn-primary x-btn-lg w-full mb-8",children:[e.jsx(V,{className:"w-5 h-5 mr-2"}),"Shop Now"]}),e.jsx("div",{className:"mt-auto",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-full hover:bg-gray-900 transition-colors cursor-pointer",children:[e.jsx("img",{src:"/api/placeholder/40/40",alt:"User",className:"x-avatar"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-white truncate",children:"John Doe"}),e.jsx("p",{className:"text-gray-500 text-sm truncate",children:"@johndoe"})]}),e.jsx(rs,{className:"w-5 h-5 text-gray-500"})]})})]}),e.jsxs("div",{className:"x-main-content",children:[e.jsx("div",{className:"x-header",children:e.jsxs("div",{className:"x-header-content",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{className:"lg:hidden text-white",onClick:()=>i(!0),children:e.jsx(gs,{className:"w-6 h-6"})}),e.jsx("h1",{className:"text-xl font-bold text-white",children:"Home"})]}),e.jsx(he,{className:"w-6 h-6 text-blue-500"})]})}),e.jsx("div",{className:"border-b border-gray-700 p-4",children:e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("img",{src:"/api/placeholder/40/40",alt:"User",className:"x-avatar"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("textarea",{className:"w-full bg-transparent text-xl placeholder-gray-500 resize-none outline-none text-white",placeholder:"What's happening in your shop?",rows:3}),e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{className:"text-blue-500 hover:bg-blue-500 hover:bg-opacity-10 p-2 rounded-full transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})})}),e.jsx("button",{className:"text-blue-500 hover:bg-blue-500 hover:bg-opacity-10 p-2 rounded-full transition-colors",children:e.jsx(V,{className:"w-5 h-5"})})]}),e.jsx("button",{className:"x-btn x-btn-primary",children:"Post"})]})]})]})}),e.jsxs("div",{className:"x-feed-container",children:[e.jsxs("div",{className:"border-b border-gray-700 p-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center",children:[e.jsx(at,{className:"w-5 h-5 mr-2 text-red-500"}),"Trending Products"]}),e.jsx("div",{className:"space-y-0",children:c.map(a=>e.jsx(Ht,{product:a,variant:"feed",showShopInfo:!0},a.id))})]}),u.map(a=>e.jsx(o,{post:a},a.id))]})]}),e.jsxs("div",{className:"x-right-panel x-scrollbar hidden xl:block",children:[e.jsxs("div",{className:"x-search-container mb-6",children:[e.jsx(K,{className:"x-search-icon"}),e.jsx("input",{type:"text",placeholder:"Search OneSoko",className:"x-search-input"})]}),e.jsxs("div",{className:"x-trending-container mb-6",children:[e.jsx("div",{className:"x-trending-header",children:e.jsx("h2",{className:"text-xl font-bold text-white",children:"What's happening"})}),p.map((a,g)=>e.jsxs("div",{className:"x-trending-item cursor-pointer",children:[e.jsxs("p",{className:"text-sm text-gray-500",children:[a.category," · Trending"]}),e.jsx("p",{className:"font-bold text-white",children:a.topic}),e.jsxs("p",{className:"text-sm text-gray-500",children:[a.posts," posts"]})]},g))]}),e.jsxs("div",{className:"x-trending-container",children:[e.jsx("div",{className:"x-trending-header",children:e.jsx("h2",{className:"text-xl font-bold text-white",children:"Who to follow"})}),f.map((a,g)=>e.jsxs("div",{className:"x-trending-item flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("img",{src:"/api/placeholder/40/40",alt:a.name,className:"x-avatar-sm"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-white text-sm",children:a.name}),e.jsxs("p",{className:"text-gray-500 text-sm",children:["@",a.username]})]})]}),e.jsx("button",{className:"x-btn x-btn-secondary text-sm px-4 py-1",children:"Follow"})]},g))]})]})]})},Vt=({position:s="bottom-right",className:i=""})=>{const t={"bottom-right":"bottom-6 right-6","bottom-left":"bottom-6 left-6","top-right":"top-6 right-6","top-left":"top-6 left-6"};return e.jsxs(T,{to:"/about",className:`fixed ${t[s]} z-50 bg-primary-600 hover:bg-primary-700 text-white p-3 rounded-full shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-110 group ${i}`,title:"About OneSoko",children:[e.jsx(qe,{className:"w-6 h-6"}),e.jsx("span",{className:"absolute right-full mr-3 top-1/2 transform -translate-y-1/2 bg-secondary-800 text-white text-sm px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap",children:"About OneSoko"})]})},Ge=()=>{const s=Oe(),[i]=nt(),t=()=>s.pathname==="/shops"||i.get("type")==="shops"?"shops":"products",[r,n]=l.useState(t()),[p,u]=l.useState(i.get("q")||""),[f,c]=l.useState([]),[v,o]=l.useState([]),[a,g]=l.useState(!1),[j,P]=l.useState(!1),[m,k]=l.useState({category:"",priceRange:"",rating:"",availability:"",sortBy:"relevance"}),w=["Electronics","Fashion","Home & Garden","Sports","Books","Health & Beauty","Automotive","Food & Beverages"],d=[{label:"Under $25",value:"0-25"},{label:"$25 - $50",value:"25-50"},{label:"$50 - $100",value:"50-100"},{label:"$100 - $200",value:"100-200"},{label:"Over $200",value:"200-999999"}],x=[{label:"Relevance",value:"relevance"},{label:"Price: Low to High",value:"price_asc"},{label:"Price: High to Low",value:"price_desc"},{label:"Newest First",value:"newest"},{label:"Rating",value:"rating"},{label:"Popularity",value:"popularity"}];l.useEffect(()=>{const S=i.get("q")||"",B=t();u(S),n(B),S.trim()?_():C()},[s.pathname,i]),l.useEffect(()=>{p.trim()?_():C()},[r,m]);const _=async()=>{if(p.trim()){g(!0);try{if(r==="products"){const S=await D.get("/products/",{params:{search:p,category:m.category||void 0,price_min:m.priceRange?m.priceRange.split("-")[0]:void 0,price_max:m.priceRange?m.priceRange.split("-")[1]:void 0,ordering:h(m.sortBy),is_active:m.availability==="available"?!0:void 0}});c(S.data.results||S.data),o([])}else{const S=await D.get("/shops/",{params:{search:p,ordering:m.sortBy==="rating"?"-rating":"-created_at"}}),B=S.data.results||S.data;console.log("Loaded shops data:",B),console.log("First shop shopId:",B[0]?.shopId),o(B),c([])}}catch(S){console.error("Search error:",S),R.error("Search failed. Please try again.")}finally{g(!1)}}},C=async()=>{g(!0);try{if(r==="products"){const S=await D.get("/products/",{params:{is_featured:!0,is_active:!0,ordering:h(m.sortBy)}});c(S.data.results||S.data),o([])}else{const S=await D.get("/shops/",{params:{is_active:!0,ordering:"-rating"}});o(S.data.results||S.data),c([])}}catch(S){console.error("Load featured items error:",S),R.error("Failed to load items. Please try again.")}finally{g(!1)}},h=S=>{switch(S){case"price_asc":return"price";case"price_desc":return"-price";case"newest":return"-created_at";case"rating":return"-rating";case"popularity":return"-view_count";default:return"-created_at"}},$=S=>{S.preventDefault(),_()},y=()=>{k({category:"",priceRange:"",rating:"",availability:"",sortBy:"relevance"})},E=Object.values(m).filter(S=>S&&S!=="relevance").length;return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:"Explore OneSoko"}),e.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300",children:"Discover amazing products and shops from our marketplace"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-8",children:[e.jsx("div",{className:"flex items-center justify-center mb-6",children:e.jsxs("div",{className:"bg-gray-100 dark:bg-gray-700 p-1 rounded-lg flex",children:[e.jsxs("button",{onClick:()=>n("products"),className:`px-4 py-2 rounded-md font-medium transition-colors duration-200 flex items-center space-x-2 ${r==="products"?"bg-primary-600 text-white":"text-gray-600 dark:text-gray-300 hover:text-primary-600"}`,children:[e.jsx(He,{className:"w-4 h-4"}),e.jsx("span",{children:"Products"})]}),e.jsxs("button",{onClick:()=>n("shops"),className:`px-4 py-2 rounded-md font-medium transition-colors duration-200 flex items-center space-x-2 ${r==="shops"?"bg-primary-600 text-white":"text-gray-600 dark:text-gray-300 hover:text-primary-600"}`,children:[e.jsx(Te,{className:"w-4 h-4"}),e.jsx("span",{children:"Shops"})]})]})}),e.jsx("form",{onSubmit:$,className:"relative mb-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(K,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:`Search for ${r}...`,value:p,onChange:S=>u(S.target.value),className:"w-full pl-12 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"}),e.jsx("button",{type:"submit",className:"absolute right-2 top-1/2 transform -translate-y-1/2 btn-primary px-4 py-1.5",children:"Search"})]})}),r==="products"&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{onClick:()=>P(!j),className:"flex items-center space-x-2 text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400",children:[e.jsx(ve,{className:"w-4 h-4"}),e.jsx("span",{children:"Filters"}),E>0&&e.jsx("span",{className:"bg-primary-600 text-white text-xs px-2 py-1 rounded-full",children:E})]}),E>0&&e.jsx("button",{onClick:y,className:"text-sm text-gray-500 hover:text-red-600 dark:text-gray-400 dark:hover:text-red-400",children:"Clear all"})]})]}),j&&r==="products"&&e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-8",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Category"}),e.jsxs("select",{value:m.category,onChange:S=>k({...m,category:S.target.value}),className:"w-full border border-gray-300 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:"All Categories"}),w.map(S=>e.jsx("option",{value:S,children:S},S))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Price Range"}),e.jsxs("select",{value:m.priceRange,onChange:S=>k({...m,priceRange:S.target.value}),className:"w-full border border-gray-300 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:"Any Price"}),d.map(S=>e.jsx("option",{value:S.value,children:S.label},S.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Availability"}),e.jsxs("select",{value:m.availability,onChange:S=>k({...m,availability:S.target.value}),className:"w-full border border-gray-300 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:"All Items"}),e.jsx("option",{value:"available",children:"In Stock Only"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Sort By"}),e.jsx("select",{value:m.sortBy,onChange:S=>k({...m,sortBy:S.target.value}),className:"w-full border border-gray-300 dark:border-gray-600 rounded-md px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:x.map(S=>e.jsx("option",{value:S.value,children:S.label},S.value))})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:_,className:"w-full btn-primary",children:"Apply Filters"})})]})}),e.jsx("div",{className:"mb-8",children:a?e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:p?e.jsxs(e.Fragment,{children:['Search Results for "',p,'" (',r==="products"?f.length:v.length," found)"]}):e.jsxs(e.Fragment,{children:[r==="products"?"Featured Products":"Popular Shops"," (",r==="products"?f.length:v.length,")"]})})}),r==="products"&&e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:f.length>0?f.map(S=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md hover:shadow-lg transition-shadow duration-200 overflow-hidden",children:[e.jsx(T,{to:`/products/${S.productId}`,className:"block",children:e.jsx("div",{className:"aspect-w-1 aspect-h-1 w-full overflow-hidden bg-gray-200 dark:bg-gray-700",children:S.image?e.jsx("img",{src:S.image,alt:S.name,className:"h-48 w-full object-cover object-center group-hover:opacity-75"}):e.jsx("div",{className:"h-48 w-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center",children:e.jsx(He,{className:"h-12 w-12 text-gray-400"})})})}),e.jsxs("div",{className:"p-4",children:[e.jsx(T,{to:`/products/${S.productId}`,children:e.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white hover:text-primary-600 dark:hover:text-primary-400 line-clamp-2",children:S.name})}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400 line-clamp-2",children:S.description}),e.jsxs("div",{className:"mt-2 flex items-center",children:[e.jsx("div",{className:"flex items-center",children:[0,1,2,3,4].map(B=>e.jsx(ae,{className:`h-4 w-4 ${(S.average_rating||0)>B?"text-yellow-400":"text-gray-300 dark:text-gray-600"}`},B))}),e.jsxs("span",{className:"ml-1 text-xs text-gray-500 dark:text-gray-400",children:["(",S.reviews?.length||0,")"]})]}),e.jsxs("div",{className:"mt-2 flex items-center space-x-2",children:[e.jsxs("span",{className:"text-lg font-bold text-gray-900 dark:text-white",children:["$",S.price]}),S.promotional_price&&parseFloat(S.promotional_price)>parseFloat(S.price)&&e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400 line-through",children:["$",S.promotional_price]})]}),e.jsx("div",{className:"mt-2",children:S.quantity===0?e.jsx("span",{className:"text-xs text-red-600 dark:text-red-400 font-medium",children:"Out of Stock"}):S.quantity<=5?e.jsxs("span",{className:"text-xs text-orange-600 dark:text-orange-400 font-medium",children:["Only ",S.quantity," left!"]}):e.jsx("span",{className:"text-xs text-green-600 dark:text-green-400 font-medium",children:"In Stock"})}),e.jsx("div",{className:"mt-4",children:e.jsx(oe,{product:S,size:"sm",showQuantitySelector:!1})})]})]},S.productId)):e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx(He,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No products found"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Try adjusting your search terms or filters"})]})}),r==="shops"&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:v.length>0?v.map(S=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md hover:shadow-lg transition-shadow duration-200 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[e.jsx("div",{className:"w-16 h-16 bg-primary-600 rounded-lg flex items-center justify-center",children:S.logo_url?e.jsx("img",{src:S.logo_url,alt:S.name,className:"w-full h-full object-cover rounded-lg"}):e.jsx("span",{className:"text-white font-bold text-xl",children:S.name.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:S.name}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:S.city&&S.country?`${S.city}, ${S.country}`:S.location||"Location not specified"})]})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm mb-4 line-clamp-2",children:S.description||"No description available"}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 dark:text-gray-400 mb-4",children:[e.jsxs("span",{children:[S.products_count||0," Products"]}),e.jsx("div",{className:"flex items-center space-x-1",children:e.jsxs("span",{className:"flex items-center",children:[e.jsx(ae,{className:"w-4 h-4 text-yellow-400 mr-1"}),e.jsx("span",{children:S.views?(S.views/100).toFixed(1):"New"})]})})]}),e.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:e.jsxs(T,{to:`/shops/${S.shopId}`,onClick:()=>console.log("Navigating to shop:",S.shopId,"Full shop object:",S),className:"w-full bg-primary-600 hover:bg-primary-700 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 flex items-center justify-center space-x-2",children:[e.jsx(Te,{className:"w-4 h-4"}),e.jsx("span",{children:"Visit the Shop"})]})})]},S.shopId)):e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx(Te,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No shops found"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Try adjusting your search terms"})]})})]})})]}),e.jsx(Vt,{})]})},pe={getAll:async()=>{const s=await D.get("/shops/?page_size=100");return s.data.results||s.data},getById:async s=>(await D.get(`/shops/${s}/`)).data,getLocations:async()=>{try{return(await D.get("/shops/locations/")).data}catch{const i=await D.get("/shops/?page_size=100"),t=i.data.results||i.data,r=new Set;return t.forEach(n=>{n.location&&r.add(n.location),n.city&&r.add(n.city),n.country&&r.add(n.country)}),Array.from(r).sort()}},search:async(s={})=>{const i=new URLSearchParams;Object.entries(s).forEach(([r,n])=>{n!=null&&n!==""&&i.append(r,n.toString())});const t=await D.get(`/shops/search/?${i.toString()}`);return t.data.results||t.data},create:async s=>(await D.post("/shops/",s)).data,update:async(s,i)=>(await D.put(`/shops/${s}/`,i)).data,delete:async s=>{await D.delete(`/shops/${s}/`)},getProducts:async s=>(await D.get(`/shops/${s}/products/`)).data,addProduct:async(s,i)=>(await D.post(`/shops/${s}/add_product/`,i)).data,removeProduct:async(s,i)=>{await D.delete(`/shops/${s}/products/${i}/`)},getMyShop:async()=>{const s=await D.get("/shops/?owner=me");return s.data.results?.[0]||s.data[0]}},Wt=s=>({productId:`shop-${s.id}`,name:s.name,description:s.description,price:s.price,promotional_price:s.price,quantity:s.stock_quantity,image:s.image_url,discount:"0.00",is_active:s.stock_quantity>0,category:{id:s.category.id,name:s.category.name,description:s.category.description,created_at:s.category.created_at,updated_at:s.category.updated_at},tags:s.tags.map(i=>({id:i.id,name:i.name})),variants:[],reviews:[],deleted_at:void 0}),Qt=()=>{const{id:s}=Fe(),i=X(),[t,r]=l.useState(null),[n,p]=l.useState([]),[u,f]=l.useState(!0),[c,v]=l.useState(""),[o,a]=l.useState(""),[g,j]=l.useState("name"),[P,m]=l.useState("grid"),k=["All Categories","Electronics","Fashion","Home & Garden","Sports","Books","Health & Beauty"],w=[{value:"name",label:"Name A-Z"},{value:"name_desc",label:"Name Z-A"},{value:"price",label:"Price Low-High"},{value:"price_desc",label:"Price High-Low"},{value:"created_at",label:"Newest First"},{value:"rating",label:"Highest Rated"}];l.useEffect(()=>{s&&d()},[s]);const d=async()=>{if(s){f(!0);try{const y=await pe.getById(s);r(y);try{const E=await pe.getProducts(s);p(E)}catch{console.log("Using fallback products data")}}catch(y){console.error("Error fetching shop data:",y),R.error("Failed to load shop details");const E={shopowner_id:parseInt(s),name:"TechHub Electronics",description:"Your one-stop shop for the latest electronics and gadgets. We specialize in premium quality products at competitive prices. From smartphones and laptops to smart home devices and gaming equipment, we have everything you need to stay connected and entertained.",address:"Plot 123, Victoria Island, Lagos State, Nigeria",phone_number:"+234 801 234 5678",email:"info@techhub.ng",shopowner:{id:1,username:"techhub_owner",email:"owner@techhub.ng",first_name:"John",last_name:"Doe"},products:[],logo_url:"https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=400&h=400&fit=crop&crop=center",banner_url:"https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=1200&h=400&fit=crop&crop=center",is_verified:!0,created_at:"2024-01-15T10:00:00Z",updated_at:"2024-01-20T15:30:00Z"},S=[{id:1,name:"iPhone 15 Pro Max",description:"Latest iPhone with A17 Pro chip and titanium design",price:"1299.99",stock_quantity:15,category:{id:1,name:"Electronics",description:"Electronic devices",created_at:"2024-01-01",updated_at:"2024-01-01"},tags:[{id:1,name:"smartphone"},{id:2,name:"premium"}],image_url:"https://images.unsplash.com/photo-1592750475338-74b7b21085ab?w=400&h=400&fit=crop",created_at:"2024-01-15T10:00:00Z",updated_at:"2024-01-20T15:30:00Z",variants:[]},{id:2,name:'MacBook Pro 16"',description:"Powerful laptop for professionals with M3 chip",price:"2499.99",stock_quantity:8,category:{id:1,name:"Electronics",description:"Electronic devices",created_at:"2024-01-01",updated_at:"2024-01-01"},tags:[{id:3,name:"laptop"},{id:2,name:"premium"}],image_url:"https://images.unsplash.com/photo-1517336714731-489689fd1ca8?w=400&h=400&fit=crop",created_at:"2024-01-16T10:00:00Z",updated_at:"2024-01-21T15:30:00Z",variants:[]},{id:3,name:"AirPods Pro",description:"Wireless earbuds with active noise cancellation",price:"249.99",stock_quantity:25,category:{id:1,name:"Electronics",description:"Electronic devices",created_at:"2024-01-01",updated_at:"2024-01-01"},tags:[{id:4,name:"audio"},{id:5,name:"wireless"}],image_url:"https://images.unsplash.com/photo-1606220945770-b5b6c2c55bf1?w=400&h=400&fit=crop",created_at:"2024-01-17T10:00:00Z",updated_at:"2024-01-22T15:30:00Z",variants:[]},{id:4,name:"Samsung Galaxy S24 Ultra",description:"Android flagship with S Pen and advanced camera system",price:"1199.99",stock_quantity:12,category:{id:1,name:"Electronics",description:"Electronic devices",created_at:"2024-01-01",updated_at:"2024-01-01"},tags:[{id:1,name:"smartphone"},{id:5,name:"android"}],image_url:"https://images.unsplash.com/photo-1610945265064-0e34e5519bbf?w=400&h=400&fit=crop",created_at:"2024-01-18T10:00:00Z",updated_at:"2024-01-23T15:30:00Z",variants:[]},{id:5,name:'iPad Pro 12.9"',description:"Professional tablet with M2 chip and Liquid Retina display",price:"1099.99",stock_quantity:18,category:{id:1,name:"Electronics",description:"Electronic devices",created_at:"2024-01-01",updated_at:"2024-01-01"},tags:[{id:6,name:"tablet"},{id:2,name:"premium"}],image_url:"https://images.unsplash.com/photo-1544244015-0df4b3ffc6b0?w=400&h=400&fit=crop",created_at:"2024-01-19T10:00:00Z",updated_at:"2024-01-24T15:30:00Z",variants:[]},{id:6,name:"Apple Watch Ultra 2",description:"Rugged smartwatch for extreme sports and outdoor adventures",price:"799.99",stock_quantity:20,category:{id:1,name:"Electronics",description:"Electronic devices",created_at:"2024-01-01",updated_at:"2024-01-01"},tags:[{id:7,name:"smartwatch"},{id:8,name:"fitness"}],image_url:"https://images.unsplash.com/photo-1551698618-1dfe5d97d256?w=400&h=400&fit=crop",created_at:"2024-01-20T10:00:00Z",updated_at:"2024-01-25T15:30:00Z",variants:[]}];r(E),p(S)}finally{f(!1)}}},_=[...n.filter(y=>{const E=y.name.toLowerCase().includes(c.toLowerCase())||y.description.toLowerCase().includes(c.toLowerCase()),S=o==="All Categories"||o===""||y.category.name===o;return E&&S})].sort((y,E)=>{switch(g){case"name":return y.name.localeCompare(E.name);case"name_desc":return E.name.localeCompare(y.name);case"price":return parseFloat(y.price)-parseFloat(E.price);case"price_desc":return parseFloat(E.price)-parseFloat(y.price);case"created_at":return new Date(E.created_at).getTime()-new Date(y.created_at).getTime();case"rating":return Math.random()-.5;default:return 0}}),C=({product:y,viewMode:E})=>{const S=4.2+Math.random()*.8,B=Math.floor(Math.random()*50)+10,H=Wt(y);return E==="list"?e.jsx("div",{className:"card hover:shadow-lg transition-shadow",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"w-20 h-20 bg-secondary-200 rounded-lg overflow-hidden flex-shrink-0",children:y.image_url?e.jsx("img",{src:y.image_url,alt:y.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(V,{className:"w-8 h-8 text-secondary-400"})})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-secondary-900 mb-2",children:y.name}),e.jsx("p",{className:"text-sm text-secondary-600 line-clamp-2 mb-3",children:y.description}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-secondary-500 mb-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(ae,{className:"w-4 h-4 text-yellow-400 mr-1"}),S.toFixed(1)," (",B,")"]}),e.jsx("span",{className:`badge ${y.stock_quantity>10?"badge-success":y.stock_quantity>0?"badge-warning":"badge-danger"}`,children:y.stock_quantity>0?`${y.stock_quantity} in stock`:"Out of stock"})]})]}),e.jsxs("div",{className:"text-right ml-4",children:[e.jsxs("div",{className:"text-2xl font-bold text-primary-600 mb-2",children:["$",y.price]}),e.jsxs("div",{className:"space-x-2",children:[e.jsxs(T,{to:`/products/${y.id}`,className:"btn-secondary btn-sm",children:[e.jsx(Y,{className:"w-4 h-4 mr-1"}),"View"]}),e.jsx(oe,{product:H,size:"sm",showQuantitySelector:!1})]})]})]})})]})})}):e.jsx("div",{className:"card hover:shadow-lg transition-shadow",children:e.jsxs("div",{className:"card-body",children:[e.jsx("div",{className:"w-full h-48 bg-secondary-200 rounded-lg mb-4 overflow-hidden",children:y.image_url?e.jsx("img",{src:y.image_url,alt:y.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(V,{className:"w-12 h-12 text-secondary-400"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-secondary-900 mb-2",children:y.name}),e.jsx("p",{className:"text-sm text-secondary-600 line-clamp-3 mb-4",children:y.description}),e.jsxs("div",{className:"flex items-center text-sm text-secondary-500 mb-4",children:[e.jsx(ae,{className:"w-4 h-4 text-yellow-400 mr-1"}),S.toFixed(1)," (",B,")"]}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"text-2xl font-bold text-primary-600",children:["$",y.price]}),e.jsx("span",{className:`badge ${y.stock_quantity>10?"badge-success":y.stock_quantity>0?"badge-warning":"badge-danger"}`,children:y.stock_quantity>0?`${y.stock_quantity} in stock`:"Out of stock"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(T,{to:`/products/${y.id}`,className:"btn-secondary w-full",children:[e.jsx(Y,{className:"w-4 h-4 mr-2"}),"View Details"]}),e.jsx(oe,{product:H,size:"md",showQuantitySelector:!1,className:"w-full"})]})]})]})})};if(u)return e.jsx("div",{className:"min-h-screen bg-secondary-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"spinner w-8 h-8 mx-auto mb-4"}),e.jsx("p",{className:"text-secondary-600",children:"Loading shop details..."})]})});if(!t)return e.jsx("div",{className:"min-h-screen bg-secondary-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(J,{className:"w-16 h-16 mx-auto text-secondary-400 mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-secondary-900 mb-2",children:"Shop not found"}),e.jsx("p",{className:"text-secondary-600 mb-4",children:"The shop you're looking for doesn't exist or has been removed."}),e.jsxs("button",{onClick:()=>i("/shops"),className:"btn-primary",children:[e.jsx(ie,{className:"w-4 h-4 mr-2"}),"Back to Shops"]})]})});const h=4.2+Math.random()*.8,$=Math.floor(Math.random()*200)+50;return e.jsxs("div",{className:"min-h-screen bg-secondary-50",children:[e.jsx("div",{className:"bg-white shadow-sm",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("button",{onClick:()=>i("/shops"),className:"mr-4 p-2 text-secondary-600 hover:text-secondary-900",children:e.jsx(ie,{className:"h-5 w-5"})}),e.jsxs("nav",{className:"text-sm",children:[e.jsx(T,{to:"/shops",className:"text-primary-600 hover:text-primary-700",children:"Shops"}),e.jsx("span",{className:"mx-2 text-secondary-400",children:"/"}),e.jsx("span",{className:"text-secondary-900",children:t.name})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsx("div",{className:"w-full h-64 bg-secondary-200 rounded-lg overflow-hidden",children:t.logo_url?e.jsx("img",{src:t.logo_url,alt:t.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(J,{className:"w-24 h-24 text-secondary-400"})})})}),e.jsxs("div",{className:"lg:col-span-2",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h1",{className:"text-3xl font-bold text-secondary-900",children:t.name}),t.is_verified&&e.jsx("span",{className:"badge badge-primary",children:"Verified Shop"})]}),e.jsxs("div",{className:"flex items-center space-x-6 text-sm text-secondary-500 mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(ae,{className:"w-5 h-5 text-yellow-400 mr-1"}),e.jsx("span",{className:"font-medium",children:h.toFixed(1)}),e.jsxs("span",{className:"ml-1",children:["(",$," reviews)"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(J,{className:"w-5 h-5 mr-1"}),n.length," products"]}),e.jsxs("div",{children:["Member since ",new Date(t.created_at).toLocaleDateString()]})]})]})}),e.jsx("p",{className:"text-secondary-700 mb-6 leading-relaxed",children:t.description}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.address&&e.jsxs("div",{className:"flex items-start",children:[e.jsx(ne,{className:"w-5 h-5 text-secondary-400 mr-3 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-secondary-900",children:"Address"}),e.jsx("div",{className:"text-sm text-secondary-600",children:t.address})]})]}),t.phone_number&&e.jsxs("div",{className:"flex items-start",children:[e.jsx(as,{className:"w-5 h-5 text-secondary-400 mr-3 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-secondary-900",children:"Phone"}),e.jsx("div",{className:"text-sm text-secondary-600",children:t.phone_number})]})]}),t.email&&e.jsxs("div",{className:"flex items-start",children:[e.jsx(Ce,{className:"w-5 h-5 text-secondary-400 mr-3 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-secondary-900",children:"Email"}),e.jsx("div",{className:"text-sm text-secondary-600",children:t.email})]})]})]})]})]})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-secondary-900 mb-4",children:"Products"}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-secondary-200 p-6 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{children:e.jsxs("div",{className:"relative",children:[e.jsx(K,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-secondary-400"}),e.jsx("input",{type:"text",placeholder:"Search products...",value:c,onChange:y=>v(y.target.value),className:"w-full pl-10 pr-4 py-3 border border-secondary-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]})}),e.jsx("div",{children:e.jsx("select",{value:o,onChange:y=>a(y.target.value),className:"w-full px-4 py-3 border border-secondary-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:k.map(y=>e.jsx("option",{value:y,children:y},y))})}),e.jsx("div",{children:e.jsx("select",{value:g,onChange:y=>j(y.target.value),className:"w-full px-4 py-3 border border-secondary-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:w.map(y=>e.jsx("option",{value:y.value,children:y.label},y.value))})})]})}),e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("span",{className:"text-sm text-secondary-600",children:[_.length," product",_.length!==1?"s":""," found"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>m("grid"),className:`p-2 rounded ${P==="grid"?"bg-primary-100 text-primary-600":"text-secondary-600 hover:bg-secondary-100"}`,children:e.jsx(ts,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>m("list"),className:`p-2 rounded ${P==="list"?"bg-primary-100 text-primary-600":"text-secondary-600 hover:bg-secondary-100"}`,children:e.jsx(ks,{className:"w-5 h-5"})})]})]})]}),_.length>0?e.jsx("div",{className:P==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6":"space-y-4",children:_.map(y=>e.jsx(C,{product:y,viewMode:P},y.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-secondary-400 mb-4",children:e.jsx(V,{className:"w-16 h-16 mx-auto"})}),e.jsx("h3",{className:"text-lg font-medium text-secondary-900 mb-2",children:"No products found"}),e.jsx("p",{className:"text-secondary-600",children:c||o!=="All Categories"?"Try adjusting your search or filter criteria":"This shop doesn't have any products yet"})]})]})]})},xs=[{productId:"shop-1",name:"Premium Wireless Earbuds",price:"129.99",promotional_price:"99.99",image:"https://images.unsplash.com/photo-1572569511254-d8f925fe2cbb?w=400&h=400&fit=crop",description:"Crystal clear sound with active noise cancellation",quantity:50,is_active:!0,category:void 0,tags:[],variants:[],reviews:[],discount:"23.00",deleted_at:void 0},{productId:"shop-2",name:"Smart Home Speaker",price:"79.99",promotional_price:"79.99",image:"https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=400&h=400&fit=crop",description:"Voice-controlled smart speaker with high-quality audio",quantity:30,is_active:!0,category:void 0,tags:[],variants:[],reviews:[],discount:"0.00",deleted_at:void 0},{productId:"shop-3",name:"Portable Phone Charger",price:"39.99",promotional_price:"29.99",image:"https://images.unsplash.com/photo-1609592142191-82beb78b3e89?w=400&h=400&fit=crop",description:"Fast-charging portable battery pack for all devices",quantity:75,is_active:!0,category:void 0,tags:[],variants:[],reviews:[],discount:"25.00",deleted_at:void 0},{productId:"shop-4",name:"Ergonomic Office Chair",price:"299.99",promotional_price:"249.99",image:"https://images.unsplash.com/photo-1586023492125-27b2c045efd7?w=400&h=400&fit=crop",description:"Comfortable ergonomic chair with lumbar support",quantity:15,is_active:!0,category:void 0,tags:[],variants:[],reviews:[],discount:"17.00",deleted_at:void 0},{productId:"shop-5",name:"LED Desk Lamp",price:"59.99",promotional_price:"44.99",image:"https://images.unsplash.com/photo-1513506003901-1e6a229e2d15?w=400&h=400&fit=crop",description:"Adjustable LED desk lamp with touch controls",quantity:40,is_active:!0,category:void 0,tags:[],variants:[],reviews:[],discount:"25.00",deleted_at:void 0},{productId:"shop-6",name:"Wireless Keyboard & Mouse",price:"89.99",promotional_price:"69.99",image:"https://images.unsplash.com/photo-1587829741301-dc798b83add3?w=400&h=400&fit=crop",description:"Compact wireless keyboard and mouse combo",quantity:25,is_active:!0,category:void 0,tags:[],variants:[],reviews:[],discount:"22.00",deleted_at:void 0}],Kt=()=>{const{items:s,updateQuantity:i,removeItem:t,clearCart:r,getTotalPrice:n,getTotalItems:p}=$e(),[u,f]=l.useState(!1),c=(m,k)=>{k<1||(i(m,k),R.success("Cart updated"))},v=(m,k)=>{t(m),R.success(`${k} removed from cart`)},o=()=>{f(!0),setTimeout(()=>{r(),f(!1),R.success("Cart cleared")},300)},a=n(),g=a>50?0:9.99,j=a*.08,P=a+g+j;return s.length===0?e.jsx("div",{className:"min-h-screen bg-secondary-50 dark:bg-secondary-900 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center py-8 mb-12",children:[e.jsx(ge,{className:"w-16 h-16 text-secondary-400 mx-auto mb-4"}),e.jsx("h1",{className:"text-3xl font-bold text-secondary-900 dark:text-white mb-2",children:"Start Building Your Cart"}),e.jsx("p",{className:"text-secondary-600 dark:text-secondary-300 mb-6 max-w-md mx-auto",children:"Add products to your cart and manage your shopping list. You can add, update quantities, and remove items as needed."})]}),e.jsxs("div",{className:"bg-white dark:bg-secondary-800 rounded-lg shadow-sm border border-secondary-200 dark:border-secondary-700 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-secondary-900 dark:text-white",children:"Start Shopping - Featured Products"}),e.jsx(T,{to:"/explore",className:"text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300 font-medium",children:"View All Products →"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:xs.map(m=>e.jsxs("div",{className:"bg-secondary-50 dark:bg-secondary-700 rounded-lg p-4 hover:shadow-md transition-shadow",children:[e.jsx("img",{src:m.image,alt:m.name,className:"w-full h-40 object-cover rounded-lg mb-3"}),e.jsx("h3",{className:"font-semibold text-secondary-900 dark:text-white mb-2 line-clamp-2",children:m.name}),e.jsx("p",{className:"text-sm text-secondary-600 dark:text-secondary-400 mb-3 line-clamp-2",children:m.description}),e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-lg font-bold text-secondary-900 dark:text-white",children:["$",m.promotional_price]}),m.promotional_price!==m.price&&e.jsxs("span",{className:"text-sm text-secondary-500 line-through",children:["$",m.price]})]})}),e.jsx(oe,{product:m,size:"sm",showQuantitySelector:!1,className:"w-full"})]},m.productId))}),e.jsx("div",{className:"mt-8 text-center",children:e.jsxs("div",{className:"space-y-4 sm:space-y-0 sm:space-x-4 sm:flex sm:justify-center",children:[e.jsxs(T,{to:"/",className:"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 transition-colors duration-200",children:[e.jsx(ie,{className:"w-5 h-5 mr-2"}),"Back to Home"]}),e.jsx(T,{to:"/explore",className:"inline-flex items-center px-6 py-3 border border-secondary-300 dark:border-secondary-600 text-base font-medium rounded-md text-secondary-700 dark:text-secondary-300 bg-white dark:bg-secondary-800 hover:bg-secondary-50 dark:hover:bg-secondary-700 transition-colors duration-200",children:"Browse All Products"})]})})]})]})}):e.jsx("div",{className:"min-h-screen bg-secondary-50 dark:bg-secondary-900 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-secondary-900 dark:text-white",children:"Your Shopping Cart"}),e.jsxs("p",{className:"text-secondary-600 dark:text-secondary-400 mt-1",children:[p()," ",p()===1?"item":"items"," in your cart • Manage quantities, remove items, or continue shopping"]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(T,{to:"/",className:"inline-flex items-center px-4 py-2 border border-secondary-300 dark:border-secondary-600 text-sm font-medium rounded-md text-secondary-700 dark:text-secondary-300 bg-white dark:bg-secondary-800 hover:bg-secondary-50 dark:hover:bg-secondary-700 transition-colors duration-200",children:[e.jsx(ie,{className:"w-4 h-4 mr-2"}),"Continue Shopping"]}),s.length>0&&e.jsxs("button",{onClick:o,disabled:u,className:"inline-flex items-center px-4 py-2 border border-red-300 text-sm font-medium rounded-md text-red-700 bg-red-50 hover:bg-red-100 disabled:opacity-50 transition-colors duration-200",children:[e.jsx(Pe,{className:"w-4 h-4 mr-2"}),u?"Clearing...":"Clear Cart"]})]})]}),e.jsxs("div",{className:"lg:grid lg:grid-cols-12 lg:gap-8",children:[e.jsx("div",{className:"lg:col-span-8",children:e.jsxs("div",{className:"bg-white dark:bg-secondary-800 rounded-lg shadow-sm border border-secondary-200 dark:border-secondary-700 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-secondary-200 dark:border-secondary-700",children:e.jsx("h2",{className:"text-lg font-medium text-secondary-900 dark:text-white",children:"Cart Items"})}),e.jsx("div",{className:"divide-y divide-secondary-200 dark:divide-secondary-700",children:s.map(m=>{const k=m.product.promotional_price?parseFloat(m.product.promotional_price):parseFloat(m.product.price),w=m.variant?.price_adjustment?parseFloat(m.variant.price_adjustment):0,d=k+w,x=d*m.quantity;return e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{src:m.product.image||"/api/placeholder/80/80",alt:m.product.name,className:"w-20 h-20 object-cover rounded-lg border border-secondary-200 dark:border-secondary-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-medium text-secondary-900 dark:text-white",children:e.jsx(T,{to:`/products/${m.product.productId}`,className:"hover:text-primary-600 dark:hover:text-primary-400",children:m.product.name})}),m.product.description&&e.jsx("p",{className:"text-sm text-secondary-600 dark:text-secondary-400 mt-1 line-clamp-2",children:m.product.description}),m.variant&&e.jsxs("p",{className:"text-sm text-secondary-500 dark:text-secondary-400 mt-1",children:["Variant: ",m.variant.name]})]}),e.jsx("button",{onClick:()=>v(m.id,m.product.name),className:"ml-4 p-2 text-secondary-400 hover:text-red-500 transition-colors duration-200",title:"Remove item",children:e.jsx(ye,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"flex items-center border border-secondary-300 dark:border-secondary-600 rounded-md",children:[e.jsx("button",{onClick:()=>c(m.id,m.quantity-1),disabled:m.quantity<=1,className:"p-2 text-secondary-600 dark:text-secondary-400 hover:text-secondary-900 dark:hover:text-white disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(vs,{className:"w-4 h-4"})}),e.jsx("span",{className:"px-4 py-2 text-secondary-900 dark:text-white min-w-[3rem] text-center",children:m.quantity}),e.jsx("button",{onClick:()=>c(m.id,m.quantity+1),className:"p-2 text-secondary-600 dark:text-secondary-400 hover:text-secondary-900 dark:hover:text-white",children:e.jsx(ee,{className:"w-4 h-4"})})]}),e.jsx("button",{className:"p-2 text-secondary-400 hover:text-red-500 transition-colors duration-200",children:e.jsx(Z,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-lg font-medium text-secondary-900 dark:text-white",children:["$",x.toFixed(2)]}),e.jsxs("p",{className:"text-sm text-secondary-600 dark:text-secondary-400",children:["$",d.toFixed(2)," each"]})]})]})]})]})},m.id)})})]})}),e.jsx("div",{className:"lg:col-span-4 mt-8 lg:mt-0",children:e.jsxs("div",{className:"bg-white dark:bg-secondary-800 rounded-lg shadow-sm border border-secondary-200 dark:border-secondary-700 p-6 sticky top-8",children:[e.jsx("h2",{className:"text-lg font-medium text-secondary-900 dark:text-white mb-4",children:"Order Summary"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"text-secondary-600 dark:text-secondary-400",children:["Subtotal (",p()," items)"]}),e.jsxs("span",{className:"text-secondary-900 dark:text-white",children:["$",a.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-secondary-600 dark:text-secondary-400",children:"Shipping"}),e.jsx("span",{className:"text-secondary-900 dark:text-white",children:g===0?"FREE":`$${g.toFixed(2)}`})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-secondary-600 dark:text-secondary-400",children:"Tax (8%)"}),e.jsxs("span",{className:"text-secondary-900 dark:text-white",children:["$",j.toFixed(2)]})]}),g>0&&e.jsx("p",{className:"text-xs text-secondary-500 dark:text-secondary-400",children:"Free shipping on orders over $50"}),e.jsx("div",{className:"border-t border-secondary-200 dark:border-secondary-700 pt-3",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-base font-medium text-secondary-900 dark:text-white",children:"Total"}),e.jsxs("span",{className:"text-xl font-bold text-secondary-900 dark:text-white",children:["$",P.toFixed(2)]})]})})]}),e.jsx("button",{className:"w-full mt-6 bg-primary-600 border border-transparent rounded-md shadow-sm py-3 px-4 text-base font-medium text-white hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-200",children:"Proceed to Checkout"}),e.jsx(T,{to:"/explore",className:"w-full mt-3 bg-white dark:bg-secondary-700 border border-secondary-300 dark:border-secondary-600 rounded-md shadow-sm py-3 px-4 text-base font-medium text-secondary-700 dark:text-secondary-300 hover:bg-secondary-50 dark:hover:bg-secondary-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-200 text-center block",children:"Continue Shopping"})]})})]}),e.jsxs("div",{className:"mt-12 bg-white dark:bg-secondary-800 rounded-lg shadow-sm border border-secondary-200 dark:border-secondary-700 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-secondary-900 dark:text-white",children:"Add More Products"}),e.jsx(T,{to:"/explore",className:"text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300 font-medium",children:"View All Products →"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:xs.slice(0,4).map(m=>e.jsxs("div",{className:"bg-secondary-50 dark:bg-secondary-700 rounded-lg p-4",children:[e.jsx("img",{src:m.image,alt:m.name,className:"w-full h-32 object-cover rounded-lg mb-2"}),e.jsx("h4",{className:"font-medium text-secondary-900 dark:text-white mb-1 text-sm line-clamp-2",children:m.name}),e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-sm font-bold text-secondary-900 dark:text-white",children:["$",m.promotional_price]}),m.promotional_price!==m.price&&e.jsxs("span",{className:"text-xs text-secondary-500 line-through",children:["$",m.price]})]}),e.jsx(oe,{product:m,size:"sm",showQuantitySelector:!1,className:"w-full text-xs"})]},m.productId))})]})]})})},Yt=()=>e.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"OneSoko Test Component"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"If you can see this, the React app is working correctly."}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Frontend:"})," Running on localhost:5173"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Backend:"})," Should be on localhost:8000"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Time:"})," ",new Date().toLocaleString()]})]})]})}),Ts=({userType:s="customer",onSuccess:i,onError:t,className:r="",children:n})=>{const{loginWithOAuth:p,isLoading:u}=z(),f=async()=>{try{window.google||await c(),window.google.accounts.oauth2.initTokenClient({client_id:"your-google-client-id",scope:"email profile",callback:async o=>{if(o.access_token)try{const a=await p("google",o.access_token,s);R.success("Successfully logged in with Google!"),i?.(a)}catch(a){console.error("Google OAuth error:",a),R.error(a.message||"Failed to login with Google"),t?.(a)}else console.error("No access token received from Google"),R.error("Failed to get access token from Google")},error_callback:o=>{console.error("Google OAuth initialization error:",o),R.error("Failed to initialize Google OAuth"),t?.(o)}}).requestAccessToken()}catch(o){console.error("Google OAuth setup error:",o),R.error("Failed to setup Google OAuth"),t?.(o)}},c=()=>new Promise((o,a)=>{if(window.google){o();return}const g=document.createElement("script");g.src="https://accounts.google.com/gsi/client",g.async=!0,g.defer=!0,g.onload=()=>o(),g.onerror=()=>a(new Error("Failed to load Google OAuth script")),document.head.appendChild(g)}),v=e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),e.jsx("span",{children:"Continue with Google"})]});return e.jsx("button",{onClick:f,disabled:u,className:`
        w-full flex items-center justify-center px-4 py-2 border border-gray-300 dark:border-gray-600 
        rounded-md shadow-sm bg-white dark:bg-gray-800 text-sm font-medium text-gray-700 dark:text-gray-300 
        hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 
        focus:ring-primary-500 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed
        ${r}
      `,children:n||v})},As=({userType:s="customer",onSuccess:i,onError:t,className:r="",children:n})=>{const{loginWithOAuth:p,isLoading:u}=z(),f=async()=>{try{window.FB||await v(),window.FB.login(a=>{a.authResponse?c(a.authResponse):(console.error("Facebook login failed:",a),R.error("Facebook login was cancelled or failed"),t?.(new Error("Facebook login failed")))},{scope:"email,public_profile"})}catch(a){console.error("Facebook OAuth setup error:",a),R.error("Failed to setup Facebook OAuth"),t?.(a)}},c=async a=>{try{const g=await p("facebook",a.accessToken,s);R.success("Successfully logged in with Facebook!"),i?.(g)}catch(g){console.error("Facebook OAuth error:",g),R.error(g.message||"Failed to login with Facebook"),t?.(g)}},v=()=>new Promise((a,g)=>{if(window.FB){a();return}window.fbAsyncInit=()=>{window.FB.init({appId:"your-facebook-app-id",cookie:!0,xfbml:!0,version:"v18.0"}),a()};const j=document.createElement("script");j.src="https://connect.facebook.net/en_US/sdk.js",j.async=!0,j.defer=!0,j.crossOrigin="anonymous",j.onerror=()=>g(new Error("Failed to load Facebook SDK")),document.head.appendChild(j)}),o=e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"#1877F2",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),e.jsx("span",{children:"Continue with Facebook"})]});return e.jsx("button",{onClick:f,disabled:u,className:`
        w-full flex items-center justify-center px-4 py-2 border border-gray-300 dark:border-gray-600 
        rounded-md shadow-sm bg-white dark:bg-gray-800 text-sm font-medium text-gray-700 dark:text-gray-300 
        hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 
        focus:ring-primary-500 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed
        ${r}
      `,children:n||o})},Rs=({userType:s="customer",onSuccess:i,onError:t,className:r="",children:n})=>{const{loginWithOAuth:p,isLoading:u}=z(),f=()=>{try{const o="your-github-client-id",a=`${window.location.origin}/auth/github/callback`,g="user:email",j=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);sessionStorage.setItem("github_oauth_state",j),sessionStorage.setItem("github_oauth_user_type",s);const P=`https://github.com/login/oauth/authorize?client_id=${o}&redirect_uri=${encodeURIComponent(a)}&scope=${encodeURIComponent(g)}&state=${j}`,m=window.open(P,"github-oauth","width=600,height=700,scrollbars=yes,resizable=yes"),k=setInterval(()=>{if(m?.closed){clearInterval(k);const w=sessionStorage.getItem("github_access_token"),d=sessionStorage.getItem("github_received_state"),x=sessionStorage.getItem("github_oauth_state");w&&d===x&&(c(w),sessionStorage.removeItem("github_access_token"),sessionStorage.removeItem("github_received_state"),sessionStorage.removeItem("github_oauth_state"),sessionStorage.removeItem("github_oauth_user_type"))}},1e3)}catch(o){console.error("GitHub OAuth setup error:",o),R.error("Failed to setup GitHub OAuth"),t?.(o)}},c=async o=>{try{const a=await p("github",o,s);R.success("Successfully logged in with GitHub!"),i?.(a)}catch(a){console.error("GitHub OAuth error:",a),R.error(a.message||"Failed to login with GitHub"),t?.(a)}},v=e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})}),e.jsx("span",{children:"Continue with GitHub"})]});return e.jsx("button",{onClick:f,disabled:u,className:`
        w-full flex items-center justify-center px-4 py-2 border border-gray-300 dark:border-gray-600 
        rounded-md shadow-sm bg-white dark:bg-gray-800 text-sm font-medium text-gray-700 dark:text-gray-300 
        hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 
        focus:ring-primary-500 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed
        ${r}
      `,children:n||v})},Me=s=>{try{const i=new FormData(s),t=i.get("email"),r=i.get("password");t&&r&&(console.log("Credentials available for browser password manager"),setTimeout(()=>{const n=new CustomEvent("credentials-ready",{detail:{email:t,hasPassword:!0}});window.dispatchEvent(n)},100))}catch(i){console.warn("Password save trigger failed:",i)}},is=s=>{try{s.hasAttribute("autocomplete")||s.setAttribute("autocomplete","on");const i=s.querySelector('input[type="email"], input[name="email"]');i&&!i.hasAttribute("autocomplete")&&i.setAttribute("autocomplete","username email"),s.querySelectorAll('input[type="password"]').forEach((u,f)=>{if(!u.hasAttribute("autocomplete")){const c=f===0?"current-password":"new-password";s.querySelector('input[name*="confirm"], input[name*="Confirm"]')?u.setAttribute("autocomplete","new-password"):u.setAttribute("autocomplete",c)}});const r=s.querySelector('input[name*="first"], input[name*="First"]');r&&!r.hasAttribute("autocomplete")&&r.setAttribute("autocomplete","given-name");const n=s.querySelector('input[name*="last"], input[name*="Last"]');n&&!n.hasAttribute("autocomplete")&&n.setAttribute("autocomplete","family-name"),s.querySelectorAll('input[type="tel"], input[name*="phone"], input[name*="Phone"]').forEach(u=>{u.hasAttribute("autocomplete")||u.setAttribute("autocomplete","tel")}),console.log("Form enhanced for password manager compatibility")}catch(i){console.warn("Form enhancement failed:",i)}},ke={supportsCredentialManagement:()=>"credentials"in navigator&&"PasswordCredential"in window,requestStoredCredentials:async()=>{if(!ke.supportsCredentialManagement())return null;try{return await navigator.credentials.get({password:!0,mediation:"optional"})}catch(s){return console.warn("Failed to request stored credentials:",s),null}},storeCredentials:async(s,i)=>{if(!ke.supportsCredentialManagement())return!1;try{const t=new window.PasswordCredential({id:s,password:i,name:s});return await navigator.credentials.store(t),!0}catch(t){return console.warn("Failed to store credentials:",t),!1}}},Jt=Object.freeze(Object.defineProperty({__proto__:null,enhanceFormForPasswordManager:is,passwordManagerUtils:ke,triggerPasswordSave:Me},Symbol.toStringTag,{value:"Module"})),Zt=()=>{const[s,i]=l.useState({email:"",password:""}),[t,r]=l.useState(!1),[n,p]=l.useState(!1),[u,f]=l.useState({}),[c,v]=l.useState("customer"),o=l.useRef(null),a=X(),g=Oe(),{login:j,userType:P}=z(),m=g.state?.from?.pathname||"/";l.useEffect(()=>{(async()=>{if(o.current){is(o.current);try{const h=await ke.requestStoredCredentials();h&&h.id&&h.password&&(i({email:h.id,password:h.password}),R.success("Credentials loaded from password manager"))}catch(h){console.log("Could not load stored credentials:",h)}}})()},[]),l.useEffect(()=>{if(o.current&&s.email&&s.password){const C=setTimeout(()=>{if(o.current){const h=o.current,$=new FormData(h);$.set("email",s.email),$.set("password",s.password);const y=new CustomEvent("credentials-entered",{detail:{email:s.email,hasPassword:!0,loginType:c}});window.dispatchEvent(y)}},1e3);return()=>clearTimeout(C)}},[s.email,s.password,c]);const k=C=>{const{name:h,value:$}=C.target;i(y=>({...y,[h]:$})),u[h]&&f(y=>({...y,[h]:""}))},w=()=>{const C={};return s.email.trim()?/\S+@\S+\.\S+/.test(s.email)||(C.email="Email address is invalid"):C.email="Email is required",s.password?s.password.length<6&&(C.password="Password must be at least 6 characters"):C.password="Password is required",f(C),Object.keys(C).length===0},d=async C=>{if(C.preventDefault(),!!w()){p(!0);try{if(await j(s.email,s.password),o.current){Me(o.current);try{await ke.storeCredentials(s.email,s.password)}catch($){console.log("Credential Management API not available:",$)}}R.success("Login successful! Credentials saved to your password manager."),a(P==="shop_owner"?"/shop/dashboard":m,{replace:!0})}catch(h){console.error("Login error:",h),h.response?.status===401?(R.error("Invalid email or password"),f({email:"Invalid credentials",password:"Invalid credentials"})):h.response?.data?.message?R.error(h.response.data.message):R.error("Login failed. Please try again.")}finally{p(!1)}}},x=C=>{R.success("Login successful!");const h=C?.profile?.is_shopowner||c==="shop_owner"?"/shop/dashboard":m;a(h,{replace:!0})},_=C=>{console.error("OAuth error:",C),R.error(C.message||"OAuth login failed")};return e.jsxs("div",{className:"min-h-screen bg-secondary-50 dark:bg-secondary-900 flex flex-col justify-center py-12 sm:px-6 lg:px-8 transition-colors duration-200",children:[e.jsx("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-primary-600 mb-2",children:"OneSoko"}),e.jsx("h2",{className:"text-2xl font-bold text-secondary-900 dark:text-white",children:"Welcome back"}),e.jsx("p",{className:"mt-2 text-sm text-secondary-600 dark:text-secondary-400",children:"Sign in to your account"})]})}),e.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:e.jsxs("div",{className:"bg-white dark:bg-secondary-800 py-8 px-4 shadow sm:rounded-lg sm:px-10 transition-colors duration-200",children:[e.jsx("div",{className:"flex items-center justify-center mb-6",children:e.jsxs("div",{className:"bg-gray-100 dark:bg-gray-700 p-1 rounded-lg flex",children:[e.jsx("button",{type:"button",onClick:()=>v("customer"),className:`px-4 py-2 rounded-md font-medium transition-colors duration-200 ${c==="customer"?"bg-primary-600 text-white":"text-gray-600 dark:text-gray-300 hover:text-primary-600"}`,children:"Customer"}),e.jsx("button",{type:"button",onClick:()=>v("shop_owner"),className:`px-4 py-2 rounded-md font-medium transition-colors duration-200 ${c==="shop_owner"?"bg-primary-600 text-white":"text-gray-600 dark:text-gray-300 hover:text-primary-600"}`,children:"Shop Owner"})]})}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsx(Ts,{userType:c,onSuccess:x,onError:_}),e.jsx(As,{userType:c,onSuccess:x,onError:_}),e.jsx(Rs,{userType:c,onSuccess:x,onError:_})]}),e.jsxs("div",{className:"relative mb-6",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-300 dark:border-gray-600"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-white dark:bg-secondary-800 text-gray-500 dark:text-gray-400",children:"Or continue with email"})})]}),e.jsxs("form",{ref:o,className:"space-y-6",onSubmit:d,autoComplete:"on",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"label",children:"Email address"}),e.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"username email",required:!0,value:s.email,onChange:k,className:`input ${u.email?"input-error":""}`,placeholder:"Enter your email"}),u.email&&e.jsx("p",{className:"mt-1 text-sm text-danger-600",children:u.email})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"label",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"password",name:"password",type:t?"text":"password",autoComplete:"current-password",required:!0,value:s.password,onChange:k,className:`input pr-10 ${u.password?"input-error":""}`,placeholder:"Enter your password"}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>r(!t),children:t?e.jsx(we,{className:"h-5 w-5 text-secondary-400"}):e.jsx(Y,{className:"h-5 w-5 text-secondary-400"})})]}),u.password&&e.jsx("p",{className:"mt-1 text-sm text-danger-600",children:u.password})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-secondary-300 rounded"}),e.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-secondary-900 dark:text-secondary-100",children:"Remember me"})]}),e.jsx("div",{className:"text-sm",children:e.jsx(T,{to:"/forgot-password",className:"font-medium text-primary-600 hover:text-primary-500",children:"Forgot your password?"})})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:n,className:"w-full btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:n?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Signing in..."]}):"Sign in"})})]}),e.jsx("div",{className:"mt-6",children:e.jsxs("div",{className:"text-center text-sm",children:[e.jsxs("span",{className:"text-secondary-600 dark:text-secondary-400",children:["Don't have an account?"," "]}),e.jsx(T,{to:c==="shop_owner"?"/register/shop-owner":"/register",className:"font-medium text-primary-600 hover:text-primary-500",children:c==="shop_owner"?"Become a seller":"Sign up"})]})}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("div",{className:"text-xs text-secondary-500 dark:text-secondary-400 space-y-1",children:e.jsxs("p",{children:["By signing in, you agree to our"," ",e.jsx(T,{to:"/terms",className:"text-primary-600 hover:text-primary-500",children:"Terms of Service"})," ","and"," ",e.jsx(T,{to:"/privacy",className:"text-primary-600 hover:text-primary-500",children:"Privacy Policy"})]})})})]})})]})},Xt=()=>{const[s,i]=l.useState({email:"",password:"",confirmPassword:"",first_name:"",last_name:"",phone_number:"",address:""}),[t,r]=l.useState(!1),[n,p]=l.useState(!1),[u,f]=l.useState(!1),[c,v]=l.useState({}),o=l.useRef(null),a=X(),{register:g}=z(),j=d=>{const{name:x,value:_}=d.target;i(C=>({...C,[x]:_})),c[x]&&v(C=>({...C,[x]:""}))},P=()=>{const d={};return s.first_name.trim()||(d.first_name="First name is required"),s.last_name.trim()||(d.last_name="Last name is required"),s.email.trim()?/\S+@\S+\.\S+/.test(s.email)||(d.email="Email address is invalid"):d.email="Email is required",s.password?s.password.length<6&&(d.password="Password must be at least 6 characters"):d.password="Password is required",s.confirmPassword?s.password!==s.confirmPassword&&(d.confirmPassword="Passwords do not match"):d.confirmPassword="Please confirm your password",v(d),Object.keys(d).length===0},m=async d=>{if(d.preventDefault(),!!P()){f(!0);try{await g({email:s.email,password:s.password,first_name:s.first_name,last_name:s.last_name,phone_number:s.phone_number||void 0,address:s.address||void 0}),o.current&&Me(o.current),R.success("Account created successfully! Welcome to OneSoko!"),a("/")}catch(x){console.error("Registration error:",x),x.response?.data?.errors?v(x.response.data.errors):x.response?.data?.message?R.error(x.response.data.message):R.error("Registration failed. Please try again.")}finally{f(!1)}}},k=()=>{R.success("Account created successfully! Welcome to OneSoko!"),a("/")},w=d=>{console.error("OAuth error:",d),R.error(d.message||"OAuth registration failed")};return e.jsxs("div",{className:"min-h-screen bg-secondary-50 dark:bg-secondary-900 flex flex-col justify-center py-12 sm:px-6 lg:px-8 transition-colors duration-200",children:[e.jsx("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsxs(T,{to:"/register",className:"inline-flex items-center text-secondary-600 dark:text-secondary-400 hover:text-primary-600 dark:hover:text-primary-400 transition-colors duration-200",children:[e.jsx(ie,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"text-sm",children:"Back to selection"})]})}),e.jsx("h1",{className:"text-3xl font-bold text-primary-600 mb-2",children:"OneSoko"}),e.jsx("h2",{className:"text-2xl font-bold text-secondary-900 dark:text-white",children:"Create Customer Account"}),e.jsx("p",{className:"mt-2 text-sm text-secondary-600 dark:text-secondary-400",children:"Join thousands of customers shopping on OneSoko"})]})}),e.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:e.jsxs("div",{className:"bg-white dark:bg-secondary-800 py-8 px-4 shadow sm:rounded-lg sm:px-10 transition-colors duration-200",children:[e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsx(Ts,{userType:"customer",onSuccess:k,onError:w}),e.jsx(As,{userType:"customer",onSuccess:k,onError:w}),e.jsx(Rs,{userType:"customer",onSuccess:k,onError:w})]}),e.jsxs("div",{className:"relative mb-6",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-300 dark:border-gray-600"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-white dark:bg-secondary-800 text-gray-500 dark:text-gray-400",children:"Or register with email"})})]}),e.jsxs("form",{ref:o,className:"space-y-6",onSubmit:m,autoComplete:"on",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"first_name",className:"label",children:"First Name *"}),e.jsx("input",{id:"first_name",name:"first_name",type:"text",autoComplete:"given-name",required:!0,value:s.first_name,onChange:j,className:`input ${c.first_name?"input-error":""}`,placeholder:"John"}),c.first_name&&e.jsx("p",{className:"mt-1 text-sm text-danger-600",children:c.first_name})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"last_name",className:"label",children:"Last Name *"}),e.jsx("input",{id:"last_name",name:"last_name",type:"text",autoComplete:"family-name",required:!0,value:s.last_name,onChange:j,className:`input ${c.last_name?"input-error":""}`,placeholder:"Doe"}),c.last_name&&e.jsx("p",{className:"mt-1 text-sm text-danger-600",children:c.last_name})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"label",children:"Email Address *"}),e.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"username email",required:!0,value:s.email,onChange:j,className:`input ${c.email?"input-error":""}`,placeholder:"john@example.com"}),c.email&&e.jsx("p",{className:"mt-1 text-sm text-danger-600",children:c.email})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone_number",className:"label",children:"Phone Number"}),e.jsx("input",{id:"phone_number",name:"phone_number",type:"tel",autoComplete:"tel",value:s.phone_number,onChange:j,className:"input",placeholder:"+1 (555) 123-4567"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"address",className:"label",children:"Address"}),e.jsx("input",{id:"address",name:"address",type:"text",autoComplete:"street-address",value:s.address,onChange:j,className:"input",placeholder:"123 Main St, City, State"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"label",children:"Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"password",name:"password",type:t?"text":"password",autoComplete:"new-password",required:!0,value:s.password,onChange:j,className:`input pr-10 ${c.password?"input-error":""}`,placeholder:"Create a strong password"}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>r(!t),children:t?e.jsx(we,{className:"h-5 w-5 text-secondary-400"}):e.jsx(Y,{className:"h-5 w-5 text-secondary-400"})})]}),c.password&&e.jsx("p",{className:"mt-1 text-sm text-danger-600",children:c.password})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"label",children:"Confirm Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:n?"text":"password",autoComplete:"new-password",required:!0,value:s.confirmPassword,onChange:j,className:`input pr-10 ${c.confirmPassword?"input-error":""}`,placeholder:"Confirm your password"}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>p(!n),children:n?e.jsx(we,{className:"h-5 w-5 text-secondary-400"}):e.jsx(Y,{className:"h-5 w-5 text-secondary-400"})})]}),c.confirmPassword&&e.jsx("p",{className:"mt-1 text-sm text-danger-600",children:c.confirmPassword})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:u,className:"w-full btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:u?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating account..."]}):"Create Account"})})]}),e.jsx("div",{className:"mt-6",children:e.jsxs("div",{className:"text-center text-sm",children:[e.jsxs("span",{className:"text-secondary-600 dark:text-secondary-400",children:["Already have an account?"," "]}),e.jsx(T,{to:"/login",className:"font-medium text-primary-600 hover:text-primary-500",children:"Sign in"})]})}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("div",{className:"text-xs text-secondary-500 dark:text-secondary-400 space-y-1",children:e.jsxs("p",{children:["By creating an account, you agree to our"," ",e.jsx(T,{to:"/terms",className:"text-primary-600 hover:text-primary-500",children:"Terms of Service"})," ","and"," ",e.jsx(T,{to:"/privacy",className:"text-primary-600 hover:text-primary-500",children:"Privacy Policy"})]})})})]})})]})},ea=()=>e.jsx("div",{className:"min-h-screen bg-secondary-50 dark:bg-secondary-900 flex flex-col justify-center py-12 sm:px-6 lg:px-8 transition-colors duration-200",children:e.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-3xl",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-primary-600 mb-2",children:"OneSoko"}),e.jsx("h2",{className:"text-3xl font-bold text-secondary-900 dark:text-white",children:"Join OneSoko"}),e.jsx("p",{className:"mt-2 text-lg text-secondary-600 dark:text-secondary-400",children:"Choose how you want to get started"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 max-w-4xl mx-auto",children:[e.jsx(T,{to:"/register/customer",className:"group bg-white dark:bg-secondary-800 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 border border-secondary-200 dark:border-secondary-700 overflow-hidden",children:e.jsxs("div",{className:"p-8",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"w-20 h-20 bg-blue-100 dark:bg-blue-900/20 rounded-full flex items-center justify-center group-hover:bg-blue-200 dark:group-hover:bg-blue-900/30 transition-colors duration-300",children:e.jsx(W,{className:"h-10 w-10 text-blue-600 dark:text-blue-400"})})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-2xl font-bold text-secondary-900 dark:text-white mb-4",children:"I'm a Customer"}),e.jsx("p",{className:"text-secondary-600 dark:text-secondary-400 mb-6 text-base leading-relaxed",children:"Shop from local stores, discover amazing products, and enjoy convenient shopping experiences."}),e.jsxs("div",{className:"space-y-3 mb-8",children:[e.jsxs("div",{className:"flex items-center text-secondary-600 dark:text-secondary-400",children:[e.jsx(V,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mr-3 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:"Browse thousands of products"})]}),e.jsxs("div",{className:"flex items-center text-secondary-600 dark:text-secondary-400",children:[e.jsx(ue,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mr-3 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:"Get the best deals and offers"})]}),e.jsxs("div",{className:"flex items-center text-secondary-600 dark:text-secondary-400",children:[e.jsx(J,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mr-3 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:"Support local businesses"})]})]}),e.jsxs("div",{className:"flex items-center justify-center text-blue-600 dark:text-blue-400 font-semibold group-hover:text-blue-700 dark:group-hover:text-blue-300 transition-colors duration-300",children:[e.jsx("span",{children:"Start Shopping"}),e.jsx(os,{className:"h-5 w-5 ml-2 group-hover:translate-x-1 transition-transform duration-300"})]})]})]})}),e.jsx(T,{to:"/register/shop-owner",className:"group bg-white dark:bg-secondary-800 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 border border-secondary-200 dark:border-secondary-700 overflow-hidden",children:e.jsxs("div",{className:"p-8",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"w-20 h-20 bg-green-100 dark:bg-green-900/20 rounded-full flex items-center justify-center group-hover:bg-green-200 dark:group-hover:bg-green-900/30 transition-colors duration-300",children:e.jsx(J,{className:"h-10 w-10 text-green-600 dark:text-green-400"})})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-2xl font-bold text-secondary-900 dark:text-white mb-4",children:"I'm a Shop Owner"}),e.jsx("p",{className:"text-secondary-600 dark:text-secondary-400 mb-6 text-base leading-relaxed",children:"Sell your products online, reach more customers, and grow your business with our platform."}),e.jsxs("div",{className:"space-y-3 mb-8",children:[e.jsxs("div",{className:"flex items-center text-secondary-600 dark:text-secondary-400",children:[e.jsx(J,{className:"h-5 w-5 text-green-600 dark:text-green-400 mr-3 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:"Create your online store"})]}),e.jsxs("div",{className:"flex items-center text-secondary-600 dark:text-secondary-400",children:[e.jsx(V,{className:"h-5 w-5 text-green-600 dark:text-green-400 mr-3 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:"Manage products & inventory"})]}),e.jsxs("div",{className:"flex items-center text-secondary-600 dark:text-secondary-400",children:[e.jsx(ue,{className:"h-5 w-5 text-green-600 dark:text-green-400 mr-3 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:"Track sales & analytics"})]})]}),e.jsxs("div",{className:"flex items-center justify-center text-green-600 dark:text-green-400 font-semibold group-hover:text-green-700 dark:group-hover:text-green-300 transition-colors duration-300",children:[e.jsx("span",{children:"Start Selling"}),e.jsx(os,{className:"h-5 w-5 ml-2 group-hover:translate-x-1 transition-transform duration-300"})]})]})]})})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsxs("p",{className:"text-secondary-600 dark:text-secondary-400",children:["Already have an account?"," ",e.jsx(T,{to:"/login",className:"font-medium text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 transition-colors duration-200",children:"Sign in"})]})}),e.jsx("div",{className:"mt-12 text-center",children:e.jsx("div",{className:"text-xs text-secondary-500 dark:text-secondary-400 space-y-1",children:e.jsxs("p",{children:["By signing up, you agree to our"," ",e.jsx(T,{to:"/terms",className:"text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300",children:"Terms of Service"})," ","and"," ",e.jsx(T,{to:"/privacy",className:"text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300",children:"Privacy Policy"})]})})})]})}),sa="modulepreload",ta=function(s){return"/"+s},hs={},aa=function(i,t,r){let n=Promise.resolve();if(t&&t.length>0){let c=function(v){return Promise.all(v.map(o=>Promise.resolve(o).then(a=>({status:"fulfilled",value:a}),a=>({status:"rejected",reason:a}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),f=u?.nonce||u?.getAttribute("nonce");n=c(t.map(v=>{if(v=ta(v),v in hs)return;hs[v]=!0;const o=v.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${v}"]${a}`))return;const g=document.createElement("link");if(g.rel=o?"stylesheet":sa,o||(g.as="script"),g.crossOrigin="",g.href=v,f&&g.setAttribute("nonce",f),document.head.appendChild(g),o)return new Promise((j,P)=>{g.addEventListener("load",j),g.addEventListener("error",()=>P(new Error(`Unable to preload CSS for ${v}`)))})}))}function p(u){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=u,window.dispatchEvent(f),!f.defaultPrevented)throw u}return n.then(u=>{for(const f of u||[])f.status==="rejected"&&p(f.reason);return i().catch(p)})},ra=()=>{const[s,i]=l.useState({username:"",email:"",password:"",confirmPassword:"",firstName:"",lastName:"",phoneNumber:"",shopName:"",shopDescription:"",shopAddress:"",shopPhone:"",businessLicense:"",taxId:""}),[t,r]=l.useState(!1),[n,p]=l.useState(!1),[u,f]=l.useState(!1),[c,v]=l.useState({}),[o,a]=l.useState(1),g=l.useRef(null),j=X(),{registerShopOwner:P}=z();l.useEffect(()=>{g.current&&is(g.current)},[]),l.useEffect(()=>{if(g.current&&s.password&&s.email){const C=setTimeout(()=>{if(g.current){const h=g.current,$=new FormData(h);$.set("email",s.email),$.set("password",s.password);const y=new CustomEvent("password-updated",{detail:{email:s.email,hasPassword:!0,step:o}});window.dispatchEvent(y)}},500);return()=>clearTimeout(C)}},[s.password,s.email,o]);const m=C=>{const{name:h,value:$}=C.target;i(y=>({...y,[h]:$})),c[h]&&v(y=>({...y,[h]:""}))},k=()=>{const C={};return s.username.trim()?s.username.length<3&&(C.username="Username must be at least 3 characters"):C.username="Username is required",s.email.trim()?/\S+@\S+\.\S+/.test(s.email)||(C.email="Please enter a valid email address"):C.email="Email is required",s.password?s.password.length<8&&(C.password="Password must be at least 8 characters"):C.password="Password is required",s.confirmPassword?s.password!==s.confirmPassword&&(C.confirmPassword="Passwords do not match"):C.confirmPassword="Please confirm your password",s.firstName.trim()||(C.firstName="First name is required"),s.lastName.trim()||(C.lastName="Last name is required"),s.phoneNumber.trim()||(C.phoneNumber="Phone number is required"),v(C),Object.keys(C).length===0},w=()=>{const C={};return s.shopName.trim()||(C.shopName="Shop name is required"),s.shopDescription.trim()||(C.shopDescription="Shop description is required"),s.shopAddress.trim()||(C.shopAddress="Shop address is required"),s.shopPhone.trim()||(C.shopPhone="Shop phone number is required"),v(C),Object.keys(C).length===0},d=()=>{o===1&&k()&&a(2)},x=()=>{o===2&&a(1)},_=async C=>{if(C.preventDefault(),!!w()){f(!0);try{if(await P({email:s.email,password:s.password,first_name:s.firstName,last_name:s.lastName,phone_number:s.phoneNumber,shop_name:s.shopName,shop_description:s.shopDescription,shop_address:s.shopAddress,shop_phone:s.shopPhone}),g.current){Me(g.current);try{const{passwordManagerUtils:h}=await aa(async()=>{const{passwordManagerUtils:$}=await Promise.resolve().then(()=>Jt);return{passwordManagerUtils:$}},void 0);await h.storeCredentials(s.email,s.password)}catch(h){console.log("Credential Management API not available:",h)}}R.success("Shop registration successful! Credentials saved to your password manager."),j("/shop/dashboard")}catch(h){if(console.error("Shop registration error:",h),console.error("Error details:",{message:h.message,response:h.response,request:h.request,code:h.code,config:h.config}),h.response?.data){const $=h.response.data,y={};Object.keys($).forEach(E=>{Array.isArray($[E])?y[E]=$[E][0]:y[E]=$[E]}),v(y),Object.keys(y).some(E=>["username","email","password","firstName","lastName","phoneNumber"].includes(E))&&a(1)}else h.code==="ERR_NETWORK"?R.error("Network error: Cannot connect to backend. Please check if the backend server is running."):h.message?.includes("CORS")?R.error("CORS error: Backend needs CORS configuration for frontend requests."):R.error(`Registration failed: ${h.message||"Please try again."}`)}finally{f(!1)}}};return e.jsxs("div",{className:"min-h-screen bg-secondary-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"sm:mx-auto sm:w-full sm:max-w-2xl",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-primary-600 mb-2",children:"OneSoko"}),e.jsx("h2",{className:"text-2xl font-bold text-secondary-900 mb-2",children:"Become a Shop Owner"}),e.jsx("p",{className:"text-secondary-600",children:"Start selling your products on OneSoko"})]})}),e.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-2xl",children:e.jsxs("div",{className:"flex items-center justify-center mb-8",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${o>=1?"bg-primary-600 text-white":"bg-secondary-300 text-secondary-600"}`,children:"1"}),e.jsx("span",{className:"ml-2 text-sm font-medium text-secondary-600",children:"Personal Info"})]}),e.jsx("div",{className:`mx-4 w-16 h-1 rounded ${o>=2?"bg-primary-600":"bg-secondary-300"}`}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${o>=2?"bg-primary-600 text-white":"bg-secondary-300 text-secondary-600"}`,children:"2"}),e.jsx("span",{className:"ml-2 text-sm font-medium text-secondary-600",children:"Shop Details"})]})]})}),e.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-2xl",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("form",{ref:g,onSubmit:o===2?_:void 0,className:"space-y-6",autoComplete:"on",children:[o===1&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-medium text-secondary-900 mb-4",children:"Personal Information"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"username",className:"label",children:"Username *"}),e.jsx("input",{id:"username",name:"username",type:"text",autoComplete:"username",required:!0,value:s.username,onChange:m,className:c.username?"input-error":"input",placeholder:"Enter your username"}),c.username&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.username})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"label",children:"Email Address *"}),e.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email username",required:!0,value:s.email,onChange:m,className:c.email?"input-error":"input",placeholder:"Enter your email address"}),c.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.email})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"firstName",className:"label",children:"First Name *"}),e.jsx("input",{id:"firstName",name:"firstName",type:"text",autoComplete:"given-name",required:!0,value:s.firstName,onChange:m,className:c.firstName?"input-error":"input",placeholder:"First name"}),c.firstName&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.firstName})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"lastName",className:"label",children:"Last Name *"}),e.jsx("input",{id:"lastName",name:"lastName",type:"text",autoComplete:"family-name",required:!0,value:s.lastName,onChange:m,className:c.lastName?"input-error":"input",placeholder:"Last name"}),c.lastName&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.lastName})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phoneNumber",className:"label",children:"Phone Number *"}),e.jsx("input",{id:"phoneNumber",name:"phoneNumber",type:"tel",autoComplete:"tel",required:!0,value:s.phoneNumber,onChange:m,className:c.phoneNumber?"input-error":"input",placeholder:"Enter your phone number"}),c.phoneNumber&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.phoneNumber})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"label",children:"Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"password",name:"password",type:t?"text":"password",autoComplete:"new-password",required:!0,value:s.password,onChange:m,className:c.password?"input-error pr-10":"input pr-10",placeholder:"Create a strong password"}),e.jsx("button",{type:"button",onClick:()=>r(!t),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:t?e.jsx(we,{className:"h-5 w-5 text-secondary-400"}):e.jsx(Y,{className:"h-5 w-5 text-secondary-400"})})]}),c.password&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.password})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"label",children:"Confirm Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:n?"text":"password",autoComplete:"new-password",required:!0,value:s.confirmPassword,onChange:m,className:c.confirmPassword?"input-error pr-10":"input pr-10",placeholder:"Confirm your password"}),e.jsx("button",{type:"button",onClick:()=>p(!n),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:n?e.jsx(we,{className:"h-5 w-5 text-secondary-400"}):e.jsx(Y,{className:"h-5 w-5 text-secondary-400"})})]}),c.confirmPassword&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.confirmPassword})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"button",onClick:d,className:"btn-primary",children:"Next: Shop Details"})})]}),o===2&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-medium text-secondary-900 mb-4",children:"Shop Information"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"shopName",className:"label",children:"Shop Name *"}),e.jsx("input",{id:"shopName",name:"shopName",type:"text",required:!0,value:s.shopName,onChange:m,className:c.shopName?"input-error":"input",placeholder:"Enter your shop name"}),c.shopName&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.shopName})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"shopDescription",className:"label",children:"Shop Description *"}),e.jsx("textarea",{id:"shopDescription",name:"shopDescription",rows:4,required:!0,value:s.shopDescription,onChange:m,className:c.shopDescription?"input-error":"input",placeholder:"Describe what your shop sells and what makes it special"}),c.shopDescription&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.shopDescription})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"shopAddress",className:"label",children:"Shop Address *"}),e.jsx("textarea",{id:"shopAddress",name:"shopAddress",rows:3,required:!0,value:s.shopAddress,onChange:m,className:c.shopAddress?"input-error":"input",placeholder:"Enter your shop's physical address"}),c.shopAddress&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.shopAddress})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"shopPhone",className:"label",children:"Shop Phone Number *"}),e.jsx("input",{id:"shopPhone",name:"shopPhone",type:"tel",required:!0,value:s.shopPhone,onChange:m,className:c.shopPhone?"input-error":"input",placeholder:"Enter your shop's contact number"}),c.shopPhone&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.shopPhone})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"businessLicense",className:"label",children:"Business License Number (Optional)"}),e.jsx("input",{id:"businessLicense",name:"businessLicense",type:"text",value:s.businessLicense,onChange:m,className:"input",placeholder:"Enter your business license number if available"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"taxId",className:"label",children:"Tax ID (Optional)"}),e.jsx("input",{id:"taxId",name:"taxId",type:"text",value:s.taxId,onChange:m,className:"input",placeholder:"Enter your tax identification number if available"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("button",{type:"button",onClick:x,className:"btn-outline-secondary",children:"Back"}),e.jsx("button",{type:"submit",disabled:u,className:"btn-primary",children:u?"Creating Shop...":"Create Shop"})]})]})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-sm text-secondary-600",children:["Already have an account?"," ",e.jsx(T,{to:"/login",className:"font-medium text-primary-600 hover:text-primary-500",children:"Sign in here"})]})})]})})})]})},na=({shopId:s})=>{const[i,t]=l.useState([]),[r,n]=l.useState(null),[p,u]=l.useState(!0),[f,c]=l.useState(!1),[v,o]=l.useState({rating:5,title:"",review_text:""});l.useEffect(()=>{a(),g()},[s]);const a=async()=>{try{const w=await fetch(`http://127.0.0.1:8000/api/shop-reviews/by_shop/?shop_id=${s}`);if(w.ok){const d=await w.json();t(d.results||d)}}catch(w){console.error("Error fetching reviews:",w)}},g=async()=>{try{const w=await fetch(`http://127.0.0.1:8000/api/shops-with-reviews/${s}/rating_breakdown/`);if(w.ok){const d=await w.json();n(d)}}catch(w){console.error("Error fetching summary:",w)}finally{u(!1)}},j=async w=>{w.preventDefault();try{const d=localStorage.getItem("access_token"),x=await fetch("http://127.0.0.1:8000/api/shop-reviews/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d}`},body:JSON.stringify({...v,shop:s})});if(x.ok)c(!1),o({rating:5,title:"",review_text:""}),a(),g();else{const _=await x.json();alert(_.detail||"Error submitting review")}}catch(d){console.error("Error submitting review:",d),alert("Error submitting review")}},P=async(w,d)=>{try{const x=localStorage.getItem("access_token");(await fetch(`http://127.0.0.1:8000/api/shop-reviews/${w}/toggle_helpful/`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${x}`},body:JSON.stringify({is_helpful:d})})).ok&&a()}catch(x){console.error("Error voting:",x)}},m=(w,d=!1,x)=>e.jsx("div",{className:"flex",children:[1,2,3,4,5].map(_=>e.jsx(Je,{className:`w-5 h-5 ${_<=w?"text-yellow-400 fill-current":"text-gray-300"} ${d?"cursor-pointer hover:text-yellow-400":""}`,onClick:()=>d&&x&&x(_)},_))}),k=(w,d)=>e.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[e.jsxs("span",{className:"w-12",children:[w," star"]}),e.jsx("div",{className:"flex-1 h-2 bg-gray-200 rounded",children:e.jsx("div",{className:"h-2 bg-yellow-400 rounded",style:{width:`${d}%`}})}),e.jsxs("span",{className:"w-8 text-right",children:[d,"%"]})]});return p?e.jsx("div",{className:"text-center py-8",children:"Loading reviews..."}):e.jsxs("div",{className:"space-y-6",children:[r&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Customer Reviews"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl font-bold",children:r.average_rating.toFixed(1)}),m(Math.round(r.average_rating)),e.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:["Based on ",r.total_reviews," reviews"]})]}),e.jsxs("div",{className:"space-y-2",children:[k(5,r.rating_distribution["5_stars"]),k(4,r.rating_distribution["4_stars"]),k(3,r.rating_distribution["3_stars"]),k(2,r.rating_distribution["2_stars"]),k(1,r.rating_distribution["1_star"])]})]})]}),e.jsx("div",{className:"text-center",children:e.jsx("button",{onClick:()=>c(!f),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Write a Review"})}),f&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow",children:[e.jsx("h4",{className:"text-lg font-semibold mb-4",children:"Write Your Review"}),e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Rating"}),m(v.rating,!0,w=>o({...v,rating:w}))]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Title"}),e.jsx("input",{type:"text",value:v.title,onChange:w=>o({...v,title:w.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Summary of your experience",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Review"}),e.jsx("textarea",{value:v.review_text,onChange:w=>o({...v,review_text:w.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:4,placeholder:"Tell others about your experience with this shop",required:!0})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{type:"submit",className:"bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors",children:"Submit Review"}),e.jsx("button",{type:"button",onClick:()=>c(!1),className:"bg-gray-600 text-white px-6 py-2 rounded-lg hover:bg-gray-700 transition-colors",children:"Cancel"})]})]})]}),e.jsx("div",{className:"space-y-4",children:i.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No reviews yet. Be the first to write a review!"}):i.map(w=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-medium",children:w.customer}),w.is_verified_purchase&&e.jsx("span",{className:"bg-green-100 text-green-800 text-xs px-2 py-1 rounded",children:"Verified Purchase"})]}),m(w.rating)]}),e.jsx("span",{className:"text-sm text-gray-500",children:new Date(w.created_at).toLocaleDateString()})]}),w.title&&e.jsx("h5",{className:"font-medium mb-2",children:w.title}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:w.review_text}),w.response&&e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(Ae,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"font-medium text-blue-600",children:"Shop Owner Response"}),e.jsx("span",{className:"text-sm text-gray-500",children:new Date(w.response.created_at).toLocaleDateString()})]}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:w.response.response_text})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{onClick:()=>P(w.reviewId,!0),className:"flex items-center space-x-1 text-sm text-gray-600 hover:text-green-600 transition-colors",children:[e.jsx(lt,{className:"w-4 h-4"}),e.jsxs("span",{children:["Helpful (",w.helpful_votes_count,")"]})]}),e.jsxs("button",{onClick:()=>P(w.reviewId,!1),className:"flex items-center space-x-1 text-sm text-gray-600 hover:text-red-600 transition-colors",children:[e.jsx(it,{className:"w-4 h-4"}),e.jsx("span",{children:"Not Helpful"})]})]})]},w.reviewId))})]})},la=()=>{const[s,i]=l.useState([]),[t,r]=l.useState(null),[n,p]=l.useState(!0),{user:u,userProfile:f,isAuthenticated:c}=z();l.useEffect(()=>{v()},[]);const v=async()=>{try{const o=await fetch("http://127.0.0.1:8000/api/shops/");if(o.ok){const a=await o.json();i(a.results||a),a.results&&a.results.length>0&&r(a.results[0])}}catch(o){console.error("Error fetching shops:",o)}finally{p(!1)}};return n?e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading shops..."})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:"Shop Reviews & Ratings System Demo"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Test the comprehensive review system with ratings, customer feedback, and shop owner responses."})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 mb-6 shadow",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Authentication Status"}),c?e.jsxs("div",{className:"text-green-600",children:["✅ Logged in as: ",u?.username,f?.is_shopowner?" (Shop Owner)":" (Customer)"]}):e.jsx("div",{className:"text-red-600",children:"❌ Not logged in - Please log in to write reviews or respond to them"})]}),s.length>0&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 mb-6 shadow",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Select a Shop to View Reviews"}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(o=>e.jsxs("div",{onClick:()=>r(o),className:`p-4 border rounded-lg cursor-pointer transition-all ${t?.shopId===o.shopId?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 hover:border-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[e.jsx("h4",{className:"font-medium",children:o.name}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:o.location}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Owner: ",o.shopowner]})]},o.shopId))})]}),t?e.jsxs("div",{children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 mb-6 shadow",children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:t.name}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-2",children:t.description}),e.jsxs("p",{className:"text-sm text-gray-500",children:["📍 ",t.location]})]}),e.jsx(na,{shopId:t.shopId})]}):e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:s.length===0?"No shops available":"Select a shop to view its reviews"})})]})})},ia=()=>e.jsx("div",{className:"min-h-screen bg-gray-100 py-12",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8 text-center",children:"Newsletter Subscription Test"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Default Variant"}),e.jsx(Re,{variant:"default"})]}),e.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Minimal Variant"}),e.jsx(Re,{variant:"minimal"})]}),e.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Banner Variant"}),e.jsx(Re,{variant:"banner"})]})]}),e.jsxs("div",{className:"mt-12 bg-blue-50 p-6 rounded-lg",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4 text-blue-900",children:"API Test Information"}),e.jsxs("div",{className:"text-sm text-blue-800 space-y-2",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Endpoint:"})," POST /api/email-subscription/subscribe/"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Payload:"})," ",JSON.stringify({email:"user@example.com",subscription_types:["newsletter","promotions","updates"]},null,2)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Expected Response:"})," Confirmation message and email sent to console"]})]})]}),e.jsxs("div",{className:"mt-8 bg-green-50 p-6 rounded-lg",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4 text-green-900",children:"Features Implemented"}),e.jsxs("ul",{className:"text-sm text-green-800 space-y-1",children:[e.jsx("li",{children:"✅ Email validation and duplicate prevention"}),e.jsx("li",{children:"✅ Confirmation email with HTML template"}),e.jsx("li",{children:"✅ Token-based email confirmation"}),e.jsx("li",{children:"✅ Subscription status tracking"}),e.jsx("li",{children:"✅ Unsubscribe functionality"}),e.jsx("li",{children:"✅ Django admin interface"}),e.jsx("li",{children:"✅ Multiple subscription types"}),e.jsx("li",{children:"✅ Real-time form feedback"})]})]})]})})}),ze=()=>{const{user:s,userProfile:i,isAuthenticated:t}=z(),[r,n]=l.useState(null),[p,u]=l.useState(!1),f=!!(i?.is_shopowner&&t),c=async()=>{if(!(!f||!s))try{u(!0);const g=(await pe.getAll()).find(j=>j.shopowner.id===s.id||j.shopowner.username===s.username);n(g||null)}catch(a){console.error("Error fetching user shop:",a),n(null)}finally{u(!1)}},v=a=>!f||!r?!1:r.shopId===a,o=async()=>{await c()};return l.useEffect(()=>{f?c():n(null)},[f,s]),{userShop:r,isShopOwner:f,isLoadingShop:p,hasShopAccess:v,refreshShopData:o}},_e={getAll:async()=>(await D.get("/products/")).data,getById:async s=>(await D.get(`/products/${s}/`)).data,create:async s=>(await D.post("/products/",s)).data,update:async(s,i)=>(await D.put(`/products/${s}/`,i)).data,delete:async s=>{await D.delete(`/products/${String(s)}/`)},search:async s=>(await D.get(`/products/?search=${encodeURIComponent(s)}`)).data,getByCategory:async s=>(await D.get(`/products/?category=${s}`)).data},Ue={getAll:async()=>(await D.get("/categories/")).data,getById:async s=>(await D.get(`/categories/${s}/`)).data,create:async s=>(await D.post("/categories/",s)).data,update:async(s,i)=>(await D.put(`/categories/${s}/`,i)).data,delete:async s=>{await D.delete(`/categories/${s}/`)}},Es={getAll:async()=>(await D.get("/tags/")).data,create:async s=>(await D.post("/tags/",s)).data},oa=()=>{const{user:s}=z(),{userShop:i,isLoadingShop:t}=ze(),[r,n]=l.useState({totalProducts:0,totalOrders:0,totalRevenue:0,totalCustomers:0,monthlyGrowth:{products:0,orders:0,revenue:0,customers:0}}),[p,u]=l.useState([]),[f]=l.useState([]),[c,v]=l.useState(!0);l.useEffect(()=>{(async()=>{if(!t){v(!0);try{if(i){const g=i.shopId;let j=[];g&&(j=await pe.getProducts(g),u(j.slice(0,5))),n({totalProducts:j.length,totalOrders:0,totalRevenue:0,totalCustomers:0,monthlyGrowth:{products:12,orders:8,revenue:15,customers:5}})}else n({totalProducts:0,totalOrders:0,totalRevenue:0,totalCustomers:0,monthlyGrowth:{products:0,orders:0,revenue:0,customers:0}}),u([])}catch(g){console.error("Error fetching dashboard data:",g),R.error("Failed to load dashboard data")}finally{v(!1)}}})()},[i,t]);const o=async a=>{if(window.confirm("Are you sure you want to delete this product?"))try{await _e.delete(parseInt(a)),u(g=>g.filter(j=>j.productId!==a)),R.success("Product deleted successfully")}catch(g){console.error("Error deleting product:",g),R.error("Failed to delete product")}};return c?e.jsx("div",{className:"flex items-center justify-center min-h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-secondary-800 rounded-lg shadow-sm p-6",children:[e.jsxs("h1",{className:"text-2xl font-bold text-secondary-900 dark:text-white",children:["Welcome back, ",s?.first_name||s?.username,"!"]}),e.jsx("p",{className:"text-secondary-600 dark:text-secondary-400 mt-1",children:i?`Managing ${i.name}`:"Set up your shop to start selling"})]}),e.jsxs("div",{className:"bg-white dark:bg-secondary-800 rounded-lg shadow-sm p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-secondary-900 dark:text-white mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(T,{to:"/shop/products/add",className:"flex items-center justify-center p-4 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[e.jsx(ee,{className:"h-5 w-5 mr-2"}),"Add Product"]}),e.jsxs(T,{to:"/shop/products",className:"flex items-center justify-center p-4 bg-white dark:bg-secondary-700 border border-secondary-300 dark:border-secondary-600 text-secondary-700 dark:text-secondary-300 rounded-lg hover:bg-secondary-50 dark:hover:bg-secondary-600 transition-colors",children:[e.jsx(V,{className:"h-5 w-5 mr-2"}),"Manage Products"]}),e.jsxs(T,{to:"/shop/orders",className:"flex items-center justify-center p-4 bg-white dark:bg-secondary-700 border border-secondary-300 dark:border-secondary-600 text-secondary-700 dark:text-secondary-300 rounded-lg hover:bg-secondary-50 dark:hover:bg-secondary-600 transition-colors",children:[e.jsx(Y,{className:"h-5 w-5 mr-2"}),"View Orders"]}),e.jsxs(T,{to:"/shop/settings",className:"flex items-center justify-center p-4 bg-white dark:bg-secondary-700 border border-secondary-300 dark:border-secondary-600 text-secondary-700 dark:text-secondary-300 rounded-lg hover:bg-secondary-50 dark:hover:bg-secondary-600 transition-colors",children:[e.jsx(ce,{className:"h-5 w-5 mr-2"}),"Shop Settings"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white dark:bg-secondary-800 rounded-lg shadow-sm p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900/20 rounded-lg flex items-center justify-center",children:e.jsx(V,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-secondary-600 dark:text-secondary-400",children:"Total Products"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("p",{className:"text-2xl font-bold text-secondary-900 dark:text-white",children:r.totalProducts}),e.jsxs("div",{className:`ml-2 flex items-center text-xs ${r.monthlyGrowth.products>=0?"text-green-600":"text-red-600"}`,children:[r.monthlyGrowth.products>=0?e.jsx(je,{className:"h-3 w-3 mr-1"}):e.jsx(be,{className:"h-3 w-3 mr-1"}),Math.abs(r.monthlyGrowth.products),"%"]})]})]})]})}),e.jsx("div",{className:"bg-white dark:bg-secondary-800 rounded-lg shadow-sm p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-12 h-12 bg-green-100 dark:bg-green-900/20 rounded-lg flex items-center justify-center",children:e.jsx(re,{className:"h-6 w-6 text-green-600 dark:text-green-400"})})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-secondary-600 dark:text-secondary-400",children:"Total Orders"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("p",{className:"text-2xl font-bold text-secondary-900 dark:text-white",children:r.totalOrders}),e.jsxs("div",{className:`ml-2 flex items-center text-xs ${r.monthlyGrowth.orders>=0?"text-green-600":"text-red-600"}`,children:[r.monthlyGrowth.orders>=0?e.jsx(je,{className:"h-3 w-3 mr-1"}):e.jsx(be,{className:"h-3 w-3 mr-1"}),Math.abs(r.monthlyGrowth.orders),"%"]})]})]})]})}),e.jsx("div",{className:"bg-white dark:bg-secondary-800 rounded-lg shadow-sm p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-12 h-12 bg-yellow-100 dark:bg-yellow-900/20 rounded-lg flex items-center justify-center",children:e.jsx(ue,{className:"h-6 w-6 text-yellow-600 dark:text-yellow-400"})})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-secondary-600 dark:text-secondary-400",children:"Total Revenue"}),e.jsxs("div",{className:"flex items-center",children:[e.jsxs("p",{className:"text-2xl font-bold text-secondary-900 dark:text-white",children:["$",r.totalRevenue.toLocaleString()]}),e.jsxs("div",{className:`ml-2 flex items-center text-xs ${r.monthlyGrowth.revenue>=0?"text-green-600":"text-red-600"}`,children:[r.monthlyGrowth.revenue>=0?e.jsx(je,{className:"h-3 w-3 mr-1"}):e.jsx(be,{className:"h-3 w-3 mr-1"}),Math.abs(r.monthlyGrowth.revenue),"%"]})]})]})]})}),e.jsx("div",{className:"bg-white dark:bg-secondary-800 rounded-lg shadow-sm p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-12 h-12 bg-purple-100 dark:bg-purple-900/20 rounded-lg flex items-center justify-center",children:e.jsx(Ze,{className:"h-6 w-6 text-purple-600 dark:text-purple-400"})})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-secondary-600 dark:text-secondary-400",children:"Total Customers"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("p",{className:"text-2xl font-bold text-secondary-900 dark:text-white",children:r.totalCustomers}),e.jsxs("div",{className:`ml-2 flex items-center text-xs ${r.monthlyGrowth.customers>=0?"text-green-600":"text-red-600"}`,children:[r.monthlyGrowth.customers>=0?e.jsx(je,{className:"h-3 w-3 mr-1"}):e.jsx(be,{className:"h-3 w-3 mr-1"}),Math.abs(r.monthlyGrowth.customers),"%"]})]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-secondary-800 rounded-lg shadow-sm",children:[e.jsx("div",{className:"p-6 border-b border-secondary-200 dark:border-secondary-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-secondary-900 dark:text-white",children:"Recent Products"}),e.jsx(T,{to:"/shop/products",className:"text-sm text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300",children:"View all"})]})}),e.jsx("div",{className:"p-6",children:p.length>0?e.jsx("div",{className:"space-y-4",children:p.map(a=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-secondary-200 dark:bg-secondary-700 rounded-lg flex items-center justify-center",children:a.image?e.jsx("img",{src:a.image,alt:a.name,className:"w-10 h-10 rounded-lg object-cover"}):e.jsx(V,{className:"h-5 w-5 text-secondary-600 dark:text-secondary-400"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-secondary-900 dark:text-white",children:a.name}),e.jsxs("p",{className:"text-sm text-secondary-600 dark:text-secondary-400",children:["$",a.price]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${(a.quantity??a.stock_quantity??0)>10?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":(a.quantity??a.stock_quantity??0)>0?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400":"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400"}`,children:(a.quantity??a.stock_quantity??0)>0?`${a.quantity??a.stock_quantity} in stock`:"Out of stock"}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(T,{to:`/shop/products/edit/${a.productId}`,className:"p-1 text-secondary-400 hover:text-primary-600 dark:hover:text-primary-400",children:e.jsx(ce,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>a.productId&&o(a.productId),className:"p-1 text-secondary-400 hover:text-red-600 dark:hover:text-red-400",children:e.jsx(Pe,{className:"h-4 w-4"})})]})]})]},a.productId))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(V,{className:"mx-auto h-12 w-12 text-secondary-400 dark:text-secondary-600"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-secondary-900 dark:text-white",children:"No products yet"}),e.jsx("p",{className:"mt-1 text-sm text-secondary-500 dark:text-secondary-400",children:"Get started by adding your first product."}),e.jsx("div",{className:"mt-6",children:e.jsxs(T,{to:"/shop/products/add",className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700",children:[e.jsx(ee,{className:"h-4 w-4 mr-2"}),"Add Product"]})})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-secondary-800 rounded-lg shadow-sm",children:[e.jsx("div",{className:"p-6 border-b border-secondary-200 dark:border-secondary-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-secondary-900 dark:text-white",children:"Recent Orders"}),e.jsx(T,{to:"/shop/orders",className:"text-sm text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300",children:"View all"})]})}),e.jsx("div",{className:"p-6",children:f.length>0?e.jsx("div",{className:"space-y-4",children:f.map(a=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-secondary-900 dark:text-white",children:["Order #",a.id]}),e.jsxs("p",{className:"text-sm text-secondary-600 dark:text-secondary-400",children:[a.user.first_name," ",a.user.last_name]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium text-secondary-900 dark:text-white",children:["$",a.total_amount]}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${a.status==="delivered"?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":a.status==="shipped"?"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400":a.status==="confirmed"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400":"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"}`,children:a.status})]})]},a.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(re,{className:"mx-auto h-12 w-12 text-secondary-400 dark:text-secondary-600"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-secondary-900 dark:text-white",children:"No orders yet"}),e.jsx("p",{className:"mt-1 text-sm text-secondary-500 dark:text-secondary-400",children:"Orders will appear here once customers start buying."})]})})]})]})]})},ca=()=>{const{userShop:s,isLoadingShop:i}=ze(),[t,r]=l.useState([]),[n,p]=l.useState([]),[u,f]=l.useState(""),[c,v]=l.useState(""),[o,a]=l.useState("name"),[g,j]=l.useState("desc"),[P,m]=l.useState(!0);l.useEffect(()=>{(async()=>{if(!i){m(!0);try{const _=await Ue.getAll();if(p(_),s){const C=await pe.getProducts(s.shopId);r(C)}else r([])}catch(_){console.error("Error fetching data:",_),R.error("Failed to load products"),p([{id:1,name:"Electronics",description:"Electronic devices",created_at:"2024-01-01",updated_at:"2024-01-01"},{id:2,name:"Clothing",description:"Clothing items",created_at:"2024-01-01",updated_at:"2024-01-01"},{id:3,name:"Books",description:"Books and literature",created_at:"2024-01-01",updated_at:"2024-01-01"}]),r([])}finally{m(!1)}}})()},[s,i]);const k=async x=>{if(window.confirm("Are you sure you want to delete this product? This action cannot be undone."))try{await _e.delete(x),r(_=>_.filter(C=>C.productId!==x)),R.success("Product deleted successfully")}catch(_){console.error("Error deleting product:",_),R.error("Failed to delete product")}},d=[...t.filter(x=>{const _=x.name.toLowerCase().includes(u.toLowerCase())||x.description.toLowerCase().includes(u.toLowerCase()),C=c===""||x.category.id.toString()===c;return _&&C})].sort((x,_)=>{let C,h;switch(o){case"name":C=x.name.toLowerCase(),h=_.name.toLowerCase();break;case"price":C=parseFloat(x.price),h=parseFloat(_.price);break;case"quantity":C=x.quantity,h=_.quantity;break;default:return 0}return g==="asc"?C>h?1:-1:C<h?1:-1});return e.jsxs("div",{className:"min-h-screen bg-secondary-50",children:[e.jsx("div",{className:"bg-white shadow",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-secondary-900",children:"Manage Products"}),e.jsx("p",{className:"mt-1 text-sm text-secondary-600",children:"Add, edit, and manage your shop's products"})]}),e.jsxs(T,{to:"/shop/products/new",className:"btn-primary",children:[e.jsx(ee,{className:"h-4 w-4 mr-2"}),"Add Product"]})]})})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-6 grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsxs("div",{className:"relative",children:[e.jsx(K,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-secondary-400"}),e.jsx("input",{type:"text",placeholder:"Search products...",value:u,onChange:x=>f(x.target.value),className:"input pl-9"})]})}),e.jsx("div",{children:e.jsxs("select",{value:c,onChange:x=>v(x.target.value),className:"input",children:[e.jsx("option",{value:"",children:"All Categories"}),n.map(x=>e.jsx("option",{value:x.id,children:x.name},x.id))]})}),e.jsx("div",{children:e.jsxs("select",{value:`${o}-${g}`,onChange:x=>{const[_,C]=x.target.value.split("-");a(_),j(C)},className:"input",children:[e.jsx("option",{value:"name-asc",children:"Name A-Z"}),e.jsx("option",{value:"name-desc",children:"Name Z-A"}),e.jsx("option",{value:"price-asc",children:"Price Low-High"}),e.jsx("option",{value:"price-desc",children:"Price High-Low"}),e.jsx("option",{value:"quantity-asc",children:"Stock Low-High"}),e.jsx("option",{value:"quantity-desc",children:"Stock High-Low"})]})})]}),P?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"spinner w-8 h-8 mx-auto"}),e.jsx("p",{className:"mt-2 text-sm text-secondary-600",children:"Loading products..."})]}):d.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.map(x=>e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body",children:[e.jsx("div",{className:"w-full h-48 bg-secondary-200 rounded-lg mb-4 flex items-center justify-center",children:x.image?e.jsx("img",{src:x.image,alt:x.name,className:"w-full h-full object-cover rounded-lg"}):e.jsx("div",{className:"text-secondary-400",children:e.jsx("svg",{className:"w-12 h-12",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-medium text-secondary-900 mb-2",children:x.name}),e.jsx("p",{className:"text-sm text-secondary-600 mb-3 line-clamp-2",children:x.description}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("span",{className:"text-lg font-bold text-primary-600",children:["$",x.price]}),e.jsx("span",{className:`badge ${x.quantity>10?"badge-success":x.quantity>0?"badge-warning":"badge-danger"}`,children:x.quantity>0?`${x.quantity} in stock`:"Out of stock"})]}),e.jsxs("div",{className:"text-xs text-secondary-500 mb-4",children:["Category: ",x.category.name]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(T,{to:`/products/${x.productId}`,target:"_blank",className:"flex-1 btn-outline-secondary text-xs py-2",children:[e.jsx(Y,{className:"h-3 w-3 mr-1"}),"View"]}),e.jsxs(T,{to:`/shop/products/${x.productId}/edit`,className:"flex-1 btn-secondary text-xs py-2",children:[e.jsx(ce,{className:"h-3 w-3 mr-1"}),"Edit"]}),e.jsxs("button",{onClick:()=>k(x.productId),className:"flex-1 btn-danger text-xs py-2",children:[e.jsx(Pe,{className:"h-3 w-3 mr-1"}),"Delete"]})]})]})},x.productId))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-24 h-24 mx-auto bg-secondary-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(ve,{className:"w-12 h-12 text-secondary-400"})}),e.jsx("h3",{className:"text-lg font-medium text-secondary-900 mb-2",children:u||c?"No products found":"No products yet"}),e.jsx("p",{className:"text-secondary-600 mb-6",children:u||c?"Try adjusting your search or filter criteria.":"Get started by adding your first product to your shop."}),!u&&!c&&e.jsxs(T,{to:"/shop/products/new",className:"btn-primary",children:[e.jsx(ee,{className:"h-4 w-4 mr-2"}),"Add Your First Product"]})]})]})]})},da=()=>{const{user:s}=z(),{userShop:i,isLoadingShop:t}=ze(),[r,n]=l.useState({name:"",description:"",price:"",stock_quantity:"",category_id:"",tags:[],image_url:"",variants:[]}),[p,u]=l.useState([]),[f,c]=l.useState([]),[v,o]=l.useState(""),[a,g]=l.useState(!1),[j,P]=l.useState({}),[m,k]=l.useState(null),[w,d]=l.useState(""),x=X();l.useEffect(()=>{(async()=>{try{const N=await Ue.getAll();u(N);const F=await Es.getAll();c(F)}catch(N){console.error("Error fetching data:",N),R.error("Failed to load categories and tags"),u([{id:1,name:"Electronics",description:"Electronic devices",created_at:"2024-01-01",updated_at:"2024-01-01"},{id:2,name:"Clothing",description:"Clothing items",created_at:"2024-01-01",updated_at:"2024-01-01"},{id:3,name:"Books",description:"Books and literature",created_at:"2024-01-01",updated_at:"2024-01-01"},{id:4,name:"Home & Garden",description:"Home and garden items",created_at:"2024-01-01",updated_at:"2024-01-01"},{id:5,name:"Sports",description:"Sports equipment",created_at:"2024-01-01",updated_at:"2024-01-01"}]),c([{id:1,name:"new"},{id:2,name:"popular"},{id:3,name:"sale"},{id:4,name:"featured"},{id:5,name:"bestseller"}])}})()},[]);const _=b=>{const{name:N,value:F}=b.target;n(A=>({...A,[N]:F})),j[N]&&P(A=>({...A,[N]:""}))},C=b=>{const N=b.target.files?.[0];if(N){if(!N.type.startsWith("image/")){P(A=>({...A,image:"Please select a valid image file"}));return}if(N.size>5*1024*1024){P(A=>({...A,image:"Image size must be less than 5MB"}));return}k(N);const F=new FileReader;F.onload=A=>{d(A.target?.result)},F.readAsDataURL(N),P(A=>({...A,image:""}))}},h=()=>{k(null),d(""),n(N=>({...N,image_url:""}));const b=document.getElementById("image-upload");b&&(b.value="")},$=async b=>{const N=new FormData;N.append("file",b),N.append("upload_preset","your_upload_preset");try{return await new Promise(F=>setTimeout(F,1e3)),`https://example.com/uploads/${b.name}`}catch{throw new Error("Failed to upload image")}},y=()=>{v.trim()&&!r.tags.includes(v.trim())&&(n(b=>({...b,tags:[...b.tags,v.trim()]})),o(""))},E=b=>{n(N=>({...N,tags:N.tags.filter(F=>F!==b)}))},S=()=>{n(b=>({...b,variants:[...b.variants,{name:"",value:"",price_adjustment:"0",stock_quantity:"0"}]}))},B=b=>{n(N=>({...N,variants:N.variants.filter((F,A)=>A!==b)}))},H=(b,N,F)=>{n(A=>({...A,variants:A.variants.map((O,I)=>I===b?{...O,[N]:F}:O)}))},L=()=>{const b={};return r.name.trim()||(b.name="Product name is required"),r.description.trim()||(b.description="Product description is required"),r.price?parseFloat(r.price)<=0&&(b.price="Price must be greater than 0"):b.price="Price is required",r.stock_quantity?parseInt(r.stock_quantity)<0&&(b.stock_quantity="Stock quantity cannot be negative"):b.stock_quantity="Stock quantity is required",r.category_id||(b.category_id="Please select a category"),P(b),Object.keys(b).length===0},M=async b=>{if(b.preventDefault(),!!L()){if(t){R.error("Loading shop information. Please wait and try again.");return}if(!i){R.error("Shop information not loaded. Please refresh and try again.");return}g(!0);try{let N=r.image_url;if(m)try{N=await $(m)}catch{R.error("Failed to upload image. Please try again."),g(!1);return}const F={name:r.name,description:r.description,price:r.price,quantity:parseInt(r.stock_quantity),category:parseInt(r.category_id),tag_names:r.tags,image_url:N||void 0,variants:r.variants.filter(A=>A.name&&A.value).map(A=>({name:A.name,value:A.value,price_adjustment:A.price_adjustment,stock_quantity:parseInt(A.stock_quantity)||0}))};console.log("Creating product for shop:",i?.shopId,"Shop object:",i,"Product data:",F),await pe.addProduct(i.shopId,F),R.success("Product added to your shop successfully!"),x("/shop/products")}catch(N){console.error("Product creation error:",N),R.error("Failed to add product to shop. Please try again.")}finally{g(!1)}}};return e.jsxs("div",{className:"min-h-screen bg-secondary-50",children:[e.jsx("div",{className:"bg-white shadow",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"py-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(T,{to:"/shop/products",className:"mr-4 p-2 text-secondary-600 hover:text-secondary-900",children:e.jsx(ie,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-secondary-900",children:"Add New Product"}),e.jsx("p",{className:"mt-1 text-sm text-secondary-600",children:"Create a new product for your shop"})]})]})})})}),e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("form",{onSubmit:M,className:"space-y-8",children:[e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"text-lg font-medium text-secondary-900",children:"Basic Information"})}),e.jsxs("div",{className:"card-body space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"label",children:"Product Name *"}),e.jsx("input",{id:"name",name:"name",type:"text",required:!0,value:r.name,onChange:_,className:j.name?"input-error":"input",placeholder:"Enter product name"}),j.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:j.name})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"label",children:"Description *"}),e.jsx("textarea",{id:"description",name:"description",rows:4,required:!0,value:r.description,onChange:_,className:j.description?"input-error":"input",placeholder:"Describe your product in detail"}),j.description&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:j.description})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"price",className:"label",children:"Price ($) *"}),e.jsx("input",{id:"price",name:"price",type:"number",step:"0.01",min:"0",required:!0,value:r.price,onChange:_,className:j.price?"input-error":"input",placeholder:"0.00"}),j.price&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:j.price})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"stock_quantity",className:"label",children:"Stock Quantity *"}),e.jsx("input",{id:"stock_quantity",name:"stock_quantity",type:"number",min:"0",required:!0,value:r.stock_quantity,onChange:_,className:j.stock_quantity?"input-error":"input",placeholder:"0"}),j.stock_quantity&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:j.stock_quantity})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"category_id",className:"label",children:"Category *"}),e.jsxs("select",{id:"category_id",name:"category_id",required:!0,value:r.category_id,onChange:_,className:j.category_id?"input-error":"input",children:[e.jsx("option",{value:"",children:"Select a category"}),p.map(b=>e.jsx("option",{value:b.id,children:b.name},b.id))]}),j.category_id&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:j.category_id})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"text-lg font-medium text-secondary-900",children:"Product Images"})}),e.jsxs("div",{className:"card-body space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"image-upload",className:"label",children:"Upload Product Image"}),e.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-secondary-300 border-dashed rounded-md hover:border-primary-400 transition-colors",children:e.jsxs("div",{className:"space-y-1 text-center",children:[w?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:w,alt:"Product preview",className:"mx-auto h-32 w-32 object-cover rounded-lg"}),e.jsx("button",{type:"button",onClick:h,className:"absolute -top-2 -right-2 bg-red-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hover:bg-red-700",children:"×"})]}):e.jsx(ns,{className:"mx-auto h-12 w-12 text-secondary-400"}),e.jsxs("div",{className:"flex text-sm text-secondary-600",children:[e.jsxs("label",{htmlFor:"image-upload",className:"relative cursor-pointer bg-white rounded-md font-medium text-primary-600 hover:text-primary-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-primary-500",children:[e.jsx("span",{children:w?"Change image":"Upload a file"}),e.jsx("input",{id:"image-upload",name:"image-upload",type:"file",accept:"image/*",className:"sr-only",onChange:C})]}),e.jsx("p",{className:"pl-1",children:"or drag and drop"})]}),e.jsx("p",{className:"text-xs text-secondary-500",children:"PNG, JPG, GIF up to 5MB"})]})}),j.image&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:j.image})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-secondary-300"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-white text-secondary-500",children:"Or provide image URL"})})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"image_url",className:"label",children:"Image URL (Optional)"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{id:"image_url",name:"image_url",type:"url",value:r.image_url,onChange:b=>{_(b),b.target.value&&(d(b.target.value),k(null))},className:"input",placeholder:"https://example.com/image.jpg",disabled:!!m})}),r.image_url&&!m&&e.jsx("div",{className:"w-16 h-16 bg-secondary-200 rounded-lg overflow-hidden",children:e.jsx("img",{src:r.image_url,alt:"Preview",className:"w-full h-full object-cover",onError:b=>{b.target.style.display="none"}})})]}),e.jsx("p",{className:"mt-1 text-sm text-secondary-600",children:m?"File upload takes priority over URL input":"Enter a direct link to your product image, or upload a file above"})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"text-lg font-medium text-secondary-900",children:"Tags (Optional)"})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"text",value:v,onChange:b=>o(b.target.value),onKeyPress:b=>b.key==="Enter"&&(b.preventDefault(),y()),className:"input flex-1",placeholder:"Add a tag"}),e.jsx("button",{type:"button",onClick:y,className:"btn-secondary",children:"Add"})]}),r.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:r.tags.map(b=>e.jsxs("span",{className:"badge badge-primary flex items-center space-x-1",children:[e.jsx("span",{children:b}),e.jsx("button",{type:"button",onClick:()=>E(b),className:"text-primary-600 hover:text-primary-800",children:"×"})]},b))}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-secondary-600 mb-2",children:"Suggested tags:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:f.filter(b=>!r.tags.includes(b.name)).map(b=>e.jsx("button",{type:"button",onClick:()=>n(N=>({...N,tags:[...N.tags,b.name]})),className:"badge badge-secondary hover:badge-primary transition-colors",children:b.name},b.id))})]})]})})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-secondary-900",children:"Product Variants (Optional)"}),e.jsx("button",{type:"button",onClick:S,className:"btn-secondary btn-sm",children:"Add Variant"})]})}),e.jsx("div",{className:"card-body",children:r.variants.length>0?e.jsx("div",{className:"space-y-4",children:r.variants.map((b,N)=>e.jsxs("div",{className:"border border-secondary-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h4",{className:"text-sm font-medium text-secondary-900",children:["Variant ",N+1]}),e.jsx("button",{type:"button",onClick:()=>B(N),className:"text-red-600 hover:text-red-800",children:"Remove"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Variant Name"}),e.jsx("input",{type:"text",value:b.name,onChange:F=>H(N,"name",F.target.value),className:"input",placeholder:"Size, Color, etc."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Value"}),e.jsx("input",{type:"text",value:b.value,onChange:F=>H(N,"value",F.target.value),className:"input",placeholder:"Large, Red, etc."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Price Adjustment ($)"}),e.jsx("input",{type:"number",step:"0.01",value:b.price_adjustment,onChange:F=>H(N,"price_adjustment",F.target.value),className:"input",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Stock"}),e.jsx("input",{type:"number",min:"0",value:b.stock_quantity,onChange:F=>H(N,"stock_quantity",F.target.value),className:"input",placeholder:"0"})]})]})]},N))}):e.jsx("p",{className:"text-sm text-secondary-600",children:"Add variants if your product comes in different sizes, colors, or other variations."})})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-4",children:[e.jsx(T,{to:"/shop/products",className:"btn-outline-secondary",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:a||t||!i,className:"btn-primary",children:a?"Creating Product...":t?"Loading Shop...":i?"Create Product":"Shop Not Found"})]})]})})]})},ma=()=>{const{id:s}=Fe(),i=X(),[t,r]=l.useState(null),[n,p]=l.useState({name:"",description:"",price:"",stock_quantity:"",category_id:"",tags:[],image_url:"",variants:[]}),[u,f]=l.useState([]),[c,v]=l.useState([]),[o,a]=l.useState(""),[g,j]=l.useState(!0),[P,m]=l.useState(!1),[k,w]=l.useState({}),[d,x]=l.useState(null),[_,C]=l.useState("");l.useEffect(()=>{(async()=>{j(!0);try{const[A,O]=await Promise.all([Ue.getAll(),Es.getAll()]);if(f(A),v(O),s){const I=await _e.getById(parseInt(s));r(I),p({name:I.name,description:I.description,price:I.price,stock_quantity:I.stock_quantity.toString(),category_id:I.category.id.toString(),tags:I.tags.map(G=>G.name),image_url:I.image_url||"",variants:I.variants.map(G=>({id:G.id,name:G.name,value:G.value,price_adjustment:G.price_adjustment||"0",stock_quantity:G.stock_quantity?.toString()||"0"}))}),I.image_url&&C(I.image_url)}}catch(A){console.error("Error fetching data:",A),R.error("Failed to load product data"),f([{id:1,name:"Electronics",description:"Electronic devices",created_at:"2024-01-01",updated_at:"2024-01-01"},{id:2,name:"Clothing",description:"Clothing items",created_at:"2024-01-01",updated_at:"2024-01-01"},{id:3,name:"Books",description:"Books and literature",created_at:"2024-01-01",updated_at:"2024-01-01"},{id:4,name:"Home & Garden",description:"Home and garden items",created_at:"2024-01-01",updated_at:"2024-01-01"},{id:5,name:"Sports",description:"Sports equipment",created_at:"2024-01-01",updated_at:"2024-01-01"}]),v([{id:1,name:"new"},{id:2,name:"popular"},{id:3,name:"sale"},{id:4,name:"featured"},{id:5,name:"bestseller"}]),s&&i("/shop/products")}finally{j(!1)}})()},[s,i]);const h=F=>{const{name:A,value:O}=F.target;p(I=>({...I,[A]:O})),k[A]&&w(I=>({...I,[A]:""}))},$=F=>{const A=F.target.files?.[0];if(A){if(!A.type.startsWith("image/")){w(I=>({...I,image:"Please select a valid image file"}));return}if(A.size>5*1024*1024){w(I=>({...I,image:"Image size must be less than 5MB"}));return}x(A);const O=new FileReader;O.onload=I=>{C(I.target?.result)},O.readAsDataURL(A),w(I=>({...I,image:""}))}},y=()=>{x(null),C(""),p(A=>({...A,image_url:""}));const F=document.getElementById("image-upload");F&&(F.value="")},E=async F=>{const A=new FormData;A.append("file",F),A.append("upload_preset","your_upload_preset");try{return await new Promise(O=>setTimeout(O,1e3)),`https://example.com/uploads/${F.name}`}catch(O){throw console.error("Image upload error:",O),new Error("Failed to upload image")}},S=()=>{o.trim()&&!n.tags.includes(o.trim())&&(p(F=>({...F,tags:[...F.tags,o.trim()]})),a(""))},B=F=>{p(A=>({...A,tags:A.tags.filter(O=>O!==F)}))},H=()=>{p(F=>({...F,variants:[...F.variants,{name:"",value:"",price_adjustment:"0",stock_quantity:"0"}]}))},L=F=>{p(A=>({...A,variants:A.variants.filter((O,I)=>I!==F)}))},M=(F,A,O)=>{p(I=>({...I,variants:I.variants.map((G,Is)=>Is===F?{...G,[A]:O}:G)}))},b=()=>{const F={};return n.name.trim()||(F.name="Product name is required"),n.description.trim()||(F.description="Product description is required"),n.price?parseFloat(n.price)<=0&&(F.price="Price must be greater than 0"):F.price="Price is required",n.stock_quantity?parseInt(n.stock_quantity)<0&&(F.stock_quantity="Stock quantity cannot be negative"):F.stock_quantity="Stock quantity is required",n.category_id||(F.category_id="Please select a category"),w(F),Object.keys(F).length===0},N=async F=>{if(F.preventDefault(),!!b()){m(!0);try{let A=n.image_url;if(d)try{A=await E(d)}catch{R.error("Failed to upload image. Please try again."),m(!1);return}const O={name:n.name,description:n.description,price:n.price,stock_quantity:parseInt(n.stock_quantity),category:parseInt(n.category_id),tag_names:n.tags,image_url:A||void 0,variants:n.variants.filter(I=>I.name&&I.value).map(I=>({id:I.id,name:I.name,value:I.value,price_adjustment:I.price_adjustment,stock_quantity:parseInt(I.stock_quantity)||0}))};console.log("Updating product:",O),await _e.update(parseInt(s),O),R.success("Product updated successfully!"),i("/shop/products")}catch(A){console.error("Product update error:",A),R.error("Failed to update product. Please try again.")}finally{m(!1)}}};return g?e.jsx("div",{className:"min-h-screen bg-secondary-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"spinner w-8 h-8 mx-auto"}),e.jsx("p",{className:"mt-2 text-sm text-secondary-600",children:"Loading product..."})]})}):t?e.jsxs("div",{className:"min-h-screen bg-secondary-50",children:[e.jsx("div",{className:"bg-white shadow",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"py-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(T,{to:"/shop/products",className:"mr-4 p-2 text-secondary-600 hover:text-secondary-900",children:e.jsx(ie,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-secondary-900",children:"Edit Product"}),e.jsx("p",{className:"mt-1 text-sm text-secondary-600",children:"Update your product information"})]})]})})})}),e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("form",{onSubmit:N,className:"space-y-8",children:[e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"text-lg font-medium text-secondary-900",children:"Basic Information"})}),e.jsxs("div",{className:"card-body space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"label",children:"Product Name *"}),e.jsx("input",{id:"name",name:"name",type:"text",required:!0,value:n.name,onChange:h,className:k.name?"input-error":"input",placeholder:"Enter product name"}),k.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:k.name})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"label",children:"Description *"}),e.jsx("textarea",{id:"description",name:"description",rows:4,required:!0,value:n.description,onChange:h,className:k.description?"input-error":"input",placeholder:"Describe your product in detail"}),k.description&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:k.description})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"price",className:"label",children:"Price ($) *"}),e.jsx("input",{id:"price",name:"price",type:"number",step:"0.01",min:"0",required:!0,value:n.price,onChange:h,className:k.price?"input-error":"input",placeholder:"0.00"}),k.price&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:k.price})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"stock_quantity",className:"label",children:"Stock Quantity *"}),e.jsx("input",{id:"stock_quantity",name:"stock_quantity",type:"number",min:"0",required:!0,value:n.stock_quantity,onChange:h,className:k.stock_quantity?"input-error":"input",placeholder:"0"}),k.stock_quantity&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:k.stock_quantity})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"category_id",className:"label",children:"Category *"}),e.jsxs("select",{id:"category_id",name:"category_id",required:!0,value:n.category_id,onChange:h,className:k.category_id?"input-error":"input",children:[e.jsx("option",{value:"",children:"Select a category"}),u.map(F=>e.jsx("option",{value:F.id,children:F.name},F.id))]}),k.category_id&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:k.category_id})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"text-lg font-medium text-secondary-900",children:"Product Images"})}),e.jsxs("div",{className:"card-body space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"image-upload",className:"label",children:"Upload Product Image"}),e.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-secondary-300 border-dashed rounded-md hover:border-primary-400 transition-colors",children:e.jsxs("div",{className:"space-y-1 text-center",children:[_?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:_,alt:"Product preview",className:"mx-auto h-32 w-32 object-cover rounded-lg"}),e.jsx("button",{type:"button",onClick:y,className:"absolute -top-2 -right-2 bg-red-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hover:bg-red-700",children:"×"})]}):e.jsx(ns,{className:"mx-auto h-12 w-12 text-secondary-400"}),e.jsxs("div",{className:"flex text-sm text-secondary-600",children:[e.jsxs("label",{htmlFor:"image-upload",className:"relative cursor-pointer bg-white rounded-md font-medium text-primary-600 hover:text-primary-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-primary-500",children:[e.jsx("span",{children:_?"Change image":"Upload a file"}),e.jsx("input",{id:"image-upload",name:"image-upload",type:"file",accept:"image/*",className:"sr-only",onChange:$})]}),e.jsx("p",{className:"pl-1",children:"or drag and drop"})]}),e.jsx("p",{className:"text-xs text-secondary-500",children:"PNG, JPG, GIF up to 5MB"})]})}),k.image&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:k.image})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-secondary-300"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-white text-secondary-500",children:"Or provide image URL"})})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"image_url",className:"label",children:"Image URL (Optional)"}),e.jsx("input",{id:"image_url",name:"image_url",type:"url",value:n.image_url,onChange:F=>{h(F),F.target.value&&(C(F.target.value),x(null))},className:"input",placeholder:"https://example.com/image.jpg",disabled:!!d}),e.jsx("p",{className:"mt-1 text-sm text-secondary-600",children:d?"File upload takes priority over URL input":"Enter a direct link to your product image, or upload a file above"})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"text-lg font-medium text-secondary-900",children:"Tags (Optional)"})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"text",value:o,onChange:F=>a(F.target.value),onKeyPress:F=>F.key==="Enter"&&(F.preventDefault(),S()),className:"input flex-1",placeholder:"Add a tag"}),e.jsx("button",{type:"button",onClick:S,className:"btn-secondary",children:"Add"})]}),n.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:n.tags.map(F=>e.jsxs("span",{className:"badge badge-primary flex items-center space-x-1",children:[e.jsx("span",{children:F}),e.jsx("button",{type:"button",onClick:()=>B(F),className:"text-primary-600 hover:text-primary-800",children:"×"})]},F))}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-secondary-600 mb-2",children:"Suggested tags:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:c.filter(F=>!n.tags.includes(F.name)).map(F=>e.jsx("button",{type:"button",onClick:()=>p(A=>({...A,tags:[...A.tags,F.name]})),className:"badge badge-secondary hover:badge-primary transition-colors",children:F.name},F.id))})]})]})})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-secondary-900",children:"Product Variants (Optional)"}),e.jsx("button",{type:"button",onClick:H,className:"btn-secondary btn-sm",children:"Add Variant"})]})}),e.jsx("div",{className:"card-body",children:n.variants.length>0?e.jsx("div",{className:"space-y-4",children:n.variants.map((F,A)=>e.jsxs("div",{className:"border border-secondary-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h4",{className:"text-sm font-medium text-secondary-900",children:["Variant ",A+1]}),e.jsx("button",{type:"button",onClick:()=>L(A),className:"text-red-600 hover:text-red-800",children:"Remove"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Variant Name"}),e.jsx("input",{type:"text",value:F.name,onChange:O=>M(A,"name",O.target.value),className:"input",placeholder:"Size, Color, etc."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Value"}),e.jsx("input",{type:"text",value:F.value,onChange:O=>M(A,"value",O.target.value),className:"input",placeholder:"Large, Red, etc."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Price Adjustment ($)"}),e.jsx("input",{type:"number",step:"0.01",value:F.price_adjustment,onChange:O=>M(A,"price_adjustment",O.target.value),className:"input",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Stock"}),e.jsx("input",{type:"number",min:"0",value:F.stock_quantity,onChange:O=>M(A,"stock_quantity",O.target.value),className:"input",placeholder:"0"})]})]})]},A))}):e.jsx("p",{className:"text-sm text-secondary-600",children:"Add variants if your product comes in different sizes, colors, or other variations."})})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-4",children:[e.jsx(T,{to:"/shop/products",className:"btn-outline-secondary",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:P,className:"btn-primary",children:P?"Updating Product...":"Update Product"})]})]})})]}):e.jsx("div",{className:"min-h-screen bg-secondary-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-xl font-semibold text-secondary-900",children:"Product not found"}),e.jsx(T,{to:"/shop/products",className:"mt-4 btn-primary",children:"Back to Products"})]})})},xa=()=>{const[s,i]=l.useState(null),[t,r]=l.useState(!0),[n,p]=l.useState(!1),[u,f]=l.useState(!1),{user:c,accessToken:v}=z(),[o,a]=l.useState({name:"",description:"",location:"",phone:"",email:"",social_link:""});l.useEffect(()=>{g()},[]);const g=async()=>{try{const k=await fetch("http://127.0.0.1:8000/api/shops/",{headers:{Authorization:`Bearer ${v}`}});if(k.ok){const d=(await k.json()).results?.find(x=>x.shopowner.id===c?.id);d&&(i(d),a({name:d.name||"",description:d.description||"",location:d.location||"",phone:d.phone||"",email:d.email||"",social_link:d.social_link||""}))}}catch(k){console.error("Error fetching shop data:",k),se.error("Failed to load shop data")}finally{r(!1)}},j=k=>{const{name:w,value:d}=k.target;a(x=>({...x,[w]:d}))},P=async k=>{const w=k.target.files?.[0];if(!(!w||!s)){if(!w.type.startsWith("image/")){se.error("Please select an image file");return}if(w.size>5*1024*1024){se.error("Image size should be less than 5MB");return}f(!0);try{const d=new FormData;d.append("logo",w);const x=await fetch(`http://127.0.0.1:8000/api/shops/${s.shopId}/`,{method:"PATCH",headers:{Authorization:`Bearer ${v}`},body:d});if(x.ok){const _=await x.json();i(_),se.success("Logo uploaded successfully!")}else se.error("Failed to upload logo")}catch(d){console.error("Error uploading logo:",d),se.error("Failed to upload logo")}finally{f(!1)}}},m=async k=>{if(k.preventDefault(),!!s){p(!0);try{const w=await fetch(`http://127.0.0.1:8000/api/shops/${s.shopId}/`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${v}`},body:JSON.stringify(o)});if(w.ok){const d=await w.json();i(d),se.success("Shop settings updated successfully!")}else se.error("Failed to update shop settings")}catch(w){console.error("Error updating shop:",w),se.error("Failed to update shop settings")}finally{p(!1)}}};return t?e.jsx("div",{className:"min-h-screen bg-secondary-50 py-8 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),e.jsx("p",{className:"text-secondary-600",children:"Loading shop settings..."})]})}):s?e.jsx("div",{className:"min-h-screen bg-secondary-50 py-8",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"bg-white shadow rounded-lg",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-secondary-200",children:[e.jsx("h1",{className:"text-2xl font-bold text-secondary-900",children:"Shop Settings"}),e.jsx("p",{className:"text-secondary-600 mt-1",children:"Manage your shop information and branding"})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-lg font-medium text-secondary-900 mb-4",children:"Shop Logo"}),e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsx("div",{className:"w-24 h-24 bg-secondary-200 rounded-lg overflow-hidden flex items-center justify-center",children:s.logo_url?e.jsx("img",{src:s.logo_url,alt:s.name,className:"w-full h-full object-cover"}):e.jsx(J,{className:"w-12 h-12 text-secondary-400"})}),e.jsxs("div",{children:[e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"sr-only",children:"Choose logo"}),e.jsx("input",{type:"file",accept:"image/*",onChange:P,disabled:u,className:`block w-full text-sm text-secondary-500
                        file:mr-4 file:py-2 file:px-4
                        file:rounded-md file:border-0
                        file:text-sm file:font-medium
                        file:bg-primary-50 file:text-primary-700
                        hover:file:bg-primary-100
                        disabled:opacity-50 disabled:cursor-not-allowed`})]}),e.jsx("p",{className:"text-sm text-secondary-500 mt-1",children:u?"Uploading...":"PNG, JPG up to 5MB"})]})]})]}),e.jsxs("form",{onSubmit:m,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-secondary-700 mb-2",children:"Shop Name *"}),e.jsx("input",{type:"text",id:"name",name:"name",value:o.name,onChange:j,required:!0,className:"w-full px-3 py-2 border border-secondary-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"location",className:"block text-sm font-medium text-secondary-700 mb-2",children:"Location *"}),e.jsx("input",{type:"text",id:"location",name:"location",value:o.location,onChange:j,required:!0,className:"w-full px-3 py-2 border border-secondary-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-secondary-700 mb-2",children:"Phone Number"}),e.jsx("input",{type:"tel",id:"phone",name:"phone",value:o.phone,onChange:j,className:"w-full px-3 py-2 border border-secondary-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-secondary-700 mb-2",children:"Email Address"}),e.jsx("input",{type:"email",id:"email",name:"email",value:o.email,onChange:j,className:"w-full px-3 py-2 border border-secondary-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-secondary-700 mb-2",children:"Shop Description"}),e.jsx("textarea",{id:"description",name:"description",rows:4,value:o.description,onChange:j,className:"w-full px-3 py-2 border border-secondary-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Tell customers about your shop..."})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"social_link",className:"block text-sm font-medium text-secondary-700 mb-2",children:"Social Media Link"}),e.jsx("input",{type:"url",id:"social_link",name:"social_link",value:o.social_link,onChange:j,placeholder:"https://facebook.com/yourshop",className:"w-full px-3 py-2 border border-secondary-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",disabled:n,className:"px-6 py-2 bg-primary-600 text-white font-medium rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:n?"Saving...":"Save Changes"})})]})]})]})})}):e.jsx("div",{className:"min-h-screen bg-secondary-50 py-8 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(J,{className:"w-16 h-16 text-secondary-400 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-secondary-900 mb-2",children:"No Shop Found"}),e.jsx("p",{className:"text-secondary-600",children:"You don't have a shop registered yet."})]})})},ha=()=>e.jsx("div",{className:"min-h-screen bg-secondary-50 py-8",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-secondary-900 mb-4",children:"Analytics"}),e.jsx("p",{className:"text-secondary-600",children:"Analytics page coming soon..."})]})})}),ua=()=>{const[s,i]=l.useState(null),[t,r]=l.useState(null),[n,p]=l.useState(null),[u,f]=l.useState(!0),[c,v]=l.useState(null),[o,a]=l.useState(30),[g,j]=l.useState("overview"),{accessToken:P}=z();l.useEffect(()=>{m()},[o]);const m=async()=>{f(!0),v(null);try{const x={Authorization:`Bearer ${P}`,"Content-Type":"application/json"},_=await fetch(`/api/analytics/dashboard_overview/?days=${o}`,{headers:x});if(!_.ok)throw new Error("Failed to fetch dashboard data");const C=await _.json();i(C);const h=await fetch(`/api/analytics/sales_analytics/?days=${o}`,{headers:x});if(h.ok){const y=await h.json();r(y)}const $=await fetch("/api/analytics/customer_analytics/",{headers:x});if($.ok){const y=await $.json();p(y)}}catch(x){v("Failed to load analytics data"),console.error("Analytics fetch error:",x)}finally{f(!1)}},k=x=>new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES"}).format(x),w=x=>`${x.toFixed(1)}%`,d=({title:x,value:_,icon:C,trend:h,color:$})=>e.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm border",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:x}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:_}),h!==void 0&&e.jsxs("div",{className:`flex items-center mt-2 text-sm ${h>=0?"text-green-600":"text-red-600"}`,children:[h>=0?e.jsx(je,{className:"w-4 h-4 mr-1"}):e.jsx(be,{className:"w-4 h-4 mr-1"}),w(Math.abs(h))]})]}),e.jsx("div",{className:`p-3 rounded-full ${$}`,children:e.jsx(C,{className:"w-6 h-6 text-white"})})]})});return u?e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"animate-pulse space-y-6",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[1,2,3,4].map(x=>e.jsx("div",{className:"h-32 bg-gray-200 rounded"},x))}),e.jsx("div",{className:"h-64 bg-gray-200 rounded"})]})}):c?e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsx("p",{className:"text-red-600",children:c}),e.jsx("button",{onClick:m,className:"mt-2 text-red-600 hover:text-red-800 underline",children:"Try again"})]})}):s?e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Advanced Analytics"}),e.jsx("p",{className:"text-gray-600",children:"Comprehensive business insights and performance metrics"})]}),e.jsx("div",{className:"mt-4 sm:mt-0 flex items-center space-x-4",children:e.jsxs("select",{value:o,onChange:x=>a(Number(x.target.value)),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[e.jsx("option",{value:7,children:"Last 7 days"}),e.jsx("option",{value:30,children:"Last 30 days"}),e.jsx("option",{value:90,children:"Last 90 days"}),e.jsx("option",{value:365,children:"Last year"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(d,{title:"Total Revenue",value:k(s.overview.total_revenue),icon:ue,trend:s.trends.revenue_growth,color:"bg-green-500"}),e.jsx(d,{title:"Total Orders",value:s.overview.total_orders.toLocaleString(),icon:V,trend:s.trends.order_growth,color:"bg-blue-500"}),e.jsx(d,{title:"Unique Customers",value:s.customers.unique_customers.toLocaleString(),icon:Ze,color:"bg-purple-500"}),e.jsx(d,{title:"Conversion Rate",value:w(s.overview.conversion_rate),icon:Le,color:"bg-orange-500"})]}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"overview",name:"Overview",icon:re},{id:"sales",name:"Sales Analytics",icon:Le},{id:"customers",name:"Customer Analytics",icon:Ze}].map(x=>e.jsxs("button",{onClick:()=>j(x.id),className:`group inline-flex items-center py-2 px-1 border-b-2 font-medium text-sm ${g===x.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(x.icon,{className:"w-5 h-5 mr-2"}),x.name]},x.id))})}),g==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm border",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Revenue Trend"}),e.jsx("div",{className:"h-64 flex items-end space-x-2",children:s.trends.revenue_trend.slice(-14).map((x,_)=>{const C=Math.max(...s.trends.revenue_trend.map($=>$.revenue)),h=C>0?x.revenue/C*100:0;return e.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[e.jsx("div",{className:"w-full bg-primary-500 rounded-t",style:{height:`${h}%`},title:`${new Date(x.date).toLocaleDateString()}: ${k(x.revenue)}`}),e.jsx("span",{className:"text-xs text-gray-500 mt-2 transform rotate-45",children:new Date(x.date).toLocaleDateString("en",{month:"short",day:"numeric"})})]},_)})})]}),e.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm border",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Top Selling Products"}),e.jsx("div",{className:"space-y-3",children:s.products.top_selling_products.slice(0,5).map((x,_)=>e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center mr-3",children:e.jsx("span",{className:"text-primary-600 font-medium",children:_+1})}),e.jsx("span",{className:"font-medium text-gray-900",children:x.product__name})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:k(x.total_revenue)}),e.jsxs("p",{className:"text-sm text-gray-500",children:[x.total_sold," sold"]})]})]},_))})]})]}),g==="sales"&&t&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm border",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Category Performance"}),e.jsx("div",{className:"space-y-3",children:t.category_performance.map((x,_)=>e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsx("span",{className:"font-medium text-gray-900",children:x.product__category__name||"Uncategorized"}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:k(x.total_revenue)}),e.jsxs("p",{className:"text-sm text-gray-500",children:[x.total_quantity," units"]})]})]},_))})]}),e.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm border",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Order Status Distribution"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:t.order_status_distribution.map((x,_)=>e.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:x.count}),e.jsx("p",{className:"text-sm text-gray-600 capitalize",children:x.status})]},_))})]})]}),g==="customers"&&n&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm border",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Customer Segments"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(n.customer_segments).map(([x,_])=>e.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:_}),e.jsx("p",{className:"text-sm text-gray-600 capitalize",children:x.replace("_"," ")})]},x))})]}),e.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm border",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Top Customers"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Orders"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Spent"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Order"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.top_customers.slice(0,10).map((x,_)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:x.name}),e.jsx("p",{className:"text-sm text-gray-500",children:x.email})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:x.total_orders}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:k(x.total_spent)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(x.last_order).toLocaleDateString()})]},_))})]})})]})]})]}):e.jsx("div",{className:"p-6",children:e.jsx("p",{className:"text-gray-500",children:"No analytics data available"})})},pa=()=>{const{userShop:s}=ze(),[i,t]=l.useState([]),[r,n]=l.useState(null),[p,u]=l.useState(!0),[f,c]=l.useState("all"),[v,o]=l.useState(""),[a,g]=l.useState(null),[j,P]=l.useState(""),[m,k]=l.useState(!1);l.useEffect(()=>{s?.shopId&&(w(),d())},[s?.shopId,f]);const w=async()=>{if(s?.shopId)try{const h=localStorage.getItem("access_token"),$=await fetch(`http://127.0.0.1:8000/api/shop-reviews/by_shop/?shop_id=${s.shopId}`,{headers:{Authorization:`Bearer ${h}`}});if($.ok){const y=await $.json();let E=y.results||y;f==="pending"?E=E.filter(S=>!S.response):f==="responded"&&(E=E.filter(S=>S.response)),t(E)}}catch(h){console.error("Error fetching reviews:",h)}finally{u(!1)}},d=async()=>{if(s?.shopId)try{const h=localStorage.getItem("access_token"),$=await fetch(`http://127.0.0.1:8000/api/shops-with-reviews/${s.shopId}/rating_breakdown/`,{headers:{Authorization:`Bearer ${h}`}});if($.ok){const y=await $.json(),E=await fetch(`http://127.0.0.1:8000/api/shop-reviews/by_shop/?shop_id=${s.shopId}`,{headers:{Authorization:`Bearer ${h}`}});if(E.ok){const S=await E.json(),B=S.results||S,H=B.filter(M=>!M.response).length,L=B.filter(M=>{const b=new Date(M.created_at),N=new Date;return N.setDate(N.getDate()-30),b>=N}).length;n({total_reviews:y.total_reviews,average_rating:y.average_rating,pending_responses:H,recent_reviews:L})}}}catch(h){console.error("Error fetching summary:",h)}},x=async()=>{if(!(!a||!j.trim())){k(!0);try{const h=localStorage.getItem("access_token"),$=await fetch("http://127.0.0.1:8000/api/shop-review-responses/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${h}`},body:JSON.stringify({review:a.reviewId,response_text:j})});if($.ok)g(null),P(""),w(),d(),alert("Response submitted successfully!");else{const y=await $.json();alert(y.detail||"Error submitting response")}}catch(h){console.error("Error submitting response:",h),alert("Error submitting response")}finally{k(!1)}}},_=h=>e.jsx("div",{className:"flex",children:[1,2,3,4,5].map($=>e.jsx(Je,{className:`w-4 h-4 ${$<=h?"text-yellow-400 fill-current":"text-gray-300"}`},$))}),C=i.filter(h=>h.customer.toLowerCase().includes(v.toLowerCase())||h.title.toLowerCase().includes(v.toLowerCase())||h.review_text.toLowerCase().includes(v.toLowerCase()));return p?e.jsx("div",{className:"flex justify-center items-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Review Management"}),e.jsxs("p",{className:"text-gray-600",children:["Manage customer reviews for ",s?.name]})]}),r&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-lg p-6 shadow",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:r.total_reviews}),e.jsx(Je,{className:"w-6 h-6 text-yellow-400 ml-2"})]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Reviews"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-6 shadow",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:r.average_rating.toFixed(1)}),e.jsx("div",{className:"ml-2",children:_(Math.round(r.average_rating))})]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Average Rating"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-6 shadow",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:r.pending_responses}),e.jsx(Ae,{className:"w-6 h-6 text-orange-400 ml-2"})]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Pending Responses"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-6 shadow",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:r.recent_reviews}),e.jsx(ot,{className:"w-6 h-6 text-purple-400 ml-2"})]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Recent (30 days)"})]})]}),e.jsx("div",{className:"bg-white rounded-lg p-6 shadow mb-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(ct,{className:"w-5 h-5 text-gray-400"}),e.jsxs("select",{value:f,onChange:h=>c(h.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Reviews"}),e.jsx("option",{value:"pending",children:"Pending Response"}),e.jsx("option",{value:"responded",children:"Already Responded"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(dt,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),e.jsx("input",{type:"text",placeholder:"Search reviews...",value:v,onChange:h=>o(h.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})}),e.jsx("div",{className:"space-y-6",children:C.length===0?e.jsxs("div",{className:"text-center py-12 bg-white rounded-lg shadow",children:[e.jsx(Ae,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No reviews found"}),e.jsx("p",{className:"text-gray-600",children:f==="pending"?"All reviews have been responded to!":"No reviews match your current filter."})]}):C.map(h=>e.jsxs("div",{className:"bg-white rounded-lg p-6 shadow",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("span",{className:"font-medium text-gray-900",children:h.customer}),h.is_verified_purchase&&e.jsx("span",{className:"bg-green-100 text-green-800 text-xs px-2 py-1 rounded",children:"Verified Purchase"}),e.jsx("span",{className:`text-xs px-2 py-1 rounded ${h.response?"bg-blue-100 text-blue-800":"bg-orange-100 text-orange-800"}`,children:h.response?"Responded":"Pending Response"})]}),_(h.rating)]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-gray-500",children:new Date(h.created_at).toLocaleDateString()}),e.jsxs("div",{className:"text-sm text-gray-400",children:[h.helpful_votes_count," helpful votes"]})]})]}),h.title&&e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:h.title}),e.jsx("p",{className:"text-gray-700 mb-4",children:h.review_text}),h.response&&e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(Ae,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"font-medium text-blue-900",children:"Your Response"}),e.jsx("span",{className:"text-sm text-blue-600",children:new Date(h.response.created_at).toLocaleDateString()})]}),e.jsx("p",{className:"text-blue-800",children:h.response.response_text})]}),!h.response&&e.jsxs("button",{onClick:()=>g(h),className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(mt,{className:"w-4 h-4"}),e.jsx("span",{children:"Respond to Review"})]})]},h.reviewId))})]}),a&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Respond to Review"}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-medium",children:a.customer}),_(a.rating)]}),e.jsx("span",{className:"text-sm text-gray-500",children:new Date(a.created_at).toLocaleDateString()})]}),a.title&&e.jsx("h4",{className:"font-medium mb-2",children:a.title}),e.jsx("p",{className:"text-gray-700",children:a.review_text})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Response"}),e.jsx("textarea",{value:j,onChange:h=>P(h.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Thank you for your review. We appreciate your feedback..."})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>{g(null),P("")},className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:x,disabled:!j.trim()||m,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:m?"Submitting...":"Submit Response"})]})]})]})})})]})},ga=()=>{const[s,i]=l.useState([]),[t,r]=l.useState(null),[n,p]=l.useState(!0),[u,f]=l.useState([]),[c,v]=l.useState("all"),[o,a]=l.useState(""),[g,j]=l.useState(1),[P,m]=l.useState(""),[k,w]=l.useState(!1),{accessToken:d}=z(),x=X(),_=10;l.useEffect(()=>{C(),h()},[c,o,g]);const C=async()=>{try{const L=new URLSearchParams;c!=="all"&&L.append("status",c),o&&L.append("search",o),L.append("page",g.toString()),L.append("page_size",_.toString());const M=await fetch(`/api/enhanced-orders/?${L}`,{headers:{Authorization:`Bearer ${d}`,"Content-Type":"application/json"}});if(M.ok){const b=await M.json();i(b.results||b)}}catch(L){console.error("Error fetching orders:",L)}finally{p(!1)}},h=async()=>{try{const L=await fetch("/api/enhanced-orders/analytics/",{headers:{Authorization:`Bearer ${d}`,"Content-Type":"application/json"}});if(L.ok){const M=await L.json();r(M)}}catch(L){console.error("Error fetching analytics:",L)}},$=async()=>{if(!(!P||u.length===0))try{(await fetch("/api/enhanced-orders/bulk_update_status/",{method:"POST",headers:{Authorization:`Bearer ${d}`,"Content-Type":"application/json"},body:JSON.stringify({order_ids:u,status:P})})).ok&&(C(),f([]),m(""),E(`Updated ${u.length} orders successfully`,"success"))}catch(L){console.error("Error performing bulk action:",L),E("Failed to update orders","error")}},y=async()=>{try{const L=await fetch("/api/orders/reports/?type=export",{headers:{Authorization:`Bearer ${d}`}});if(L.ok){const M=await L.blob(),b=window.URL.createObjectURL(M),N=document.createElement("a");N.href=b,N.download=`orders-export-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(N),N.click(),window.URL.revokeObjectURL(b),document.body.removeChild(N)}}catch(L){console.error("Error exporting orders:",L),E("Failed to export orders","error")}},E=(L,M)=>{console.log(`${M}: ${L}`)},S=L=>{switch(L){case"pending":return e.jsx(me,{className:"w-5 h-5 text-yellow-500"});case"paid":return e.jsx(U,{className:"w-5 h-5 text-blue-500"});case"shipped":return e.jsx(le,{className:"w-5 h-5 text-purple-500"});case"delivered":return e.jsx(U,{className:"w-5 h-5 text-green-500"});case"cancelled":return e.jsx(Ne,{className:"w-5 h-5 text-red-500"});default:return e.jsx(me,{className:"w-5 h-5 text-gray-500"})}},B=L=>{switch(L){case"pending":return"bg-yellow-100 text-yellow-800";case"paid":return"bg-blue-100 text-blue-800";case"shipped":return"bg-purple-100 text-purple-800";case"delivered":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},H=s.filter(L=>L.customer_name.toLowerCase().includes(o.toLowerCase())||L.customer_email.toLowerCase().includes(o.toLowerCase())||L.id.toString().includes(o));return n?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Order Management"}),e.jsx("p",{className:"text-gray-600",children:"Manage and track all your orders"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>w(!k),className:"btn-secondary",children:k?"Hide Analytics":"Show Analytics"}),e.jsxs("button",{onClick:y,className:"btn-primary flex items-center space-x-2",children:[e.jsx(xt,{className:"w-5 h-5"}),e.jsx("span",{children:"Export"})]})]})]})}),k&&t&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(V,{className:"w-8 h-8 text-blue-500"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Orders"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:t.overview.total_orders})]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(le,{className:"w-8 h-8 text-green-500"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Revenue"}),e.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:["$",t.overview.total_revenue.toFixed(2)]})]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(me,{className:"w-8 h-8 text-yellow-500"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Last 30 Days"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:t.overview.orders_last_30_days})]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(U,{className:"w-8 h-8 text-purple-500"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Avg. Order Value"}),e.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:["$",t.overview.average_order_value.toFixed(2)]})]})]})})]}),e.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4 items-center",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(K,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search orders by customer, email, or order ID...",value:o,onChange:L=>a(L.target.value),className:"pl-10 w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ve,{className:"w-5 h-5 text-gray-400"}),e.jsxs("select",{value:c,onChange:L=>v(L.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"paid",children:"Paid"}),e.jsx("option",{value:"shipped",children:"Shipped"}),e.jsx("option",{value:"delivered",children:"Delivered"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]})]}),u.length>0&&e.jsxs("div",{className:"mt-4 flex items-center space-x-4 p-4 bg-blue-50 rounded-lg",children:[e.jsxs("span",{className:"text-sm font-medium text-blue-900",children:[u.length," order",u.length!==1?"s":""," selected"]}),e.jsxs("select",{value:P,onChange:L=>m(L.target.value),className:"px-3 py-1 border border-blue-300 rounded text-sm",children:[e.jsx("option",{value:"",children:"Choose action..."}),e.jsx("option",{value:"paid",children:"Mark as Paid"}),e.jsx("option",{value:"shipped",children:"Mark as Shipped"}),e.jsx("option",{value:"delivered",children:"Mark as Delivered"}),e.jsx("option",{value:"cancelled",children:"Cancel Orders"})]}),e.jsx("button",{onClick:$,disabled:!P,className:"px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700 disabled:opacity-50",children:"Apply"})]})]}),e.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:e.jsx("input",{type:"checkbox",checked:u.length===H.length&&H.length>0,onChange:L=>{L.target.checked?f(H.map(M=>M.id)):f([])},className:"rounded border-gray-300"})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Items"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:H.map(L=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("input",{type:"checkbox",checked:u.includes(L.id),onChange:M=>{M.target.checked?f([...u,L.id]):f(u.filter(b=>b!==L.id))},className:"rounded border-gray-300"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["#",L.id]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:L.customer_name}),e.jsx("div",{className:"text-sm text-gray-500",children:L.customer_email})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${B(L.status)}`,children:[S(L.status),e.jsx("span",{className:"ml-1",children:L.status_display})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[L.items_count," item",L.items_count!==1?"s":""]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["$",parseFloat(L.total).toFixed(2)]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(L.created_at).toLocaleDateString()}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[e.jsx("button",{onClick:()=>x(`/shop/orders/${L.id}`),className:"text-primary-600 hover:text-primary-900",children:e.jsx(Y,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>x(`/shop/orders/${L.id}/edit`),className:"text-blue-600 hover:text-blue-900",children:e.jsx(ce,{className:"w-4 h-4"})})]})]},L.id))})]})}),e.jsxs("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200",children:[e.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[e.jsx("button",{onClick:()=>j(Math.max(1,g-1)),disabled:g===1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),e.jsx("button",{onClick:()=>j(g+1),className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"Next"})]}),e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700",children:["Showing ",e.jsx("span",{className:"font-medium",children:(g-1)*_+1})," to"," ",e.jsx("span",{className:"font-medium",children:Math.min(g*_,H.length)})," ","of ",e.jsx("span",{className:"font-medium",children:H.length})," results"]})}),e.jsx("div",{children:e.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:[e.jsx("button",{onClick:()=>j(Math.max(1,g-1)),disabled:g===1,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:e.jsx(ht,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>j(g+1),className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",children:e.jsx(fe,{className:"h-5 w-5"})})]})})]})]})]})]})},ya=()=>{const[s,i]=l.useState(null),[t,r]=l.useState(!0),[n,p]=l.useState(!1),[u,f]=l.useState(""),[c,v]=l.useState(""),[o,a]=l.useState(!1),{orderId:g}=Fe(),{accessToken:j}=z(),P=X();l.useEffect(()=>{g&&m()},[g]);const m=async()=>{try{const _=await fetch(`/api/enhanced-orders/${g}/`,{headers:{Authorization:`Bearer ${j}`,"Content-Type":"application/json"}});if(_.ok){const C=await _.json();i(C)}else console.error("Failed to fetch order details")}catch(_){console.error("Error fetching order details:",_)}finally{r(!1)}},k=async()=>{if(!(!u||!s)){p(!0);try{(await fetch(`/api/enhanced-orders/${s.id}/update_status/`,{method:"POST",headers:{Authorization:`Bearer ${j}`,"Content-Type":"application/json"},body:JSON.stringify({status:u,tracking_info:c})})).ok?(await m(),a(!1),f(""),v(""),d("Order status updated successfully","success")):d("Failed to update order status","error")}catch(_){console.error("Error updating order status:",_),d("Failed to update order status","error")}finally{p(!1)}}},w=()=>{window.print()},d=(_,C)=>{console.log(`${C}: ${_}`)},x=_=>{switch(_){case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"paid":return"bg-blue-100 text-blue-800 border-blue-200";case"shipped":return"bg-purple-100 text-purple-800 border-purple-200";case"delivered":return"bg-green-100 text-green-800 border-green-200";case"cancelled":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}};return t?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600"})}):s?e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>P("/shop/orders"),className:"p-2 text-gray-400 hover:text-gray-600",children:e.jsx(ie,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["Order #",s.id]}),e.jsxs("p",{className:"text-gray-600",children:["Placed on ",new Date(s.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:()=>a(!0),className:"btn-secondary flex items-center space-x-2",children:[e.jsx(ce,{className:"w-4 h-4"}),e.jsx("span",{children:"Update Status"})]}),e.jsxs("button",{onClick:w,className:"btn-secondary flex items-center space-x-2",children:[e.jsx(ut,{className:"w-4 h-4"}),e.jsx("span",{children:"Print"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Order Status"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium border ${x(s.status)}`,children:s.status.charAt(0).toUpperCase()+s.status.slice(1)}),s.estimated_delivery&&e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx(Be,{className:"w-4 h-4 inline mr-1"}),"Estimated delivery: ",new Date(s.estimated_delivery).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Order Items"}),e.jsx("div",{className:"space-y-4",children:s.items.map(_=>e.jsxs("div",{className:"flex items-center space-x-4 border-b border-gray-200 pb-4 last:border-b-0 last:pb-0",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-lg overflow-hidden flex-shrink-0",children:_.product_image?e.jsx("img",{src:_.product_image,alt:_.product_name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(pt,{className:"w-6 h-6 text-gray-400"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:_.product_name}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Quantity: ",_.quantity]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Unit Price: $",parseFloat(_.product_price).toFixed(2)]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"font-medium text-gray-900",children:["$",parseFloat(_.total_price).toFixed(2)]})})]},_.id))}),e.jsx("div",{className:"border-t border-gray-200 pt-4 mt-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-lg font-semibold text-gray-900",children:"Total"}),e.jsxs("span",{className:"text-lg font-semibold text-gray-900",children:["$",parseFloat(s.total).toFixed(2)]})]})})]}),s.tracking_entries&&s.tracking_entries.length>0&&e.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(le,{className:"w-5 h-5 mr-2"}),"Tracking Information"]}),e.jsx("div",{className:"space-y-4",children:s.tracking_entries.map((_,C)=>e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-2 h-2 bg-primary-600 rounded-full mt-2 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"font-medium text-gray-900",children:_.status}),e.jsx("p",{className:"text-sm text-gray-500",children:new Date(_.timestamp).toLocaleString()})]}),e.jsx("p",{className:"text-sm text-gray-600",children:_.description}),_.location&&e.jsxs("p",{className:"text-xs text-gray-500 flex items-center mt-1",children:[e.jsx(ne,{className:"w-3 h-3 mr-1"}),_.location]})]})]},C))})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(W,{className:"w-5 h-5 mr-2"}),"Customer Information"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Name"}),e.jsx("p",{className:"text-gray-900",children:s.customer_name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Email"}),e.jsx("p",{className:"text-gray-900",children:s.customer_email})]})]})]}),s.shipping_address&&e.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(ne,{className:"w-5 h-5 mr-2"}),"Shipping Address"]}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-900",children:[e.jsx("p",{className:"font-medium",children:s.shipping_address.recipient_name}),s.shipping_address.recipient_phone&&e.jsx("p",{children:s.shipping_address.recipient_phone}),e.jsx("p",{children:s.shipping_address.address_line_1}),s.shipping_address.address_line_2&&e.jsx("p",{children:s.shipping_address.address_line_2}),e.jsxs("p",{children:[s.shipping_address.city,", ",s.shipping_address.state_province," ",s.shipping_address.postal_code]}),e.jsx("p",{children:s.shipping_address.country}),s.shipping_address.delivery_instructions&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[e.jsx("p",{className:"text-xs font-medium text-gray-500",children:"Delivery Instructions"}),e.jsx("p",{className:"text-sm",children:s.shipping_address.delivery_instructions})]})]})]}),e.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(ue,{className:"w-5 h-5 mr-2"}),"Order Summary"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Subtotal:"}),e.jsxs("span",{children:["$",parseFloat(s.total).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Shipping:"}),e.jsx("span",{children:"$0.00"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Tax:"}),e.jsx("span",{children:"$0.00"})]}),e.jsx("div",{className:"border-t border-gray-200 pt-2 mt-2",children:e.jsxs("div",{className:"flex justify-between font-medium",children:[e.jsx("span",{children:"Total:"}),e.jsxs("span",{children:["$",parseFloat(s.total).toFixed(2)]})]})})]})]})]})]}),o&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Update Order Status"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"New Status"}),e.jsxs("select",{value:u,onChange:_=>f(_.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"",children:"Select status..."}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"paid",children:"Paid"}),e.jsx("option",{value:"shipped",children:"Shipped"}),e.jsx("option",{value:"delivered",children:"Delivered"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tracking Information (Optional)"}),e.jsx("textarea",{value:c,onChange:_=>v(_.target.value),rows:3,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500",placeholder:"Add any tracking details or notes..."})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>a(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Cancel"}),e.jsx("button",{onClick:k,disabled:!u||n,className:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 disabled:opacity-50",children:n?"Updating...":"Update Status"})]})]})})})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Order not found"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"The order you're looking for doesn't exist."}),e.jsx("button",{onClick:()=>P("/shop/orders"),className:"mt-4 btn-primary",children:"Back to Orders"})]})},fa=()=>{const[s,i]=l.useState(null),[t,r]=l.useState(!0),[n,p]=l.useState(null),{orderId:u}=Fe(),{accessToken:f}=z();l.useEffect(()=>{u&&c()},[u]);const c=async()=>{try{const P=await fetch(`/api/enhanced-orders/${u}/tracking/`,{headers:{Authorization:`Bearer ${f}`,"Content-Type":"application/json"}});if(P.ok){const m=await P.json();i(m)}else P.status===404?p("Order not found"):p("Failed to load order tracking information")}catch(P){console.error("Error fetching tracking info:",P),p("Failed to load order tracking information")}finally{r(!1)}},v=(P,m=!1)=>{const k=`w-8 h-8 ${m?"text-green-600":"text-gray-400"}`;switch(P.toLowerCase()){case"pending":case"order_placed":return e.jsx(me,{className:k});case"paid":case"payment_confirmed":return e.jsx(U,{className:k});case"shipped":case"processing":case"packed":return e.jsx(le,{className:k});case"delivered":return e.jsx(U,{className:k});case"cancelled":return e.jsx(Ne,{className:k});default:return e.jsx(me,{className:k})}},o=P=>{switch(P.toLowerCase()){case"pending":case"order_placed":return 1;case"paid":case"payment_confirmed":return 2;case"shipped":case"processing":case"packed":return 3;case"delivered":return 4;case"cancelled":return-1;default:return 1}},a=[{id:1,name:"Order Placed",description:"Your order has been placed successfully"},{id:2,name:"Payment Confirmed",description:"Payment has been processed"},{id:3,name:"Shipped",description:"Your order is on its way"},{id:4,name:"Delivered",description:"Order has been delivered"}];if(t)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600"})});if(n)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ne,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Error Loading Order"}),e.jsx("p",{className:"text-gray-600",children:n})]})});if(!s)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(V,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Order Not Found"}),e.jsx("p",{className:"text-gray-600",children:"We couldn't find the order you're looking for."})]})});const g=o(s.current_status),j=s.current_status.toLowerCase()==="cancelled";return e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["Order #",s.order_id]}),e.jsxs("p",{className:"text-gray-600 mt-1",children:["Placed on ",new Date(s.order_date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:["$",parseFloat(s.total).toFixed(2)]}),s.estimated_delivery&&!j&&e.jsxs("div",{className:"text-sm text-gray-600 flex items-center mt-1",children:[e.jsx(Be,{className:"w-4 h-4 mr-1"}),"Est. delivery: ",new Date(s.estimated_delivery).toLocaleDateString()]})]})]})}),j?e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 mb-8",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ne,{className:"w-8 h-8 text-red-500 mr-3"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-red-800",children:"Order Cancelled"}),e.jsx("p",{className:"text-red-600 mt-1",children:"This order has been cancelled."})]})]})}):e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Order Progress"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute top-5 left-5 w-full h-0.5 bg-gray-200",children:e.jsx("div",{className:"h-full bg-green-500 transition-all duration-500",style:{width:`${(g-1)/(a.length-1)*100}%`}})}),e.jsx("div",{className:"relative flex justify-between",children:a.map(P=>{const m=g>=P.id;return e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`
                        w-10 h-10 rounded-full border-2 flex items-center justify-center
                        ${m?"bg-green-500 border-green-500 text-white":"bg-white border-gray-300 text-gray-400"}
                      `,children:m?e.jsx(U,{className:"w-6 h-6"}):e.jsx("span",{className:"text-sm font-medium",children:P.id})}),e.jsxs("div",{className:"mt-3 text-center max-w-xs",children:[e.jsx("p",{className:`text-sm font-medium ${m?"text-green-600":"text-gray-500"}`,children:P.name}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:P.description})]})]},P.id)})})]})]}),s.tracking_entries&&s.tracking_entries.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[e.jsx(le,{className:"w-5 h-5 mr-2"}),"Tracking Details"]}),e.jsx("div",{className:"space-y-6",children:s.tracking_entries.map((P,m)=>e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:v(P.status,m===0)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:P.status}),e.jsx("p",{className:"text-sm text-gray-500",children:new Date(P.timestamp).toLocaleString()})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:P.description}),P.location&&e.jsxs("div",{className:"flex items-center text-xs text-gray-500 mt-2",children:[e.jsx(ne,{className:"w-3 h-3 mr-1"}),P.location]})]})]},m))})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Order Items"}),e.jsx("div",{className:"space-y-4",children:s.items?.map(P=>e.jsxs("div",{className:"flex items-center space-x-4 py-4 border-b border-gray-200 last:border-b-0",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-lg overflow-hidden flex-shrink-0",children:P.product_image?e.jsx("img",{src:P.product_image,alt:P.product_name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(V,{className:"w-6 h-6 text-gray-400"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:P.product_name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Quantity: ",P.quantity]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"font-medium text-gray-900",children:["$",parseFloat(P.total_price).toFixed(2)]})})]},P.id))})]}),e.jsxs("div",{className:"mt-8 bg-blue-50 border border-blue-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-blue-900 mb-2",children:"Need Help?"}),e.jsx("p",{className:"text-blue-700 mb-4",children:"If you have any questions about your order, please don't hesitate to contact us."}),e.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4",children:[e.jsx("a",{href:"mailto:support@onesoko.com",className:"inline-flex items-center px-4 py-2 border border-blue-300 rounded-md text-sm font-medium text-blue-700 bg-white hover:bg-blue-50",children:"Email Support"}),e.jsx("a",{href:"tel:+1234567890",className:"inline-flex items-center px-4 py-2 border border-blue-300 rounded-md text-sm font-medium text-blue-700 bg-white hover:bg-blue-50",children:"Call Support"})]})]})]})})},ja=()=>{const[s,i]=l.useState(""),[t,r]=l.useState(""),[n,p]=l.useState(!1),[u,f]=l.useState(""),c=X(),v=async o=>{if(o.preventDefault(),f(""),p(!0),!s.trim()){f("Please enter an order ID"),p(!1);return}try{const a=await fetch(`/api/enhanced-orders/${s}/tracking/`);a.ok?c(`/customer/orders/${s}/track`):a.status===404?f("Order not found. Please check your order ID."):f("Unable to find order. Please try again.")}catch{f("Unable to find order. Please try again.")}finally{p(!1)}};return e.jsx("div",{className:"min-h-screen bg-gray-50 py-12",children:e.jsx("div",{className:"max-w-md mx-auto px-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(le,{className:"w-8 h-8 text-primary-600"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Track Your Order"}),e.jsx("p",{className:"text-gray-600",children:"Enter your order details to track your delivery"})]}),e.jsxs("form",{onSubmit:v,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"orderId",className:"block text-sm font-medium text-gray-700 mb-2",children:"Order ID *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",id:"orderId",value:s,onChange:o=>i(o.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Enter your order ID (e.g., 12345)",required:!0}),e.jsx(K,{className:"absolute right-3 top-3 w-5 h-5 text-gray-400"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address (Optional)"}),e.jsx("input",{type:"email",id:"email",value:t,onChange:o=>r(o.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Enter the email used for the order"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This helps us verify your order"})]}),u&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsx("p",{className:"text-red-600 text-sm",children:u})}),e.jsx("button",{type:"submit",disabled:n,className:"w-full bg-primary-600 text-white py-3 px-4 rounded-lg hover:bg-primary-700 focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:n?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Searching..."]}):"Track Order"})]}),e.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Need help?"}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[e.jsx("p",{children:"• Your order ID can be found in your confirmation email"}),e.jsx("p",{children:"• If you can't find your order, contact customer support"}),e.jsx("p",{children:"• Orders typically appear within 10-15 minutes of placement"})]})]})]})})})},ba=()=>{const[s,i]=l.useState([]),[t,r]=l.useState(null),[n,p]=l.useState(null),[u,f]=l.useState(!0),[c,v]=l.useState(!1),[o,a]=l.useState(null),[g,j]=l.useState(null),{accessToken:P}=z(),m=X();l.useEffect(()=>{k()},[]),l.useEffect(()=>{t&&w(t)},[t]);const k=async()=>{try{const y=await fetch("/api/customer-loyalty/my_loyalty_accounts/",{headers:{Authorization:`Bearer ${P}`,"Content-Type":"application/json"}});if(y.ok){const E=await y.json();i(E),E.length>0&&!t&&r(E[0].shop_id)}else j("Failed to fetch loyalty accounts")}catch(y){j("Error fetching loyalty accounts"),console.error("Error:",y)}finally{f(!1)}},w=async y=>{v(!0);try{const E=await fetch(`/api/customer-loyalty/shop_loyalty/?shop_id=${y}`,{headers:{Authorization:`Bearer ${P}`,"Content-Type":"application/json"}});if(E.ok){const S=await E.json();p(S)}else j("Failed to fetch shop loyalty data")}catch(E){j("Error fetching shop loyalty data"),console.error("Error:",E)}finally{v(!1)}},d=async y=>{if(t){a(y);try{const E=await fetch("/api/customer-loyalty/redeem_reward/",{method:"POST",headers:{Authorization:`Bearer ${P}`,"Content-Type":"application/json"},body:JSON.stringify({reward_id:y,shop_id:t})});if(E.ok){const S=await E.json();alert(`Reward redeemed successfully! Code: ${S.redemption_code}`),w(t),k()}else{const S=await E.json();alert(`Failed to redeem reward: ${S.error}`)}}catch(E){alert("Error redeeming reward"),console.error("Error:",E)}finally{a(null)}}},x=y=>{switch(y){case"platinum":return e.jsx(te,{className:"h-6 w-6 text-purple-500"});case"gold":return e.jsx(te,{className:"h-6 w-6 text-yellow-500"});case"silver":return e.jsx(te,{className:"h-6 w-6 text-gray-400"});default:return e.jsx(te,{className:"h-6 w-6 text-amber-600"})}},_=y=>{switch(y){case"platinum":return"from-purple-500 to-indigo-600";case"gold":return"from-yellow-400 to-orange-500";case"silver":return"from-gray-300 to-gray-500";default:return"from-amber-400 to-orange-600"}},C=y=>new Date(y).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),h=y=>{switch(y){case"earned_purchase":return e.jsx(Le,{className:"h-5 w-5 text-green-500"});case"earned_referral":return e.jsx(W,{className:"h-5 w-5 text-blue-500"});case"redeemed_discount":case"redeemed_product":case"redeemed_service":return e.jsx(xe,{className:"h-5 w-5 text-purple-500"});default:return e.jsx(qe,{className:"h-5 w-5 text-gray-500"})}};if(u)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500"})});if(g)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ne,{className:"h-16 w-16 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-600",children:g}),e.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Retry"})]})});if(s.length===0)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(xe,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Loyalty Accounts"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"You don't have any loyalty accounts yet. Start shopping to earn rewards!"}),e.jsx("button",{onClick:()=>m("/shops"),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Browse Shops"})]})});const $=s.find(y=>y.shop_id===t);return e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Loyalty & Rewards"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Manage your loyalty accounts and redeem rewards from your favorite shops"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Your Shops"}),e.jsx("div",{className:"space-y-3",children:s.map(y=>e.jsxs("button",{onClick:()=>r(y.shop_id),className:`w-full text-left p-3 rounded-lg border transition-colors ${t===y.shop_id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[y.shop_logo?e.jsx("img",{src:y.shop_logo,alt:y.shop_name,className:"h-10 w-10 rounded-full object-cover"}):e.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center",children:e.jsx("span",{className:"text-gray-600 font-medium",children:y.shop_name.charAt(0)})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-gray-900 truncate",children:y.shop_name}),e.jsxs("div",{className:"flex items-center space-x-1",children:[x(y.current_tier),e.jsx("span",{className:"text-sm text-gray-600 capitalize",children:y.current_tier})]})]})]}),e.jsx("div",{className:"mt-2",children:e.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[e.jsxs("span",{children:[y.points_balance," points"]}),e.jsxs("span",{children:[y.total_orders," orders"]})]})})]},y.shop_id))})]})}),e.jsx("div",{className:"lg:col-span-3",children:$&&n&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`bg-gradient-to-r ${_($.current_tier)} rounded-lg p-6 text-white`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:$.shop_name}),e.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[x($.current_tier),e.jsxs("span",{className:"text-lg font-semibold capitalize",children:[$.current_tier," Member"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-3xl font-bold",children:$.points_balance}),e.jsx("div",{className:"text-sm opacity-90",children:"Available Points"})]})]}),$.next_tier_spending_needed>0&&e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{children:"Progress to next tier"}),e.jsxs("span",{children:["$",$.next_tier_spending_needed.toFixed(2)," to go"]})]}),e.jsx("div",{className:"w-full bg-white bg-opacity-30 rounded-full h-2",children:e.jsx("div",{className:"bg-white h-2 rounded-full transition-all duration-300",style:{width:`${$.tier_progress}%`}})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(re,{className:"h-8 w-8 text-blue-500"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:$.total_points_earned}),e.jsx("p",{className:"text-gray-600",children:"Total Points Earned"})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ue,{className:"h-8 w-8 text-green-500"}),e.jsxs("div",{className:"ml-4",children:[e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",$.annual_spending.toFixed(2)]}),e.jsx("p",{className:"text-gray-600",children:"Annual Spending"})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Be,{className:"h-8 w-8 text-purple-500"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:$.total_orders}),e.jsx("p",{className:"text-gray-600",children:"Total Orders"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Available Rewards"})}),e.jsx("div",{className:"p-6",children:c?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):n.available_rewards.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(xe,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"No rewards available"})]}):e.jsx("div",{className:"space-y-4",children:n.available_rewards.map(y=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:y.name}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:y.description}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[e.jsxs("span",{className:"text-sm font-medium text-blue-600",children:[y.points_cost," points"]}),e.jsxs("span",{className:"text-sm text-gray-500 capitalize",children:[y.minimum_tier_required,"+ tier"]})]})]}),e.jsx("button",{onClick:()=>d(y.id),disabled:!y.is_available||o===y.id,className:`ml-4 px-4 py-2 rounded-lg text-sm font-medium ${y.is_available?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:o===y.id?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Redeeming..."})]}):y.is_available?"Redeem":"Unavailable"})]}),!y.is_available&&e.jsx("p",{className:"text-sm text-red-600 mt-2",children:y.availability_message})]},y.id))})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Activity"})}),e.jsx("div",{className:"p-6",children:c?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):n.recent_transactions.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(me,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"No recent activity"})]}):e.jsx("div",{className:"space-y-4",children:n.recent_transactions.map(y=>e.jsxs("div",{className:"flex items-center space-x-3",children:[h(y.type),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:y.description}),e.jsx("p",{className:"text-xs text-gray-500",children:C(y.created_at)})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("span",{className:`text-sm font-medium ${y.points_change>0?"text-green-600":"text-red-600"}`,children:[y.points_change>0?"+":"",y.points_change]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Balance: ",y.balance_after]})]})]},y.id))})})]})]})]})})]})]})})},Na=()=>{const[s,i]=l.useState(null),[t,r]=l.useState(null),[n,p]=l.useState(!0),[u,f]=l.useState(!1),[c,v]=l.useState(!1),[o,a]=l.useState(null),[g,j]=l.useState(null),{accessToken:P}=z(),[m,k]=l.useState({name:"Loyalty Rewards",description:"",is_active:!0,points_per_dollar:1,minimum_spend_for_points:0,points_expiry_days:365,tiers:{bronze:{threshold:0,multiplier:1},silver:{threshold:500,multiplier:1.25},gold:{threshold:1500,multiplier:1.5},platinum:{threshold:5e3,multiplier:2}}});l.useEffect(()=>{w(),d()},[]);const w=async()=>{try{const h=await fetch("/api/loyalty-programs/shop_program/",{headers:{Authorization:`Bearer ${P}`,"Content-Type":"application/json"}});if(h.ok){const $=await h.json();i($),k($)}else h.status===404?i(null):a("Failed to fetch loyalty program")}catch(h){a("Error fetching loyalty program"),console.error("Error:",h)}},d=async()=>{try{const h=await fetch("/api/loyalty-programs/customer_analytics/",{headers:{Authorization:`Bearer ${P}`,"Content-Type":"application/json"}});if(h.ok){const $=await h.json();r($)}}catch(h){console.error("Error fetching analytics:",h)}finally{p(!1)}},x=async()=>{f(!0),a(null);try{const $=await fetch("/api/loyalty-programs/shop_program/",{method:s?"PUT":"POST",headers:{Authorization:`Bearer ${P}`,"Content-Type":"application/json"},body:JSON.stringify(m)});if($.ok)j("Loyalty program saved successfully!"),v(!1),await w(),await d(),setTimeout(()=>j(null),3e3);else{const y=await $.json();a(y.error||"Failed to save loyalty program")}}catch(h){a("Error saving loyalty program"),console.error("Error:",h)}finally{f(!1)}},_=h=>{switch(h){case"platinum":return"text-purple-600 bg-purple-100";case"gold":return"text-yellow-600 bg-yellow-100";case"silver":return"text-gray-600 bg-gray-100";default:return"text-amber-600 bg-amber-100"}},C=h=>{switch(h){case"platinum":return e.jsx(te,{className:"h-5 w-5 text-purple-600"});case"gold":return e.jsx(te,{className:"h-5 w-5 text-yellow-600"});case"silver":return e.jsx(te,{className:"h-5 w-5 text-gray-600"});default:return e.jsx(te,{className:"h-5 w-5 text-amber-600"})}};return n?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500"})}):e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Loyalty Program Management"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Manage your customer loyalty program and analyze performance"})]}),e.jsxs("button",{onClick:()=>v(!0),className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:[s?e.jsx(ce,{className:"h-5 w-5"}):e.jsx(ee,{className:"h-5 w-5"}),e.jsx("span",{children:s?"Edit Program":"Create Program"})]})]})}),g&&e.jsx("div",{className:"mb-6 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(U,{className:"h-5 w-5 mr-2"}),g]})}),o&&e.jsx("div",{className:"mb-6 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(qe,{className:"h-5 w-5 mr-2"}),o]})}),s?e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:s.name}),e.jsx("p",{className:"text-gray-600 mt-1",children:s.description})]}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${s.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:s.is_active?"Active":"Inactive"})})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[s.points_per_dollar,"x"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Points per $1"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["$",s.minimum_spend_for_points]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Minimum Spend"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:s.points_expiry_days}),e.jsx("div",{className:"text-sm text-gray-600",children:"Days to Expire"})]})]})]}),t&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ve,{className:"h-8 w-8 text-blue-500"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.total_customers}),e.jsx("p",{className:"text-gray-600",children:"Total Members"})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Le,{className:"h-8 w-8 text-green-500"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.active_customers}),e.jsx("p",{className:"text-gray-600",children:"Active Members"})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(xe,{className:"h-8 w-8 text-purple-500"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.points_statistics.total_earned.toLocaleString()}),e.jsx("p",{className:"text-gray-600",children:"Points Earned"})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(re,{className:"h-8 w-8 text-orange-500"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.points_statistics.total_redeemed.toLocaleString()}),e.jsx("p",{className:"text-gray-600",children:"Points Redeemed"})]})]})})]}),t&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Tier Distribution"})}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"space-y-4",children:t.tier_distribution.map(h=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[C(h.current_tier),e.jsx("span",{className:"font-medium capitalize",children:h.current_tier})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("span",{className:"text-gray-600",children:[h.count," members"]}),e.jsxs("span",{className:`px-2 py-1 rounded text-sm ${_(h.current_tier)}`,children:[t.total_customers>0?Math.round(h.count/t.total_customers*100):0,"%"]})]})]},h.current_tier))})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Top Customers"})}),e.jsx("div",{className:"p-6",children:t.top_customers.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Ve,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"No customers yet"})]}):e.jsx("div",{className:"space-y-4",children:t.top_customers.slice(0,5).map((h,$)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"h-10 w-10 bg-gray-300 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-gray-600 font-medium",children:h.customer_name.charAt(0)})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:h.customer_name}),e.jsxs("div",{className:"flex items-center space-x-2",children:[C(h.tier),e.jsx("span",{className:"text-sm text-gray-600 capitalize",children:h.tier})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-medium text-gray-900",children:[h.total_points_earned," pts"]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["$",h.annual_spending.toFixed(0)," spent"]})]})]},$))})})]})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(xe,{className:"h-24 w-24 text-gray-400 mx-auto mb-6"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"No Loyalty Program"}),e.jsx("p",{className:"text-gray-600 mb-8 max-w-md mx-auto",children:"Create a loyalty program to reward your customers and increase retention. Offer points, tiers, and exclusive rewards."}),e.jsx("button",{onClick:()=>v(!0),className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 font-medium",children:"Create Loyalty Program"})]}),c&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsxs("div",{className:"relative top-20 mx-auto p-5 border w-full max-w-4xl shadow-lg rounded-md bg-white",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s?"Edit Loyalty Program":"Create Loyalty Program"}),e.jsx("button",{onClick:()=>v(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(ye,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"Basic Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Program Name"}),e.jsx("input",{type:"text",value:m.name,onChange:h=>k({...m,name:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Points per Dollar"}),e.jsx("input",{type:"number",min:"0",step:"0.1",value:m.points_per_dollar,onChange:h=>k({...m,points_per_dollar:parseFloat(h.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Minimum Spend for Points ($)"}),e.jsx("input",{type:"number",min:"0",value:m.minimum_spend_for_points,onChange:h=>k({...m,minimum_spend_for_points:parseFloat(h.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Points Expiry (Days)"}),e.jsx("input",{type:"number",min:"1",value:m.points_expiry_days,onChange:h=>k({...m,points_expiry_days:parseInt(h.target.value)||365}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{value:m.description,onChange:h=>k({...m,description:h.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Describe your loyalty program..."})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:m.is_active,onChange:h=>k({...m,is_active:h.target.checked}),className:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Program is active"})]})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"Tier Settings"}),e.jsx("div",{className:"space-y-4",children:Object.entries(m.tiers).map(([h,$])=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("h5",{className:"font-medium text-gray-900 capitalize mb-3 flex items-center space-x-2",children:[C(h),e.jsxs("span",{children:[h," Tier"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Spending Threshold ($)"}),e.jsx("input",{type:"number",min:"0",value:$.threshold,onChange:y=>k({...m,tiers:{...m.tiers,[h]:{...$,threshold:parseFloat(y.target.value)||0}}}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Points Multiplier"}),e.jsx("input",{type:"number",min:"1",step:"0.1",value:$.multiplier,onChange:y=>k({...m,tiers:{...m.tiers,[h]:{...$,multiplier:parseFloat(y.target.value)||1}}}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]},h))})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t border-gray-200",children:[e.jsx("button",{onClick:()=>v(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200",children:"Cancel"}),e.jsx("button",{onClick:x,disabled:u,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:u?"Saving...":"Save Program"})]})]})]})})]})})},va=[{value:"relevance",label:"Most Relevant"},{value:"price-low",label:"Price: Low to High"},{value:"price-high",label:"Price: High to Low"},{value:"rating",label:"Highest Rated"},{value:"newest",label:"Newest First"},{value:"popular",label:"Most Popular"}],wa=({product:s,viewMode:i})=>{const t=parseFloat(s.price),r=s.promotional_price?parseFloat(s.promotional_price):t,n=s.promotional_price?parseInt(s.discount):0,p=s.average_rating||0,u=s.reviews?.length||0,f=s.shops&&s.shops.length>0?s.shops[0]:null,c=s.shops?.length||0;return i==="list"?e.jsx("div",{className:"card group cursor-pointer shadow-hover overflow-hidden",children:e.jsxs("div",{className:"flex",children:[e.jsxs("div",{className:"relative w-48 flex-shrink-0",children:[e.jsx("img",{src:s.image||"https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=400&h=400&fit=crop",alt:s.name,className:"w-full h-32 object-cover group-hover:scale-105 transition-transform duration-300"}),n>0&&e.jsx("div",{className:"absolute top-2 left-2",children:e.jsxs("span",{className:"bg-danger-500 text-white px-2 py-1 rounded-full text-xs font-bold",children:["-",n,"%"]})})]}),e.jsx("div",{className:"flex-1 p-4",children:e.jsxs("div",{className:"flex justify-between h-full",children:[e.jsxs("div",{className:"flex flex-col flex-1",children:[e.jsxs("div",{className:"mb-2",children:[e.jsx(T,{to:`/products/${s.productId}`,children:e.jsx("h3",{className:"font-semibold text-secondary-900 group-hover:text-primary-600 transition-colors line-clamp-1",children:s.name})}),e.jsx("p",{className:"text-sm text-secondary-600 line-clamp-2 mt-1",children:s.description})]}),f&&e.jsxs("div",{className:"flex items-center text-sm text-secondary-600 mb-3",children:[e.jsx(J,{className:"w-4 h-4 mr-1"}),e.jsx("span",{className:"font-medium text-primary-600",children:f.name}),c>1&&e.jsxs("span",{className:"ml-1",children:["+",c-1," more shops"]}),f.city&&e.jsxs(e.Fragment,{children:[e.jsx(ne,{className:"w-3 h-3 ml-2 mr-1"}),e.jsx("span",{children:f.city})]})]}),e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("div",{className:"flex items-center",children:[...Array(5)].map((v,o)=>e.jsx(ae,{className:`w-4 h-4 ${o<Math.floor(p)?"text-yellow-400":"text-gray-200"}`},o))}),e.jsxs("span",{className:"text-sm text-secondary-600 ml-2",children:["(",u," reviews)"]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-auto",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-xl font-bold text-secondary-900",children:["$",t.toFixed(2)]}),r>t&&e.jsxs("span",{className:"text-sm text-secondary-500 line-through",children:["$",r.toFixed(2)]})]}),e.jsx("button",{className:"p-2 text-secondary-400 hover:text-red-500 transition-colors",children:e.jsx(Z,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"flex flex-col justify-between items-end ml-4",children:[e.jsx("div",{className:"flex space-x-2",children:e.jsx("button",{className:"p-2 bg-secondary-100 rounded-full hover:bg-secondary-200 transition-colors",children:e.jsx(Y,{className:"w-4 h-4 text-secondary-600"})})}),e.jsx("div",{className:"w-full mt-auto pt-2",children:e.jsx(oe,{product:s,size:"sm"})})]})]})})]})}):e.jsxs("div",{className:"card group cursor-pointer shadow-hover overflow-hidden",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:s.image||"https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=400&h=400&fit=crop",alt:s.name,className:"w-full h-48 object-cover group-hover:scale-105 transition-transform duration-300"}),e.jsx("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx("button",{className:"p-2 bg-white rounded-full shadow-md hover:bg-gray-50 transition-colors",children:e.jsx(Z,{className:"w-4 h-4 text-gray-600"})}),e.jsx("button",{className:"p-2 bg-white rounded-full shadow-md hover:bg-gray-50 transition-colors",children:e.jsx(Y,{className:"w-4 h-4 text-gray-600"})})]})}),n>0&&e.jsx("div",{className:"absolute bottom-2 left-2",children:e.jsxs("span",{className:"bg-danger-500 text-white px-2 py-1 rounded-full text-xs font-bold",children:["-",n,"%"]})})]}),e.jsxs("div",{className:"card-body p-4",children:[e.jsxs("div",{className:"mb-3",children:[f&&e.jsxs("div",{className:"flex items-center text-xs text-secondary-600 mb-2",children:[e.jsx(J,{className:"w-3 h-3 mr-1"}),e.jsx("span",{className:"font-medium text-primary-600",children:f.name}),c>1&&e.jsxs("span",{className:"ml-1",children:["+",c-1]})]}),e.jsx(T,{to:`/products/${s.productId}`,children:e.jsx("h3",{className:"font-semibold text-secondary-900 group-hover:text-primary-600 transition-colors line-clamp-2",children:s.name})})]}),e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("div",{className:"flex items-center",children:[...Array(5)].map((v,o)=>e.jsx(ae,{className:`w-4 h-4 ${o<Math.floor(p)?"text-yellow-400":"text-gray-200"}`},o))}),e.jsxs("span",{className:"text-sm text-secondary-600 ml-2",children:["(",u,")"]})]}),e.jsxs("div",{className:"flex items-end justify-between gap-3",children:[e.jsxs("div",{className:"flex flex-col space-y-1 flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-lg font-bold text-secondary-900",children:["$",t.toFixed(2)]}),r>t&&e.jsxs("span",{className:"text-sm text-secondary-500 line-through",children:["$",r.toFixed(2)]})]}),f&&f.city&&e.jsxs("div",{className:"flex items-center text-xs text-secondary-500",children:[e.jsx(ne,{className:"w-3 h-3 mr-1"}),e.jsx("span",{children:f.city})]})]}),e.jsx("div",{className:"flex-shrink-0 min-w-[90px]",children:e.jsx(oe,{product:s,size:"sm"})})]})]})]})},ka=()=>{const[s,i]=l.useState("All Categories"),[t,r]=l.useState([0,1e3]),[n,p]=l.useState("relevance"),[u,f]=l.useState("grid"),[c,v]=l.useState(!1),{data:o=[],isLoading:a,error:g}=cs({queryKey:["products"],queryFn:_e.getAll}),{data:j=[]}=cs({queryKey:["categories"],queryFn:Ue.getAll}),P=["All Categories",...j.map(d=>d.name)],m=()=>{i("All Categories"),r([0,1e3])},w=[...o.filter(d=>{if(s!=="All Categories"&&d.category?.name!==s)return!1;const x=parseFloat(d.price);return!(x<t[0]||x>t[1])})].sort((d,x)=>{switch(n){case"price-low":return parseFloat(d.price)-parseFloat(x.price);case"price-high":return parseFloat(x.price)-parseFloat(d.price);case"rating":return(x.average_rating||0)-(d.average_rating||0);case"newest":return Math.random()-.5;default:return 0}});return a?e.jsx("div",{className:"min-h-screen bg-secondary-50 dark:bg-secondary-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),e.jsx("p",{className:"text-secondary-600 dark:text-secondary-400",children:"Loading products..."})]})}):g?e.jsx("div",{className:"min-h-screen bg-secondary-50 dark:bg-secondary-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-red-600 mb-4",children:"Error loading products. Please try again."}),e.jsx("button",{onClick:()=>window.location.reload(),className:"btn-primary",children:"Retry"})]})}):e.jsx("div",{className:"min-h-screen bg-secondary-50 dark:bg-secondary-900 transition-colors duration-200",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-secondary-900 dark:text-white mb-4",children:"All Products"}),e.jsx("p",{className:"text-secondary-600 dark:text-secondary-400",children:"Discover products from shops across our marketplace"}),e.jsxs("p",{className:"text-sm text-secondary-500 dark:text-secondary-500",children:["Showing ",w.length," of ",o.length," products"]})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsx("div",{className:`lg:w-64 ${c?"block":"hidden lg:block"}`,children:e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold text-secondary-900",children:"Filters"}),e.jsx("button",{onClick:m,className:"text-sm text-primary-600 hover:text-primary-700",children:"Clear All"})]}),e.jsxs("div",{className:"card-body space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-secondary-900 mb-3",children:"Categories"}),e.jsx("div",{className:"space-y-2",children:P.map(d=>e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"category",value:d,checked:s===d,onChange:x=>i(x.target.value),className:"rounded border-secondary-300 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"ml-2 text-sm text-secondary-700",children:d})]},d))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-secondary-900 mb-3",children:"Price Range"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"range",min:"0",max:"1000",value:t[1],onChange:d=>r([t[0],parseInt(d.target.value)]),className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-sm text-secondary-600",children:[e.jsxs("span",{children:["$",t[0]]}),e.jsxs("span",{children:["$",t[1]]})]})]})]})]})]})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 space-y-4 sm:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{onClick:()=>v(!c),className:"btn-secondary lg:hidden",children:[e.jsx(ve,{className:"w-4 h-4 mr-2"}),"Filters"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>f("grid"),className:`p-2 rounded ${u==="grid"?"bg-primary-100 text-primary-600":"text-secondary-600 hover:bg-secondary-100"}`,children:e.jsx(ts,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>f("list"),className:`p-2 rounded ${u==="list"?"bg-primary-100 text-primary-600":"text-secondary-600 hover:bg-secondary-100"}`,children:e.jsx(ks,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Sort by:"}),e.jsx("select",{value:n,onChange:d=>p(d.target.value),className:"input w-auto",children:va.map(d=>e.jsx("option",{value:d.value,children:d.label},d.value))})]})]}),s!=="All Categories"&&e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-6",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Active filters:"}),e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-primary-100 text-primary-800",children:[s,e.jsx("button",{onClick:()=>i("All Categories"),className:"ml-2",children:e.jsx(ye,{className:"w-3 h-3"})})]})]}),w.length>0?e.jsx("div",{className:u==="grid"?"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6":"space-y-4",children:w.map(d=>e.jsx(wa,{product:d,viewMode:u},d.productId))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-secondary-400 mb-4",children:e.jsx(ve,{className:"w-16 h-16 mx-auto"})}),e.jsx("h3",{className:"text-lg font-medium text-secondary-900 mb-2",children:"No products found"}),e.jsx("p",{className:"text-secondary-600 mb-4",children:"Try adjusting your filters or check back later for new products"}),e.jsx("button",{onClick:m,className:"btn-primary",children:"Clear Filters"})]}),w.length>0&&e.jsx("div",{className:"flex justify-center mt-12",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"px-3 py-2 text-sm border border-secondary-300 rounded hover:bg-secondary-50",children:"Previous"}),e.jsx("button",{className:"px-3 py-2 text-sm bg-primary-600 text-white rounded",children:"1"}),e.jsx("button",{className:"px-3 py-2 text-sm border border-secondary-300 rounded hover:bg-secondary-50",children:"2"}),e.jsx("button",{className:"px-3 py-2 text-sm border border-secondary-300 rounded hover:bg-secondary-50",children:"3"}),e.jsx("button",{className:"px-3 py-2 text-sm border border-secondary-300 rounded hover:bg-secondary-50",children:"Next"})]})})]})]})]})})},_a=()=>{const[s,i]=l.useState([]),[t,r]=l.useState(null),[n,p]=l.useState("all"),[u,f]=l.useState("all"),[c,v]=l.useState(""),[o,a]=l.useState(!0),[g,j]=l.useState(1),[P,m]=l.useState(!1),[k,w]=l.useState(0),[d,x]=l.useState(!1),{accessToken:_}=z(),C=[{value:"all",label:"All Types"},{value:"order_status",label:"Order Updates"},{value:"loyalty_points",label:"Loyalty Points"},{value:"loyalty_tier",label:"Tier Updates"},{value:"reward_available",label:"New Rewards"},{value:"reward_redeemed",label:"Reward Redemptions"},{value:"referral_bonus",label:"Referral Bonuses"},{value:"new_review",label:"New Reviews"},{value:"low_stock",label:"Stock Alerts"},{value:"promotional",label:"Promotions"},{value:"system",label:"System"}];l.useEffect(()=>{h(),$()},[n,u,g]);const h=async()=>{a(!0);try{const N=new URLSearchParams({page:g.toString(),page_size:"20"});n==="unread"&&N.append("unread_only","true"),u!=="all"&&N.append("type",u);const F=await fetch(`/api/notifications/my_notifications/?${N}`,{headers:{Authorization:`Bearer ${_}`,"Content-Type":"application/json"}});if(F.ok){const A=await F.json();i(g===1?A.notifications:O=>[...O,...A.notifications]),w(A.unread_count),m(A.has_next)}}catch(N){console.error("Error fetching notifications:",N)}finally{a(!1)}},$=async()=>{try{const N=await fetch("/api/notification-preferences/my_preferences/",{headers:{Authorization:`Bearer ${_}`,"Content-Type":"application/json"}});if(N.ok){const F=await N.json();r(F)}}catch(N){console.error("Error fetching preferences:",N)}},y=async N=>{try{(await fetch(`/api/notifications/${N}/mark_as_read/`,{method:"POST",headers:{Authorization:`Bearer ${_}`,"Content-Type":"application/json"}})).ok&&(i(A=>A.map(O=>O.id===N?{...O,is_read:!0,read_at:new Date().toISOString()}:O)),w(A=>Math.max(0,A-1)))}catch(F){console.error("Error marking notification as read:",F)}},E=async()=>{try{(await fetch("/api/notifications/mark_all_read/",{method:"POST",headers:{Authorization:`Bearer ${_}`,"Content-Type":"application/json"}})).ok&&(i(F=>F.map(A=>({...A,is_read:!0,read_at:new Date().toISOString()}))),w(0))}catch(N){console.error("Error marking all notifications as read:",N)}},S=async()=>{try{const N=await fetch("/api/notifications/clear_read/",{method:"DELETE",headers:{Authorization:`Bearer ${_}`,"Content-Type":"application/json"}});if(N.ok){const F=await N.json();alert(F.message),j(1),h()}}catch(N){console.error("Error clearing notifications:",N)}},B=async N=>{try{(await fetch("/api/notification-preferences/my_preferences/",{method:"PUT",headers:{Authorization:`Bearer ${_}`,"Content-Type":"application/json"},body:JSON.stringify(N)})).ok&&(r(A=>({...A,...N})),alert("Preferences updated successfully!"))}catch(F){console.error("Error updating preferences:",F),alert("Failed to update preferences")}},H=(N,F)=>{const A=F==="high"||F==="urgent"?"h-6 w-6 text-red-500":"h-6 w-6 text-blue-500";switch(N){case"order_status":return e.jsx(ge,{className:A});case"loyalty_points":case"loyalty_tier":return e.jsx(te,{className:A});case"reward_available":case"reward_redeemed":return e.jsx(xe,{className:A});case"new_review":return e.jsx(yt,{className:A});case"system":return e.jsx(ss,{className:A});default:return e.jsx(qe,{className:A})}},L=N=>{switch(N){case"urgent":return e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"Urgent"});case"high":return e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800",children:"High"});case"medium":return e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Medium"});case"low":return e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:"Low"});default:return null}},M=N=>new Date(N).toLocaleString(),b=s.filter(N=>N.title.toLowerCase().includes(c.toLowerCase())||N.message.toLowerCase().includes(c.toLowerCase()));return e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Notifications"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Stay updated with your order status, loyalty rewards, and more"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[k>0&&e.jsxs("button",{onClick:E,className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:[e.jsx(We,{className:"h-5 w-5"}),e.jsxs("span",{children:["Mark All Read (",k,")"]})]}),e.jsxs("button",{onClick:()=>x(!d),className:"flex items-center space-x-2 bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700",children:[e.jsx(gt,{className:"h-5 w-5"}),e.jsx("span",{children:"Preferences"})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"space-y-2 mb-6",children:[e.jsx("button",{onClick:()=>{p("all"),j(1)},className:`w-full text-left px-3 py-2 rounded-lg ${n==="all"?"bg-blue-100 text-blue-700":"text-gray-700 hover:bg-gray-100"}`,children:"All Notifications"}),e.jsxs("button",{onClick:()=>{p("unread"),j(1)},className:`w-full text-left px-3 py-2 rounded-lg flex justify-between items-center ${n==="unread"?"bg-blue-100 text-blue-700":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsx("span",{children:"Unread"}),k>0&&e.jsx("span",{className:"bg-red-500 text-white text-xs rounded-full px-2 py-1",children:k})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Filter by Type"}),e.jsx("select",{value:u,onChange:N=>{f(N.target.value),j(1)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:C.map(N=>e.jsx("option",{value:N.value,children:N.label},N.value))})]}),e.jsx("div",{className:"space-y-2",children:e.jsxs("button",{onClick:S,className:"w-full text-left px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg",children:[e.jsx(Pe,{className:"h-4 w-4 inline mr-2"}),"Clear Read Notifications"]})})]})}),e.jsxs("div",{className:"lg:col-span-3",children:[d&&t?e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Notification Preferences"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-4",children:"Delivery Methods"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:t.in_app_enabled,onChange:N=>B({in_app_enabled:N.target.checked}),className:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"}),e.jsx("span",{className:"ml-2",children:"In-App Notifications"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:t.email_enabled,onChange:N=>B({email_enabled:N.target.checked}),className:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"}),e.jsx("span",{className:"ml-2",children:"Email Notifications"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:t.push_enabled,onChange:N=>B({push_enabled:N.target.checked}),className:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"}),e.jsx("span",{className:"ml-2",children:"Push Notifications"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-4",children:"Notification Types"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:Object.entries(t.notification_types_enabled).map(([N,F])=>e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:F,onChange:A=>B({notification_types_enabled:{...t.notification_types_enabled,[N]:A.target.checked}}),className:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"}),e.jsx("span",{className:"ml-2 capitalize",children:N.replace("_"," ")})]},N))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-4",children:"Quiet Hours"}),e.jsxs("label",{className:"flex items-center mb-3",children:[e.jsx("input",{type:"checkbox",checked:t.quiet_hours_enabled,onChange:N=>B({quiet_hours_enabled:N.target.checked}),className:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"}),e.jsx("span",{className:"ml-2",children:"Enable Quiet Hours"})]}),t.quiet_hours_enabled&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Time"}),e.jsx("input",{type:"time",value:t.quiet_hours_start||"22:00",onChange:N=>B({quiet_hours_start:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Time"}),e.jsx("input",{type:"time",value:t.quiet_hours_end||"08:00",onChange:N=>B({quiet_hours_end:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]})]})]}):null,e.jsx("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(K,{className:"h-5 w-5 absolute left-3 top-3 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search notifications...",value:c,onChange:N=>v(N.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow",children:o&&s.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Loading notifications..."})]}):b.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(Se,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No notifications found"})]}):e.jsxs("div",{className:"divide-y divide-gray-200",children:[b.map(N=>e.jsx("div",{className:`p-6 ${N.is_read?"":"bg-blue-50"}`,children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:H(N.notification_type,N.priority)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:`text-lg font-medium ${N.is_read?"text-gray-700":"text-gray-900"}`,children:N.title}),e.jsxs("div",{className:"flex items-center space-x-2",children:[L(N.priority),!N.is_read&&e.jsx("button",{onClick:()=>y(N.id),className:"text-blue-600 hover:text-blue-800",children:e.jsx(We,{className:"h-5 w-5"})})]})]}),e.jsx("p",{className:"text-gray-600 mt-2",children:N.message}),e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsx("span",{className:"text-sm text-gray-500",children:M(N.created_at)}),N.action_url&&e.jsx("a",{href:N.action_url,className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"View Details →"})]})]})]})},N.id)),P&&e.jsx("div",{className:"p-6 border-t border-gray-200",children:e.jsx("button",{onClick:()=>j(N=>N+1),disabled:o,className:"w-full bg-gray-100 hover:bg-gray-200 text-gray-700 py-2 px-4 rounded-lg disabled:opacity-50",children:o?"Loading...":"Load More"})})]})})]})]})]})})},Sa=({isOpen:s,onClose:i,profile:t,onProfileUpdate:r})=>{const[n,p]=l.useState({first_name:t.user.first_name||"",last_name:t.user.last_name||"",bio:t.bio||"",location:t.location||"",website:t.website||"",date_of_birth:t.date_of_birth||"",phone_number:t.phone_number||"",address:t.address||"",is_public:t.is_public,twitter_url:t.twitter_url||"",facebook_url:t.facebook_url||"",instagram_url:t.instagram_url||"",linkedin_url:t.linkedin_url||""}),[u,f]=l.useState(null),[c,v]=l.useState(null),[o,a]=l.useState(null),[g,j]=l.useState(null),[P,m]=l.useState(!1),k=l.useRef(null),w=l.useRef(null);l.useEffect(()=>{s&&(p({first_name:t.user.first_name||"",last_name:t.user.last_name||"",bio:t.bio||"",location:t.location||"",website:t.website||"",date_of_birth:t.date_of_birth||"",phone_number:t.phone_number||"",address:t.address||"",is_public:t.is_public,twitter_url:t.twitter_url||"",facebook_url:t.facebook_url||"",instagram_url:t.instagram_url||"",linkedin_url:t.linkedin_url||""}),f(null),v(null),a(null),j(null))},[s,t]);const d=h=>{const{name:$,value:y,type:E}=h.target;p(S=>({...S,[$]:E==="checkbox"?h.target.checked:y}))},x=h=>{const $=h.target.files?.[0];if($){f($);const y=new FileReader;y.onload=()=>{a(y.result)},y.readAsDataURL($)}},_=h=>{const $=h.target.files?.[0];if($){v($);const y=new FileReader;y.onload=()=>{j(y.result)},y.readAsDataURL($)}},C=async h=>{h.preventDefault(),m(!0);try{const $=new FormData;Object.entries(n).forEach(([E,S])=>{S!=null&&$.append(E,S.toString())}),u&&$.append("avatar",u),c&&$.append("cover_photo",c);const y=await fetch("http://127.0.0.1:8000/api/profile/update/",{method:"PATCH",headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`},body:$});if(y.ok){const E=await y.json();r(E),R.success("Profile updated successfully!"),i()}else{const E=await y.json();R.error(E.message||"Failed to update profile")}}catch($){console.error("Error updating profile:",$),R.error("Failed to update profile")}finally{m(!1)}};return s?e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity bg-secondary-500 bg-opacity-75",onClick:i}),e.jsxs("div",{className:"inline-block align-bottom bg-white dark:bg-secondary-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full sm:p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-secondary-900 dark:text-white",children:"Edit Profile"}),e.jsx("button",{onClick:i,className:"text-secondary-400 hover:text-secondary-600 dark:hover:text-secondary-300",children:e.jsx(ye,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:C,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:"Cover Photo"}),e.jsxs("div",{className:"relative h-32 bg-gradient-to-r from-primary-500 to-primary-700 rounded-lg overflow-hidden",children:[g?e.jsx("img",{src:g,alt:"Cover preview",className:"w-full h-full object-cover"}):t.cover_photo_url?e.jsx("img",{src:t.cover_photo_url,alt:"Cover",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-r from-primary-500 to-primary-700"}),e.jsx("button",{type:"button",onClick:()=>w.current?.click(),className:"absolute inset-0 bg-black bg-opacity-30 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity",children:e.jsx(Ie,{className:"w-8 h-8 text-white"})}),e.jsx("input",{ref:w,type:"file",accept:"image/*",onChange:_,className:"hidden"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:"Profile Picture"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-20 h-20 rounded-full overflow-hidden border-2 border-secondary-200 dark:border-secondary-600",children:o?e.jsx("img",{src:o,alt:"Avatar preview",className:"w-full h-full object-cover"}):t.avatar_url?e.jsx("img",{src:t.avatar_url,alt:"Avatar",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-primary-600 flex items-center justify-center",children:e.jsx(W,{className:"w-10 h-10 text-white"})})}),e.jsx("button",{type:"button",onClick:()=>k.current?.click(),className:"absolute -bottom-1 -right-1 bg-primary-600 text-white p-1 rounded-full hover:bg-primary-700",children:e.jsx(Ie,{className:"w-4 h-4"})}),e.jsx("input",{ref:k,type:"file",accept:"image/*",onChange:x,className:"hidden"})]}),e.jsx("div",{className:"text-sm text-secondary-600 dark:text-secondary-400",children:"Click the camera icon to upload a new profile picture"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-1",children:"First Name"}),e.jsx("input",{type:"text",name:"first_name",value:n.first_name,onChange:d,className:"w-full px-3 py-2 border border-secondary-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-secondary-700 dark:border-secondary-600 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-1",children:"Last Name"}),e.jsx("input",{type:"text",name:"last_name",value:n.last_name,onChange:d,className:"w-full px-3 py-2 border border-secondary-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-secondary-700 dark:border-secondary-600 dark:text-white"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-1",children:"Bio"}),e.jsx("textarea",{name:"bio",rows:3,value:n.bio,onChange:d,className:"w-full px-3 py-2 border border-secondary-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-secondary-700 dark:border-secondary-600 dark:text-white",placeholder:"Tell people about yourself..."})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-1",children:"Location"}),e.jsx("input",{type:"text",name:"location",value:n.location,onChange:d,className:"w-full px-3 py-2 border border-secondary-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-secondary-700 dark:border-secondary-600 dark:text-white",placeholder:"City, Country"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-1",children:"Website"}),e.jsx("input",{type:"url",name:"website",value:n.website,onChange:d,className:"w-full px-3 py-2 border border-secondary-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-secondary-700 dark:border-secondary-600 dark:text-white",placeholder:"https://your-website.com"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-1",children:"Date of Birth"}),e.jsx("input",{type:"date",name:"date_of_birth",value:n.date_of_birth,onChange:d,className:"w-full px-3 py-2 border border-secondary-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-secondary-700 dark:border-secondary-600 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-1",children:"Phone Number"}),e.jsx("input",{type:"tel",name:"phone_number",value:n.phone_number,onChange:d,className:"w-full px-3 py-2 border border-secondary-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-secondary-700 dark:border-secondary-600 dark:text-white"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-1",children:"Address"}),e.jsx("input",{type:"text",name:"address",value:n.address,onChange:d,className:"w-full px-3 py-2 border border-secondary-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-secondary-700 dark:border-secondary-600 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-3",children:"Social Media Links"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-secondary-600 dark:text-secondary-400 mb-1",children:"Twitter"}),e.jsx("input",{type:"url",name:"twitter_url",value:n.twitter_url,onChange:d,className:"w-full px-3 py-2 border border-secondary-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-secondary-700 dark:border-secondary-600 dark:text-white",placeholder:"https://twitter.com/username"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-secondary-600 dark:text-secondary-400 mb-1",children:"Facebook"}),e.jsx("input",{type:"url",name:"facebook_url",value:n.facebook_url,onChange:d,className:"w-full px-3 py-2 border border-secondary-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-secondary-700 dark:border-secondary-600 dark:text-white",placeholder:"https://facebook.com/username"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-secondary-600 dark:text-secondary-400 mb-1",children:"Instagram"}),e.jsx("input",{type:"url",name:"instagram_url",value:n.instagram_url,onChange:d,className:"w-full px-3 py-2 border border-secondary-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-secondary-700 dark:border-secondary-600 dark:text-white",placeholder:"https://instagram.com/username"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-secondary-600 dark:text-secondary-400 mb-1",children:"LinkedIn"}),e.jsx("input",{type:"url",name:"linkedin_url",value:n.linkedin_url,onChange:d,className:"w-full px-3 py-2 border border-secondary-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-secondary-700 dark:border-secondary-600 dark:text-white",placeholder:"https://linkedin.com/in/username"})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"is_public",checked:n.is_public,onChange:d,className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-secondary-300 rounded"}),e.jsx("label",{className:"ml-2 block text-sm text-secondary-700 dark:text-secondary-300",children:"Make profile public"})]}),e.jsx("p",{className:"mt-1 text-xs text-secondary-500 dark:text-secondary-400",children:"Public profiles can be seen by anyone. Private profiles are only visible to followers."})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:i,className:"px-4 py-2 text-sm font-medium text-secondary-700 bg-white border border-secondary-300 rounded-md hover:bg-secondary-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 dark:bg-secondary-700 dark:text-secondary-300 dark:border-secondary-600 dark:hover:bg-secondary-600",disabled:P,children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-primary-600 border border-transparent rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50",disabled:P,children:P?"Saving...":"Save Changes"})]})]})]})]})}):null},Ls=({onPostCreated:s,placeholder:i="What's happening?"})=>{const{user:t}=z(),[r,n]=l.useState(""),[p,u]=l.useState(null),[f,c]=l.useState(null),[v,o]=l.useState(!1),a=l.useRef(null),g=280,j=d=>{const x=d.target.files?.[0];if(x){if(x.size>5*1024*1024){R.error("Image size must be less than 5MB");return}u(x);const _=new FileReader;_.onload=()=>{c(_.result)},_.readAsDataURL(x)}},P=()=>{u(null),c(null),a.current&&(a.current.value="")},m=async d=>{if(d.preventDefault(),!r.trim()&&!p){R.error("Please add some content or an image");return}if(r.length>g){R.error(`Post is too long. Maximum ${g} characters allowed.`);return}o(!0);try{const x=new FormData;x.append("content",r.trim()),x.append("post_type","post"),p&&x.append("image",p);const _=await fetch("http://127.0.0.1:8000/api/posts/",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`},body:x});if(_.ok){const C=await _.json();n(""),u(null),c(null),a.current&&(a.current.value=""),R.success("Post created successfully!"),s&&s(C)}else{const C=await _.json();R.error(C.message||"Failed to create post")}}catch(x){console.error("Error creating post:",x),R.error("Failed to create post")}finally{o(!1)}};if(!t)return e.jsx("div",{className:"bg-white dark:bg-secondary-800 rounded-lg shadow p-6 text-center",children:e.jsx("p",{className:"text-secondary-600 dark:text-secondary-400",children:"Please log in to create posts"})});const k=g-r.length,w=k<0;return e.jsx("div",{className:"bg-white dark:bg-secondary-800 rounded-lg shadow",children:e.jsx("form",{onSubmit:m,className:"p-6",children:e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden",children:t.profile?.avatar_url?e.jsx("img",{src:t.profile.avatar_url,alt:t.username,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-primary-600 flex items-center justify-center",children:e.jsx(W,{className:"w-6 h-6 text-white"})})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("textarea",{value:r,onChange:d=>n(d.target.value),placeholder:i,rows:3,className:"w-full resize-none border-none focus:ring-0 text-xl placeholder-secondary-500 dark:placeholder-secondary-400 bg-transparent text-secondary-900 dark:text-white",style:{outline:"none"}}),f&&e.jsxs("div",{className:"mt-3 relative",children:[e.jsx("img",{src:f,alt:"Preview",className:"w-full max-h-96 object-cover rounded-lg"}),e.jsx("button",{type:"button",onClick:P,className:"absolute top-2 right-2 bg-black bg-opacity-50 text-white p-1 rounded-full hover:bg-opacity-70",children:e.jsx(ye,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{type:"button",onClick:()=>a.current?.click(),className:"flex items-center space-x-2 text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300",disabled:v,children:[e.jsx(ns,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm",children:"Photo"})]}),e.jsx("input",{ref:a,type:"file",accept:"image/*",onChange:j,className:"hidden"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`text-sm ${w?"text-red-500":k<=20?"text-orange-500":"text-secondary-500"}`,children:k}),e.jsx("div",{className:"relative w-5 h-5",children:e.jsxs("svg",{className:"w-5 h-5 transform -rotate-90",children:[e.jsx("circle",{cx:"10",cy:"10",r:"8",stroke:"currentColor",strokeWidth:"2",fill:"none",className:"text-secondary-200 dark:text-secondary-600"}),e.jsx("circle",{cx:"10",cy:"10",r:"8",stroke:"currentColor",strokeWidth:"2",fill:"none",strokeDasharray:`${2*Math.PI*8}`,strokeDashoffset:`${2*Math.PI*8*(1-Math.min(r.length/g,1))}`,className:`transition-all duration-300 ${w?"text-red-500":k<=20?"text-orange-500":"text-primary-500"}`})]})})]})]}),e.jsx("button",{type:"submit",disabled:v||w||!r.trim()&&!p,className:"px-6 py-2 bg-primary-600 text-white rounded-full font-medium hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:v?"Posting...":"Post"})]})]})]})})})},us=()=>{const{username:s}=Fe(),{user:i,isAuthenticated:t}=z(),[r,n]=l.useState(null),[p,u]=l.useState([]),[f,c]=l.useState("posts"),[v,o]=l.useState([]),[a,g]=l.useState([]),[j,P]=l.useState({}),[m,k]=l.useState(!0),[w,d]=l.useState(!1),[x,_]=l.useState(!1),C=s||i?.username;l.useEffect(()=>{C&&(h(),$(),y(),d(!s||s===i?.username))},[C,i]);const h=async()=>{try{const b=await fetch(`http://127.0.0.1:8000/api/profile/${C}/`,{headers:{Authorization:t?`Bearer ${localStorage.getItem("accessToken")}`:""}});if(b.ok){const N=await b.json();n(N)}else R.error("Profile not found")}catch(b){console.error("Error fetching profile:",b),R.error("Failed to load profile")}finally{k(!1)}},$=async()=>{try{const b=await fetch(`http://127.0.0.1:8000/api/profile/${C}/posts/`,{headers:{Authorization:t?`Bearer ${localStorage.getItem("accessToken")}`:""}});if(b.ok){const N=await b.json();u(N.posts||[])}}catch(b){console.error("Error fetching posts:",b)}},y=async()=>{try{const b=await fetch(`http://127.0.0.1:8000/api/profile/${C}/stats/`,{headers:{Authorization:t?`Bearer ${localStorage.getItem("accessToken")}`:""}});if(b.ok){const N=await b.json();P(N)}}catch(b){console.error("Error fetching stats:",b)}},E=async()=>{try{const b=await fetch(`http://127.0.0.1:8000/api/profile/${C}/followers/`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}});if(b.ok){const N=await b.json();o(N.followers||[])}}catch(b){console.error("Error fetching followers:",b)}},S=async()=>{try{const b=await fetch(`http://127.0.0.1:8000/api/profile/${C}/following/`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}});if(b.ok){const N=await b.json();g(N.following||[])}}catch(b){console.error("Error fetching following:",b)}},B=async()=>{if(!(!t||!r))try{const b=r.is_following?`http://127.0.0.1:8000/api/profile/${C}/unfollow/`:`http://127.0.0.1:8000/api/profile/${C}/follow/`,N=r.is_following?"DELETE":"POST",F=await fetch(b,{method:N,headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json"}});if(F.ok){const A=await F.json();n(O=>O?{...O,is_following:A.is_following}:null),R.success(A.message),h()}}catch(b){console.error("Error following/unfollowing:",b),R.error("Failed to update follow status")}},H=async b=>{if(t)try{const N=p.find(I=>I.id===b),F=N?.is_liked?`http://127.0.0.1:8000/api/posts/${b}/unlike/`:`http://127.0.0.1:8000/api/posts/${b}/like/`,A=N?.is_liked?"DELETE":"POST";(await fetch(F,{method:A,headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json"}})).ok&&u(I=>I.map(G=>G.id===b?{...G,is_liked:!G.is_liked,likes_count:G.is_liked?G.likes_count-1:G.likes_count+1}:G))}catch(N){console.error("Error liking post:",N)}},L=b=>{n(b)},M=b=>{u(N=>[b,...N])};return m?e.jsx("div",{className:"min-h-screen bg-secondary-50 dark:bg-secondary-900 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):r?e.jsxs("div",{className:"min-h-screen bg-secondary-50 dark:bg-secondary-900",children:[e.jsxs("div",{className:"relative h-64 bg-gradient-to-r from-primary-500 to-primary-700",children:[r.cover_photo_url?e.jsx("img",{src:r.cover_photo_url,alt:"Cover",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-r from-primary-500 to-primary-700"}),w&&e.jsx("button",{className:"absolute top-4 right-4 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-70",children:e.jsx(Ie,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"relative -mt-20 bg-white dark:bg-secondary-800 rounded-lg shadow-lg p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-end space-y-4 sm:space-y-0 sm:space-x-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-32 h-32 rounded-full border-4 border-white dark:border-secondary-800 overflow-hidden",children:r.avatar_url?e.jsx("img",{src:r.avatar_url,alt:r.display_name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-primary-600 flex items-center justify-center",children:e.jsx(W,{className:"w-16 h-16 text-white"})})}),w&&e.jsx("button",{className:"absolute bottom-0 right-0 bg-primary-600 text-white p-2 rounded-full hover:bg-primary-700",children:e.jsx(Ie,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("h1",{className:"text-2xl font-bold text-secondary-900 dark:text-white",children:r.full_name||r.user.username}),r.verification_badge.is_verified&&e.jsx(ls,{className:`w-6 h-6 ${r.verification_badge.color==="blue"?"text-blue-500":"text-green-500"}`})]}),e.jsxs("p",{className:"text-secondary-600 dark:text-secondary-400 mb-2",children:["@",r.user.username]}),r.bio&&e.jsx("p",{className:"text-secondary-700 dark:text-secondary-300 mb-4",children:r.bio}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-secondary-600 dark:text-secondary-400 mb-4",children:[r.location&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(ne,{className:"w-4 h-4"}),e.jsx("span",{children:r.location})]}),r.website&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(ft,{className:"w-4 h-4"}),e.jsx("a",{href:r.website,target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:underline",children:r.website.replace(/^https?:\/\//,"")})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Be,{className:"w-4 h-4"}),e.jsxs("span",{children:["Joined ",r.user.date_joined?es(new Date(r.user.date_joined),"MMMM yyyy"):"Recently"]})]}),r.is_shopowner&&e.jsx("span",{className:"bg-primary-100 text-primary-800 px-2 py-1 rounded-full text-xs font-medium",children:"Shop Owner"})]}),e.jsxs("div",{className:"flex items-center space-x-6 mb-4",children:[e.jsxs("button",{onClick:()=>{c("following"),S()},className:"hover:underline",children:[e.jsx("span",{className:"font-bold text-secondary-900 dark:text-white",children:r.following_count}),e.jsx("span",{className:"text-secondary-600 dark:text-secondary-400 ml-1",children:"Following"})]}),e.jsxs("button",{onClick:()=>{c("followers"),E()},className:"hover:underline",children:[e.jsx("span",{className:"font-bold text-secondary-900 dark:text-white",children:r.followers_count}),e.jsx("span",{className:"text-secondary-600 dark:text-secondary-400 ml-1",children:"Followers"})]}),j.posts_count!==void 0&&e.jsxs("div",{children:[e.jsx("span",{className:"font-bold text-secondary-900 dark:text-white",children:j.posts_count}),e.jsx("span",{className:"text-secondary-600 dark:text-secondary-400 ml-1",children:"Posts"})]})]})]}),e.jsx("div",{className:"flex space-x-3",children:w?e.jsxs("button",{onClick:()=>_(!0),className:"btn-secondary flex items-center space-x-2",children:[e.jsx(ce,{className:"w-4 h-4"}),e.jsx("span",{children:"Edit Profile"})]}):e.jsxs(e.Fragment,{children:[t&&e.jsx("button",{onClick:B,className:`flex items-center space-x-2 px-4 py-2 rounded-lg font-medium transition-colors ${r.is_following?"bg-secondary-200 text-secondary-800 hover:bg-secondary-300":"bg-primary-600 text-white hover:bg-primary-700"}`,children:r.is_following?e.jsxs(e.Fragment,{children:[e.jsx(jt,{className:"w-4 h-4"}),e.jsx("span",{children:"Unfollow"})]}):e.jsxs(e.Fragment,{children:[e.jsx(_s,{className:"w-4 h-4"}),e.jsx("span",{children:"Follow"})]})}),e.jsx("button",{className:"btn-secondary",children:e.jsx(Xe,{className:"w-4 h-4"})}),e.jsx("button",{className:"btn-secondary",children:e.jsx(rs,{className:"w-4 h-4"})})]})})]})}),e.jsx("div",{className:"mt-6 border-b border-secondary-200 dark:border-secondary-700",children:e.jsxs("nav",{className:"-mb-px flex space-x-8",children:[e.jsx("button",{onClick:()=>c("posts"),className:`py-2 px-1 border-b-2 font-medium text-sm ${f==="posts"?"border-primary-500 text-primary-600":"border-transparent text-secondary-500 hover:text-secondary-700 hover:border-secondary-300"}`,children:"Posts"}),e.jsx("button",{onClick:()=>{c("followers"),E()},className:`py-2 px-1 border-b-2 font-medium text-sm ${f==="followers"?"border-primary-500 text-primary-600":"border-transparent text-secondary-500 hover:text-secondary-700 hover:border-secondary-300"}`,children:"Followers"}),e.jsx("button",{onClick:()=>{c("following"),S()},className:`py-2 px-1 border-b-2 font-medium text-sm ${f==="following"?"border-primary-500 text-primary-600":"border-transparent text-secondary-500 hover:text-secondary-700 hover:border-secondary-300"}`,children:"Following"})]})}),e.jsxs("div",{className:"mt-6 pb-12",children:[f==="posts"&&e.jsxs("div",{className:"space-y-4",children:[w&&e.jsx("div",{className:"mb-6",children:e.jsx(Ls,{onPostCreated:M,placeholder:"Share what's on your mind..."})}),p.length>0?p.map(b=>e.jsx("div",{className:"bg-white dark:bg-secondary-800 rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden",children:r.avatar_url?e.jsx("img",{src:r.avatar_url,alt:r.display_name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-primary-600 flex items-center justify-center",children:e.jsx(W,{className:"w-6 h-6 text-white"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("span",{className:"font-semibold text-secondary-900 dark:text-white",children:r.display_name}),e.jsxs("span",{className:"text-secondary-500 dark:text-secondary-400",children:["@",r.user.username]}),e.jsx("span",{className:"text-secondary-500 dark:text-secondary-400",children:"·"}),e.jsx("span",{className:"text-secondary-500 dark:text-secondary-400",children:es(new Date(b.created_at),"MMM d")})]}),e.jsx("p",{className:"text-secondary-900 dark:text-white mb-3",children:b.content}),b.image_url&&e.jsx("img",{src:b.image_url,alt:"Post",className:"w-full rounded-lg mb-3 max-h-96 object-cover"}),e.jsxs("div",{className:"flex items-center space-x-6 text-secondary-500 dark:text-secondary-400",children:[e.jsxs("button",{onClick:()=>H(b.id),className:"flex items-center space-x-2 hover:text-red-500",children:[b.is_liked?e.jsx(Ee,{className:"w-5 h-5 text-red-500"}):e.jsx(Z,{className:"w-5 h-5"}),e.jsx("span",{children:b.likes_count})]}),e.jsxs("button",{className:"flex items-center space-x-2 hover:text-primary-500",children:[e.jsx(Xe,{className:"w-5 h-5"}),e.jsx("span",{children:b.replies_count})]}),e.jsx("button",{className:"flex items-center space-x-2 hover:text-primary-500",children:e.jsx(De,{className:"w-5 h-5"})})]})]})]})},b.id)):e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-secondary-600 dark:text-secondary-400",children:w?"You haven't posted anything yet.":"No posts yet."})})]}),f==="followers"&&e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:v.map(b=>e.jsx("div",{className:"bg-white dark:bg-secondary-800 rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden",children:b.profile?.avatar_url?e.jsx("img",{src:b.profile.avatar_url,alt:b.username,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-primary-600 flex items-center justify-center",children:e.jsx(W,{className:"w-6 h-6 text-white"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-secondary-900 dark:text-white",children:b.first_name&&b.last_name?`${b.first_name} ${b.last_name}`:b.username}),e.jsxs("p",{className:"text-secondary-600 dark:text-secondary-400 text-sm",children:["@",b.username]})]})]})},b.id))}),f==="following"&&e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map(b=>e.jsx("div",{className:"bg-white dark:bg-secondary-800 rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden",children:b.profile?.avatar_url?e.jsx("img",{src:b.profile.avatar_url,alt:b.username,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-primary-600 flex items-center justify-center",children:e.jsx(W,{className:"w-6 h-6 text-white"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-secondary-900 dark:text-white",children:b.first_name&&b.last_name?`${b.first_name} ${b.last_name}`:b.username}),e.jsxs("p",{className:"text-secondary-600 dark:text-secondary-400 text-sm",children:["@",b.username]})]})]})},b.id))})]})]}),r&&e.jsx(Sa,{isOpen:x,onClose:()=>_(!1),profile:r,onProfileUpdate:L})]}):e.jsx("div",{className:"min-h-screen bg-secondary-50 dark:bg-secondary-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-secondary-900 dark:text-white mb-4",children:"Profile Not Found"}),e.jsx("p",{className:"text-secondary-600 dark:text-secondary-400",children:"The profile you're looking for doesn't exist."})]})})},Ca=()=>{const{isAuthenticated:s}=z(),[i,t]=l.useState([]),[r,n]=l.useState(!0),[p,u]=l.useState(!1);l.useEffect(()=>{s&&f()},[s]);const f=async(a=!1)=>{a?u(!0):n(!0);try{const g=await fetch("http://127.0.0.1:8000/api/feed/",{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}});if(g.ok){const j=await g.json();t(j.posts||[])}else R.error("Failed to load feed")}catch(g){console.error("Error fetching feed:",g),R.error("Failed to load feed")}finally{n(!1),u(!1)}},c=async a=>{if(s)try{const g=i.find(k=>k.id===a),j=g?.is_liked?`http://127.0.0.1:8000/api/posts/${a}/unlike/`:`http://127.0.0.1:8000/api/posts/${a}/like/`,P=g?.is_liked?"DELETE":"POST";(await fetch(j,{method:P,headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json"}})).ok&&t(k=>k.map(w=>w.id===a?{...w,is_liked:!w.is_liked,likes_count:w.is_liked?w.likes_count-1:w.likes_count+1}:w))}catch(g){console.error("Error liking post:",g),R.error("Failed to update like")}},v=a=>{t(g=>[a,...g])},o=async a=>{if(window.confirm("Are you sure you want to delete this post?"))try{(await fetch(`http://127.0.0.1:8000/api/posts/${a}/`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}})).ok?(t(j=>j.filter(P=>P.id!==a)),R.success("Post deleted successfully")):R.error("Failed to delete post")}catch(g){console.error("Error deleting post:",g),R.error("Failed to delete post")}};return s?r?e.jsx("div",{className:"min-h-screen bg-secondary-50 dark:bg-secondary-900 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):e.jsx("div",{className:"min-h-screen bg-secondary-50 dark:bg-secondary-900",children:e.jsxs("div",{className:"max-w-2xl mx-auto py-8 px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-secondary-900 dark:text-white",children:"Your Feed"}),e.jsx("button",{onClick:()=>f(!0),disabled:p,className:"text-primary-600 hover:text-primary-700 text-sm font-medium",children:p?"Refreshing...":"Refresh"})]}),e.jsx("p",{className:"text-secondary-600 dark:text-secondary-400",children:"See what's happening with people you follow"})]}),e.jsx("div",{className:"mb-6",children:e.jsx(Ls,{onPostCreated:v})}),e.jsx("div",{className:"space-y-4",children:i.length>0?i.map(a=>e.jsx("div",{className:"bg-white dark:bg-secondary-800 rounded-lg shadow hover:shadow-md transition-shadow",children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(T,{to:`/profile/${a.user.username}`,className:"flex-shrink-0",children:e.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden",children:a.user.profile?.avatar_url?e.jsx("img",{src:a.user.profile.avatar_url,alt:a.user.profile.display_name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-primary-600 flex items-center justify-center",children:e.jsx(W,{className:"w-6 h-6 text-white"})})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(T,{to:`/profile/${a.user.username}`,className:"font-semibold text-secondary-900 dark:text-white hover:underline",children:a.user.profile.display_name||a.user.username}),a.user.profile.verification_badge.is_verified&&e.jsx(ls,{className:`w-5 h-5 ${a.user.profile.verification_badge.color==="blue"?"text-blue-500":"text-green-500"}`}),e.jsxs("span",{className:"text-secondary-500 dark:text-secondary-400",children:["@",a.user.username]}),e.jsx("span",{className:"text-secondary-500 dark:text-secondary-400",children:"·"}),e.jsx("span",{className:"text-secondary-500 dark:text-secondary-400",children:es(new Date(a.created_at),"MMM d, yyyy")})]}),(a.can_edit||a.can_delete)&&e.jsx("div",{className:"relative",children:e.jsx("button",{className:"text-secondary-400 hover:text-secondary-600 dark:hover:text-secondary-300 p-1",children:e.jsx(rs,{className:"w-5 h-5"})})})]}),e.jsx("div",{className:"mb-3",children:e.jsx("p",{className:"text-secondary-900 dark:text-white whitespace-pre-wrap",children:a.content})}),a.image_url&&e.jsx("div",{className:"mb-3",children:e.jsx("img",{src:a.image_url,alt:"Post",className:"w-full rounded-lg max-h-96 object-cover"})}),e.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-secondary-100 dark:border-secondary-700",children:[e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("button",{onClick:()=>c(a.id),className:"flex items-center space-x-2 text-secondary-500 hover:text-red-500 dark:text-secondary-400 dark:hover:text-red-400 transition-colors group",children:[a.is_liked?e.jsx(Ee,{className:"w-5 h-5 text-red-500"}):e.jsx(Z,{className:"w-5 h-5 group-hover:text-red-500"}),e.jsx("span",{className:"text-sm font-medium",children:a.likes_count})]}),e.jsxs("button",{className:"flex items-center space-x-2 text-secondary-500 hover:text-primary-500 dark:text-secondary-400 dark:hover:text-primary-400 transition-colors",children:[e.jsx(Xe,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:a.replies_count})]}),e.jsx("button",{className:"flex items-center space-x-2 text-secondary-500 hover:text-primary-500 dark:text-secondary-400 dark:hover:text-primary-400 transition-colors",children:e.jsx(De,{className:"w-5 h-5"})})]}),a.can_delete&&e.jsx("button",{onClick:()=>o(a.id),className:"text-red-500 hover:text-red-700 text-sm font-medium",children:"Delete"})]})]})]})})},a.id)):e.jsx("div",{className:"bg-white dark:bg-secondary-800 rounded-lg shadow p-12 text-center",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx(W,{className:"w-16 h-16 text-secondary-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-secondary-900 dark:text-white mb-2",children:"Your feed is empty"}),e.jsx("p",{className:"text-secondary-600 dark:text-secondary-400 mb-6",children:"Follow some users to see their posts in your feed, or create your first post to get started!"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(T,{to:"/discover",className:"block w-full btn-primary text-center",children:"Discover People"}),e.jsx(T,{to:"/profile",className:"block w-full btn-secondary text-center",children:"Go to Profile"})]})]})})})]})}):e.jsx("div",{className:"min-h-screen bg-secondary-50 dark:bg-secondary-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-secondary-900 dark:text-white mb-4",children:"Welcome to OneSoko Feed"}),e.jsx("p",{className:"text-secondary-600 dark:text-secondary-400 mb-6",children:"Please log in to see your personalized feed and connect with others."}),e.jsx(T,{to:"/login",className:"btn-primary",children:"Log In"})]})})},Pa=()=>{const{isAuthenticated:s}=z(),[i,t]=l.useState(""),[r,n]=l.useState([]),[p,u]=l.useState([]),[f,c]=l.useState([]),[v,o]=l.useState(!1),[a,g]=l.useState("suggested");l.useEffect(()=>{s&&(j(),P())},[s]);const j=async()=>{try{const d=await fetch("http://127.0.0.1:8000/api/users/suggested/",{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}});if(d.ok){const x=await d.json();u(x.users||[])}}catch(d){console.error("Error fetching suggested users:",d)}},P=async()=>{try{const d=await fetch("http://127.0.0.1:8000/api/users/trending/",{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}});if(d.ok){const x=await d.json();c(x.users||[])}}catch(d){console.error("Error fetching trending users:",d)}},m=async d=>{if(!d.trim()){n([]),g("suggested");return}o(!0),g("search");try{const x=await fetch(`http://127.0.0.1:8000/api/users/search/?q=${encodeURIComponent(d)}`,{headers:{Authorization:s?`Bearer ${localStorage.getItem("accessToken")}`:""}});if(x.ok){const _=await x.json();n(_.users||[])}}catch(x){console.error("Error searching users:",x),R.error("Failed to search users")}finally{o(!1)}},k=async d=>{if(!s){R.error("Please log in to follow users");return}try{const x=[...p,...f,...r].find($=>$.username===d),_=x?.profile.is_following?`http://127.0.0.1:8000/api/profile/${d}/unfollow/`:`http://127.0.0.1:8000/api/profile/${d}/follow/`,C=x?.profile.is_following?"DELETE":"POST",h=await fetch(_,{method:C,headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json"}});if(h.ok){const $=await h.json(),y=E=>E.map(S=>S.username===d?{...S,profile:{...S.profile,is_following:$.is_following}}:S);u(y),c(y),n(y),R.success($.message)}}catch(x){console.error("Error following/unfollowing user:",x),R.error("Failed to update follow status")}},w=({user:d,showFollowButton:x=!0})=>e.jsx("div",{className:"bg-white dark:bg-secondary-800 rounded-lg shadow p-6 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-4 flex-1",children:[e.jsx(T,{to:`/profile/${d.username}`,className:"flex-shrink-0",children:e.jsx("div",{className:"w-16 h-16 rounded-full overflow-hidden",children:d.profile.avatar_url?e.jsx("img",{src:d.profile.avatar_url,alt:d.profile.display_name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-primary-600 flex items-center justify-center",children:e.jsx(W,{className:"w-8 h-8 text-white"})})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(T,{to:`/profile/${d.username}`,className:"font-semibold text-secondary-900 dark:text-white hover:underline",children:d.profile.display_name||d.username}),d.profile.verification_badge.is_verified&&e.jsx(ls,{className:`w-5 h-5 ${d.profile.verification_badge.color==="blue"?"text-blue-500":"text-green-500"}`})]}),e.jsxs("p",{className:"text-secondary-600 dark:text-secondary-400 text-sm mb-2",children:["@",d.username]}),d.profile.bio&&e.jsx("p",{className:"text-secondary-700 dark:text-secondary-300 text-sm mb-3 line-clamp-2",children:d.profile.bio}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-secondary-600 dark:text-secondary-400",children:[e.jsxs("span",{children:[e.jsx("span",{className:"font-medium text-secondary-900 dark:text-white",children:d.profile.followers_count})," followers"]}),e.jsxs("span",{children:[e.jsx("span",{className:"font-medium text-secondary-900 dark:text-white",children:d.profile.following_count})," following"]})]})]})]}),x&&s&&e.jsxs("button",{onClick:()=>k(d.username),className:`flex items-center space-x-2 px-4 py-2 rounded-lg font-medium transition-colors ${d.profile.is_following?"bg-secondary-200 text-secondary-800 hover:bg-secondary-300":"bg-primary-600 text-white hover:bg-primary-700"}`,children:[e.jsx(_s,{className:"w-4 h-4"}),e.jsx("span",{children:d.profile.is_following?"Following":"Follow"})]})]})});return e.jsx("div",{className:"min-h-screen bg-secondary-50 dark:bg-secondary-900",children:e.jsxs("div",{className:"max-w-4xl mx-auto py-8 px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-secondary-900 dark:text-white mb-4",children:"Discover People"}),e.jsx("p",{className:"text-secondary-600 dark:text-secondary-400",children:"Find and connect with interesting people on OneSoko"})]}),e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"relative",children:[e.jsx(K,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-secondary-400"}),e.jsx("input",{type:"text",placeholder:"Search for people...",value:i,onChange:d=>{t(d.target.value),m(d.target.value)},className:"w-full pl-10 pr-4 py-3 border border-secondary-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-secondary-800 dark:border-secondary-600 dark:text-white"})]})}),e.jsx("div",{className:"mb-6 border-b border-secondary-200 dark:border-secondary-700",children:e.jsxs("nav",{className:"-mb-px flex space-x-8",children:[e.jsx("button",{onClick:()=>g("suggested"),className:`py-2 px-1 border-b-2 font-medium text-sm ${a==="suggested"?"border-primary-500 text-primary-600":"border-transparent text-secondary-500 hover:text-secondary-700 hover:border-secondary-300"}`,children:"Suggested for You"}),e.jsx("button",{onClick:()=>g("trending"),className:`py-2 px-1 border-b-2 font-medium text-sm ${a==="trending"?"border-primary-500 text-primary-600":"border-transparent text-secondary-500 hover:text-secondary-700 hover:border-secondary-300"}`,children:"Trending"}),i&&e.jsx("button",{onClick:()=>g("search"),className:`py-2 px-1 border-b-2 font-medium text-sm ${a==="search"?"border-primary-500 text-primary-600":"border-transparent text-secondary-500 hover:text-secondary-700 hover:border-secondary-300"}`,children:"Search Results"})]})}),e.jsx("div",{className:"space-y-4",children:v?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):e.jsxs(e.Fragment,{children:[a==="suggested"&&e.jsx("div",{className:"space-y-4",children:p.length>0?p.map(d=>e.jsx(w,{user:d},d.id)):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(W,{className:"w-16 h-16 text-secondary-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-secondary-900 dark:text-white mb-2",children:"No suggestions yet"}),e.jsx("p",{className:"text-secondary-600 dark:text-secondary-400",children:s?"We'll suggest people for you to follow based on your activity.":"Log in to see personalized suggestions."})]})}),a==="trending"&&e.jsx("div",{className:"space-y-4",children:f.length>0?f.map(d=>e.jsx(w,{user:d},d.id)):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(W,{className:"w-16 h-16 text-secondary-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-secondary-900 dark:text-white mb-2",children:"No trending users"}),e.jsx("p",{className:"text-secondary-600 dark:text-secondary-400",children:"Check back later to see who's trending on OneSoko."})]})}),a==="search"&&e.jsx("div",{className:"space-y-4",children:r.length>0?r.map(d=>e.jsx(w,{user:d},d.id)):i?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(K,{className:"w-16 h-16 text-secondary-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-secondary-900 dark:text-white mb-2",children:"No results found"}),e.jsx("p",{className:"text-secondary-600 dark:text-secondary-400",children:"Try searching for different keywords or usernames."})]}):null})]})}),!s&&e.jsxs("div",{className:"mt-12 bg-primary-50 dark:bg-primary-900/20 rounded-lg p-6 text-center",children:[e.jsx("h3",{className:"text-lg font-medium text-primary-900 dark:text-primary-100 mb-2",children:"Join OneSoko to Connect"}),e.jsx("p",{className:"text-primary-700 dark:text-primary-300 mb-4",children:"Create an account to follow people, share posts, and build your network."}),e.jsxs("div",{className:"space-x-4",children:[e.jsx(T,{to:"/register",className:"btn-primary",children:"Sign Up"}),e.jsx(T,{to:"/login",className:"btn-secondary",children:"Log In"})]})]})]})})},Fa=()=>e.jsx("div",{className:"min-h-screen bg-secondary-50 dark:bg-secondary-900 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-secondary-900 dark:text-white",children:"Quick Links"}),e.jsx("p",{className:"mt-2 text-lg text-secondary-600 dark:text-secondary-300",children:"Quick access to all your favorite OneSoko features"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx($s,{variant:"grid",showTitle:!1,maxItems:20,className:"mb-8"})}),e.jsxs("div",{className:"bg-white dark:bg-secondary-800 rounded-lg shadow-sm border border-secondary-200 dark:border-secondary-700 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-secondary-900 dark:text-white mb-4",children:"Recent Activity"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center p-3 rounded-lg bg-secondary-50 dark:bg-secondary-700",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-3"}),e.jsx("span",{className:"text-sm text-secondary-700 dark:text-secondary-300",children:"Order #12345 delivered"}),e.jsx("span",{className:"ml-auto text-xs text-secondary-500",children:"2h ago"})]}),e.jsxs("div",{className:"flex items-center p-3 rounded-lg bg-secondary-50 dark:bg-secondary-700",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mr-3"}),e.jsx("span",{className:"text-sm text-secondary-700 dark:text-secondary-300",children:"New message from seller"}),e.jsx("span",{className:"ml-auto text-xs text-secondary-500",children:"4h ago"})]}),e.jsxs("div",{className:"flex items-center p-3 rounded-lg bg-secondary-50 dark:bg-secondary-700",children:[e.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full mr-3"}),e.jsx("span",{className:"text-sm text-secondary-700 dark:text-secondary-300",children:"Price drop alert"}),e.jsx("span",{className:"ml-auto text-xs text-secondary-500",children:"1d ago"})]})]})]})]})]})}),Q=({children:s,requireShopOwner:i=!1})=>{const{isAuthenticated:t,userProfile:r}=z(),n=Oe();return t?i&&!r?.is_shopowner?e.jsx(ds,{to:"/",replace:!0}):e.jsx(e.Fragment,{children:s}):e.jsx(ds,{to:"/login",state:{from:n},replace:!0})},$a=new _t({defaultOptions:{queries:{retry:1,refetchOnWindowFocus:!1}}});function Ta(){const s=z(p=>p.checkAuth),[i,t]=l.useState(!1),[r,n]=l.useState(!1);return l.useEffect(()=>{(async()=>{try{await s()}catch(u){console.error("Auth check failed:",u)}finally{t(!0)}})()},[s]),i?e.jsx(Ct,{children:e.jsx(bt,{client:$a,children:e.jsx(It,{children:e.jsx(Nt,{children:e.jsxs("div",{className:"layout-container bg-neutral-50 dark:bg-neutral-900 transition-colors duration-200",children:[e.jsxs("div",{className:"desktop-layout layout-transition flex-1",children:[e.jsx("div",{className:`
                  desktop-sidebar mobile-sidebar sidebar-slide sidebar-container
                  ${r?"translate-x-0":"-translate-x-full md:translate-x-0"}
                  ${r?"mobile-sidebar":""} 
                  transition-transform duration-300 ease-in-out
                  fixed md:relative inset-y-0 left-0 z-50 md:z-30
                `,children:e.jsx(Ft,{onClose:()=>n(!1)})}),r&&e.jsx("div",{className:"mobile-overlay fixed inset-0 bg-black bg-opacity-50 z-40 md:hidden transition-opacity duration-300",onClick:()=>n(!1)}),e.jsxs("div",{className:"desktop-content flex flex-col min-w-0 content-transition",children:[e.jsx(Pt,{onMobileMenuToggle:()=>n(!r)}),e.jsx(vt,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"},success:{style:{background:"#10B981"}},error:{style:{background:"#EF4444"}}}}),e.jsx("main",{className:"flex-1 overflow-auto main-content-area mobile-padding tablet-padding desktop-padding",children:e.jsxs(wt,{children:[e.jsx(q,{path:"/",element:e.jsx(ms,{})}),e.jsx(q,{path:"/x-ui",element:e.jsx(Gt,{})}),e.jsx(q,{path:"/explore",element:e.jsx(Ge,{})}),e.jsx(q,{path:"/search",element:e.jsx(Ge,{})}),e.jsx(q,{path:"/products",element:e.jsx(ka,{})}),e.jsx(q,{path:"/shops",element:e.jsx(Ge,{})}),e.jsx(q,{path:"/shops/:id",element:e.jsx(Qt,{})}),e.jsx(q,{path:"/cart",element:e.jsx(Kt,{})}),e.jsx(q,{path:"/login",element:e.jsx(Zt,{})}),e.jsx(q,{path:"/register",element:e.jsx(ea,{})}),e.jsx(q,{path:"/register/customer",element:e.jsx(Xt,{})}),e.jsx(q,{path:"/register/shop-owner",element:e.jsx(ra,{})}),e.jsx(q,{path:"/shop/dashboard",element:e.jsx(Q,{requireShopOwner:!0,children:e.jsx(oa,{})})}),e.jsx(q,{path:"/shop/products",element:e.jsx(Q,{requireShopOwner:!0,children:e.jsx(ca,{})})}),e.jsx(q,{path:"/shop/products/add",element:e.jsx(Q,{requireShopOwner:!0,children:e.jsx(da,{})})}),e.jsx(q,{path:"/shop/products/edit/:id",element:e.jsx(Q,{requireShopOwner:!0,children:e.jsx(ma,{})})}),e.jsx(q,{path:"/shop/orders",element:e.jsx(Q,{requireShopOwner:!0,children:e.jsx(ga,{})})}),e.jsx(q,{path:"/shop/orders/:id",element:e.jsx(Q,{requireShopOwner:!0,children:e.jsx(ya,{})})}),e.jsx(q,{path:"/customer/orders/:id/track",element:e.jsx(fa,{})}),e.jsx(q,{path:"/track-order",element:e.jsx(ja,{})}),e.jsx(q,{path:"/shop/settings",element:e.jsx(Q,{requireShopOwner:!0,children:e.jsx(xa,{})})}),e.jsx(q,{path:"/shop/analytics",element:e.jsx(Q,{requireShopOwner:!0,children:e.jsx(ha,{})})}),e.jsx(q,{path:"/shop/reviews",element:e.jsx(Q,{requireShopOwner:!0,children:e.jsx(pa,{})})}),e.jsx(q,{path:"/shop/advanced-analytics",element:e.jsx(Q,{requireShopOwner:!0,children:e.jsx(ua,{})})}),e.jsx(q,{path:"/shop/loyalty",element:e.jsx(Q,{requireShopOwner:!0,children:e.jsx(Na,{})})}),e.jsx(q,{path:"/loyalty",element:e.jsx(Q,{children:e.jsx(ba,{})})}),e.jsx(q,{path:"/notifications",element:e.jsx(Q,{children:e.jsx(_a,{})})}),e.jsx(q,{path:"/feed",element:e.jsx(Q,{children:e.jsx(Ca,{})})}),e.jsx(q,{path:"/discover",element:e.jsx(Pa,{})}),e.jsx(q,{path:"/quick-links",element:e.jsx(Fa,{})}),e.jsx(q,{path:"/profile",element:e.jsx(us,{})}),e.jsx(q,{path:"/profile/:username",element:e.jsx(us,{})}),e.jsx(q,{path:"/test",element:e.jsx(Yt,{})}),e.jsx(q,{path:"/reviews-demo",element:e.jsx(la,{})}),e.jsx(q,{path:"/newsletter-test",element:e.jsx(ia,{})}),e.jsx(q,{path:"/layout-demo",element:e.jsx(Dt,{})}),e.jsx(q,{path:"*",element:e.jsx(ms,{})})]})})]})]}),e.jsx($t,{}),e.jsx(Tt,{}),e.jsx(At,{}),e.jsx(Et,{})]})})})})}):e.jsx("div",{className:"min-h-screen bg-secondary-50 dark:bg-secondary-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),e.jsx("p",{className:"text-secondary-600 dark:text-secondary-400",children:"Loading OneSoko..."})]})})}class Aa extends l.Component{constructor(i){super(i),this.state={hasError:!1}}static getDerivedStateFromError(i){return{hasError:!0,error:i}}componentDidCatch(i,t){console.error("Error caught by boundary:",i,t),this.setState({error:i,errorInfo:t})}render(){return this.state.hasError?e.jsx("div",{className:"min-h-screen bg-red-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md max-w-2xl w-full",children:[e.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Something went wrong"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Error Details:"}),e.jsx("pre",{className:"bg-gray-100 p-4 rounded text-sm overflow-auto",children:this.state.error?.toString()})]}),this.state.errorInfo&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Component Stack:"}),e.jsx("pre",{className:"bg-gray-100 p-4 rounded text-sm overflow-auto",children:this.state.errorInfo.componentStack})]}),e.jsx("button",{onClick:()=>window.location.reload(),className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"Reload Page"})]})}):this.props.children}}kt.createRoot(document.getElementById("root")).render(e.jsx(l.StrictMode,{children:e.jsx(Aa,{children:e.jsx(Ta,{})})}));
